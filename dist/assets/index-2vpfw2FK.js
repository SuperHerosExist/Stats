(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Fm={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function o1(){if(T_)return Hl;T_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:u,ref:o!==void 0?o:null,props:c}}return Hl.Fragment=e,Hl.jsx=n,Hl.jsxs=n,Hl}var S_;function l1(){return S_||(S_=1,Fm.exports=o1()),Fm.exports}var f=l1(),qm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function c1(){if(A_)return Ne;A_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function N(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,k={};function U(j,J,ce){this.props=j,this.context=J,this.refs=k,this.updater=ce||O}U.prototype.isReactComponent={},U.prototype.setState=function(j,J){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,J,"setState")},U.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Q(){}Q.prototype=U.prototype;function W(j,J,ce){this.props=j,this.context=J,this.refs=k,this.updater=ce||O}var re=W.prototype=new Q;re.constructor=W,V(re,U.prototype),re.isPureReactComponent=!0;var oe=Array.isArray;function ue(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(j,J,ce){var he=ce.ref;return{$$typeof:i,type:j,key:J,ref:he!==void 0?he:null,props:ce}}function z(j,J){return R(j.type,J,j.props)}function M(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function F(j){var J={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ce){return J[ce]})}var I=/\/+/g;function pe(j,J){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):J.toString(36)}function Ee(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ue,ue):(j.status="pending",j.then(function(J){j.status==="pending"&&(j.status="fulfilled",j.value=J)},function(J){j.status==="pending"&&(j.status="rejected",j.reason=J)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Y(j,J,ce,he,be){var Ae=typeof j;(Ae==="undefined"||Ae==="boolean")&&(j=null);var Fe=!1;if(j===null)Fe=!0;else switch(Ae){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(j.$$typeof){case i:case e:Fe=!0;break;case b:return Fe=j._init,Y(Fe(j._payload),J,ce,he,be)}}if(Fe)return be=be(j),Fe=he===""?"."+pe(j,0):he,oe(be)?(ce="",Fe!=null&&(ce=Fe.replace(I,"$&/")+"/"),Y(be,J,ce,"",function(Dr){return Dr})):be!=null&&(M(be)&&(be=z(be,ce+(be.key==null||j&&j.key===be.key?"":(""+be.key).replace(I,"$&/")+"/")+Fe)),J.push(be)),1;Fe=0;var Ot=he===""?".":he+":";if(oe(j))for(var ot=0;ot<j.length;ot++)he=j[ot],Ae=Ot+pe(he,ot),Fe+=Y(he,J,ce,Ae,be);else if(ot=N(j),typeof ot=="function")for(j=ot.call(j),ot=0;!(he=j.next()).done;)he=he.value,Ae=Ot+pe(he,ot++),Fe+=Y(he,J,ce,Ae,be);else if(Ae==="object"){if(typeof j.then=="function")return Y(Ee(j),J,ce,he,be);throw J=String(j),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function se(j,J,ce){if(j==null)return j;var he=[],be=0;return Y(j,he,"","",function(Ae){return J.call(ce,Ae,be++)}),he}function le(j){if(j._status===-1){var J=j._result;J=J(),J.then(function(ce){(j._status===0||j._status===-1)&&(j._status=1,j._result=ce)},function(ce){(j._status===0||j._status===-1)&&(j._status=2,j._result=ce)}),j._status===-1&&(j._status=0,j._result=J)}if(j._status===1)return j._result.default;throw j._result}var Se=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},je={map:se,forEach:function(j,J,ce){se(j,function(){J.apply(this,arguments)},ce)},count:function(j){var J=0;return se(j,function(){J++}),J},toArray:function(j){return se(j,function(J){return J})||[]},only:function(j){if(!M(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ne.Activity=x,Ne.Children=je,Ne.Component=U,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=W,Ne.StrictMode=r,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(j){return C.H.useMemoCache(j)}},Ne.cache=function(j){return function(){return j.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(j,J,ce){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var he=V({},j.props),be=j.key;if(J!=null)for(Ae in J.key!==void 0&&(be=""+J.key),J)!A.call(J,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&J.ref===void 0||(he[Ae]=J[Ae]);var Ae=arguments.length-2;if(Ae===1)he.children=ce;else if(1<Ae){for(var Fe=Array(Ae),Ot=0;Ot<Ae;Ot++)Fe[Ot]=arguments[Ot+2];he.children=Fe}return R(j.type,be,he)},Ne.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},Ne.createElement=function(j,J,ce){var he,be={},Ae=null;if(J!=null)for(he in J.key!==void 0&&(Ae=""+J.key),J)A.call(J,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(be[he]=J[he]);var Fe=arguments.length-2;if(Fe===1)be.children=ce;else if(1<Fe){for(var Ot=Array(Fe),ot=0;ot<Fe;ot++)Ot[ot]=arguments[ot+2];be.children=Ot}if(j&&j.defaultProps)for(he in Fe=j.defaultProps,Fe)be[he]===void 0&&(be[he]=Fe[he]);return R(j,Ae,be)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(j){return{$$typeof:p,render:j}},Ne.isValidElement=M,Ne.lazy=function(j){return{$$typeof:b,_payload:{_status:-1,_result:j},_init:le}},Ne.memo=function(j,J){return{$$typeof:y,type:j,compare:J===void 0?null:J}},Ne.startTransition=function(j){var J=C.T,ce={};C.T=ce;try{var he=j(),be=C.S;be!==null&&be(ce,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ue,Se)}catch(Ae){Se(Ae)}finally{J!==null&&ce.types!==null&&(J.types=ce.types),C.T=J}},Ne.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ne.use=function(j){return C.H.use(j)},Ne.useActionState=function(j,J,ce){return C.H.useActionState(j,J,ce)},Ne.useCallback=function(j,J){return C.H.useCallback(j,J)},Ne.useContext=function(j){return C.H.useContext(j)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(j,J){return C.H.useDeferredValue(j,J)},Ne.useEffect=function(j,J){return C.H.useEffect(j,J)},Ne.useEffectEvent=function(j){return C.H.useEffectEvent(j)},Ne.useId=function(){return C.H.useId()},Ne.useImperativeHandle=function(j,J,ce){return C.H.useImperativeHandle(j,J,ce)},Ne.useInsertionEffect=function(j,J){return C.H.useInsertionEffect(j,J)},Ne.useLayoutEffect=function(j,J){return C.H.useLayoutEffect(j,J)},Ne.useMemo=function(j,J){return C.H.useMemo(j,J)},Ne.useOptimistic=function(j,J){return C.H.useOptimistic(j,J)},Ne.useReducer=function(j,J,ce){return C.H.useReducer(j,J,ce)},Ne.useRef=function(j){return C.H.useRef(j)},Ne.useState=function(j){return C.H.useState(j)},Ne.useSyncExternalStore=function(j,J,ce){return C.H.useSyncExternalStore(j,J,ce)},Ne.useTransition=function(){return C.H.useTransition()},Ne.version="19.2.0",Ne}var N_;function Hp(){return N_||(N_=1,qm.exports=c1()),qm.exports}var P=Hp(),Hm={exports:{}},Gl={},Gm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function u1(){return R_||(R_=1,(function(i){function e(Y,se){var le=Y.length;Y.push(se);e:for(;0<le;){var Se=le-1>>>1,je=Y[Se];if(0<o(je,se))Y[Se]=se,Y[le]=je,le=Se;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var se=Y[0],le=Y.pop();if(le!==se){Y[0]=le;e:for(var Se=0,je=Y.length,j=je>>>1;Se<j;){var J=2*(Se+1)-1,ce=Y[J],he=J+1,be=Y[he];if(0>o(ce,le))he<je&&0>o(be,ce)?(Y[Se]=be,Y[he]=le,Se=he):(Y[Se]=ce,Y[J]=le,Se=J);else if(he<je&&0>o(be,le))Y[Se]=be,Y[he]=le,Se=he;else break e}}return se}function o(Y,se){var le=Y.sortIndex-se.sortIndex;return le!==0?le:Y.id-se.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,p=u.now();i.unstable_now=function(){return u.now()-p}}var g=[],y=[],b=1,x=null,E=3,N=!1,O=!1,V=!1,k=!1,U=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function re(Y){for(var se=n(y);se!==null;){if(se.callback===null)r(y);else if(se.startTime<=Y)r(y),se.sortIndex=se.expirationTime,e(g,se);else break;se=n(y)}}function oe(Y){if(V=!1,re(Y),!O)if(n(g)!==null)O=!0,ue||(ue=!0,F());else{var se=n(y);se!==null&&Ee(oe,se.startTime-Y)}}var ue=!1,C=-1,A=5,R=-1;function z(){return k?!0:!(i.unstable_now()-R<A)}function M(){if(k=!1,ue){var Y=i.unstable_now();R=Y;var se=!0;try{e:{O=!1,V&&(V=!1,Q(C),C=-1),N=!0;var le=E;try{t:{for(re(Y),x=n(g);x!==null&&!(x.expirationTime>Y&&z());){var Se=x.callback;if(typeof Se=="function"){x.callback=null,E=x.priorityLevel;var je=Se(x.expirationTime<=Y);if(Y=i.unstable_now(),typeof je=="function"){x.callback=je,re(Y),se=!0;break t}x===n(g)&&r(g),re(Y)}else r(g);x=n(g)}if(x!==null)se=!0;else{var j=n(y);j!==null&&Ee(oe,j.startTime-Y),se=!1}}break e}finally{x=null,E=le,N=!1}se=void 0}}finally{se?F():ue=!1}}}var F;if(typeof W=="function")F=function(){W(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,pe=I.port2;I.port1.onmessage=M,F=function(){pe.postMessage(null)}}else F=function(){U(M,0)};function Ee(Y,se){C=U(function(){Y(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(Y){switch(E){case 1:case 2:case 3:var se=3;break;default:se=E}var le=E;E=se;try{return Y()}finally{E=le}},i.unstable_requestPaint=function(){k=!0},i.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var le=E;E=Y;try{return se()}finally{E=le}},i.unstable_scheduleCallback=function(Y,se,le){var Se=i.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Se+le:Se):le=Se,Y){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=le+je,Y={id:b++,callback:se,priorityLevel:Y,startTime:le,expirationTime:je,sortIndex:-1},le>Se?(Y.sortIndex=le,e(y,Y),n(g)===null&&Y===n(y)&&(V?(Q(C),C=-1):V=!0,Ee(oe,le-Se))):(Y.sortIndex=je,e(g,Y),O||N||(O=!0,ue||(ue=!0,F()))),Y},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(Y){var se=E;return function(){var le=E;E=se;try{return Y.apply(this,arguments)}finally{E=le}}}})(Qm)),Qm}var C_;function h1(){return C_||(C_=1,Gm.exports=u1()),Gm.exports}var Km={exports:{}},Wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function d1(){if(I_)return Wt;I_=1;var i=Hp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:y,implementation:b}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wt.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,b)},Wt.flushSync=function(g){var y=u.T,b=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=y,r.p=b,r.d.f()}},Wt.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Wt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Wt.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,x=p(b,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,N=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:N}):b==="script"&&r.d.X(g,{crossOrigin:x,integrity:E,fetchPriority:N,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Wt.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Wt.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,x=p(b,y.crossOrigin);r.d.L(g,b,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Wt.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Wt.requestFormReset=function(g){r.d.r(g)},Wt.unstable_batchedUpdates=function(g,y){return g(y)},Wt.useFormState=function(g,y,b){return u.H.useFormState(g,y,b)},Wt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Wt.version="19.2.0",Wt}var D_;function f1(){if(D_)return Km.exports;D_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Km.exports=d1(),Km.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function m1(){if(j_)return Gl;j_=1;var i=h1(),e=Hp(),n=f1();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(r(188))}function y(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return g(d),t;if(m===l)return g(d),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=m;else{for(var _=!1,T=d.child;T;){if(T===a){_=!0,a=d,l=m;break}if(T===l){_=!0,l=d,a=m;break}T=T.sibling}if(!_){for(T=m.child;T;){if(T===a){_=!0,a=m,l=d;break}if(T===l){_=!0,l=m,a=d;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),W=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function pe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case U:return"Profiler";case k:return"StrictMode";case oe:return"Suspense";case ue:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case W:return t.displayName||"Context";case Q:return(t._context.displayName||"Context")+".Consumer";case re:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return s=t.displayName||null,s!==null?s:pe(t.type)||"Memo";case A:s=t._payload,t=t._init;try{return pe(t(s))}catch{}}return null}var Ee=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Se=[],je=-1;function j(t){return{current:t}}function J(t){0>je||(t.current=Se[je],Se[je]=null,je--)}function ce(t,s){je++,Se[je]=t.current,t.current=s}var he=j(null),be=j(null),Ae=j(null),Fe=j(null);function Ot(t,s){switch(ce(Ae,s),ce(be,t),ce(he,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?K0(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=K0(s),t=Y0(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(he),ce(he,t)}function ot(){J(he),J(be),J(Ae)}function Dr(t){t.memoizedState!==null&&ce(Fe,t);var s=he.current,a=Y0(s,t.type);s!==a&&(ce(be,t),ce(he,a))}function Ta(t){be.current===t&&(J(he),J(be)),Fe.current===t&&(J(Fe),zl._currentValue=le)}var Sa,Aa;function mi(t){if(Sa===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Sa=s&&s[1]||"",Aa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sa+t+Aa}var zo=!1;function jr(t,s){if(!t||zo)return"";zo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var K=X}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(X){K=X}t.call(ne.prototype)}}else{try{throw Error()}catch(X){K=X}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],T=m[1];if(_&&T){var D=_.split(`
`),G=T.split(`
`);for(d=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(l===D.length||d===G.length)for(l=D.length-1,d=G.length-1;1<=l&&0<=d&&D[l]!==G[d];)d--;for(;1<=l&&0<=d;l--,d--)if(D[l]!==G[d]){if(l!==1||d!==1)do if(l--,d--,0>d||D[l]!==G[d]){var Z=`
`+D[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=d);break}}}finally{zo=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?mi(a):""}function Bo(t,s){switch(t.tag){case 26:case 27:case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return t.child!==s&&s!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return jr(t.type,!1);case 11:return jr(t.type.render,!1);case 1:return jr(t.type,!0);case 31:return mi("Activity");default:return""}}function Fo(t){try{var s="",a=null;do s+=Bo(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var bt=Object.prototype.hasOwnProperty,Mt=i.unstable_scheduleCallback,Cs=i.unstable_cancelCallback,qd=i.unstable_shouldYield,Vc=i.unstable_requestPaint,nn=i.unstable_now,Or=i.unstable_getCurrentPriorityLevel,qo=i.unstable_ImmediatePriority,Ho=i.unstable_UserBlockingPriority,Is=i.unstable_NormalPriority,Hd=i.unstable_LowPriority,Lc=i.unstable_IdlePriority,Uc=i.log,zc=i.unstable_setDisableYieldValue,$n=null,Ft=null;function Cn(t){if(typeof Uc=="function"&&zc(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode($n,t)}catch{}}var pt=Math.clz32?Math.clz32:Fc,Bc=Math.log,Na=Math.LN2;function Fc(t){return t>>>=0,t===0?32:31-(Bc(t)/Na|0)|0}var pi=256,Mr=262144,xt=4194304;function gi(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function yi(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~m,l!==0?d=gi(l):(_&=T,_!==0?d=gi(_):a||(a=T&~t,a!==0&&(d=gi(a))))):(T=l&~m,T!==0?d=gi(T):_!==0?d=gi(_):a||(a=l&~t,a!==0&&(d=gi(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function Xn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Gd(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var t=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),t}function vi(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Pr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Qd(t,s,a,l,d,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,G=t.hiddenUpdates;for(a=_&~a;0<a;){var Z=31-pt(a),ne=1<<Z;T[Z]=0,D[Z]=-1;var K=G[Z];if(K!==null)for(G[Z]=null,Z=0;Z<K.length;Z++){var X=K[Z];X!==null&&(X.lane&=-536870913)}a&=~ne}l!==0&&kr(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function kr(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-pt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Go(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-pt(a),d=1<<l;d&s|t[l]&s&&(t[l]|=s),a&=~d}}function Qo(t,s){var a=s&-s;return a=(a&42)!==0?1:Vr(a),(a&(t.suspendedLanes|s))!==0?0:a}function Vr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Xi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Hc(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:y_(t.type))}function Wn(t,s){var a=se.p;try{return se.p=t,s()}finally{se.p=a}}var Jn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Jn,Lt="__reactProps$"+Jn,_i="__reactContainer$"+Jn,Ra="__reactEvents$"+Jn,Kd="__reactListeners$"+Jn,Gc="__reactHandles$"+Jn,Qc="__reactResources$"+Jn,bi="__reactMarker$"+Jn;function Ca(t){delete t[wt],delete t[Lt],delete t[Ra],delete t[Kd],delete t[Gc]}function xi(t){var s=t[wt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[_i]||a[wt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=t_(t);t!==null;){if(a=t[wt])return a;t=t_(t)}return s}t=a,a=t.parentNode}return null}function In(t){if(t=t[wt]||t[_i]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function _n(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function wi(t){var s=t[Qc];return s||(s=t[Qc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(t){t[bi]=!0}var Ko=new Set,Yo={};function Ei(t,s){Ti(t,s),Ti(t+"Capture",s)}function Ti(t,s){for(Yo[t]=s,t=0;t<s.length;t++)Ko.add(s[t])}var $o=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},Wo={};function Kc(t){return bt.call(Wo,t)?!0:bt.call(Xo,t)?!1:$o.test(t)?Wo[t]=!0:(Xo[t]=!0,!1)}function Ia(t,s,a){if(Kc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function bn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Tt(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function Ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ds(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Jo(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function $e(t){if(!t._valueTracker){var s=Ds(t)?"checked":"value";t._valueTracker=Jo(t,s,""+t[s])}}function Lr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Ds(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Si(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ur=/[\n"\\]/g;function ln(t){return t.replace(Ur,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Da(t,s,a,l,d,m,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Ut(s)):t.value!==""+Ut(s)&&(t.value=""+Ut(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?Zo(t,_,Ut(s)):a!=null?Zo(t,_,Ut(a)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ut(T):t.removeAttribute("name")}function Yc(t,s,a,l,d,m,_,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){$e(t);return}a=a!=null?""+Ut(a):"",s=s!=null?""+Ut(s):a,T||s===t.value||(t.value=s),t.defaultValue=s}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),$e(t)}function Zo(t,s,a){s==="number"&&Si(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function js(t,s,a,l){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ut(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function $c(t,s,a){if(s!=null&&(s=""+Ut(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Ut(a):""}function Os(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ee(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Ut(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),$e(t)}function cn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function el(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||Xc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function tl(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in s)l=s[d],s.hasOwnProperty(d)&&a[d]!==l&&el(t,d,l)}else for(var m in s)s.hasOwnProperty(m)&&el(t,m,s[m])}function ja(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ms=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oa(t){return Ms.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Zn(){}var nl=null;function Dn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ps=null,Ai=null;function zr(t){var s=In(t);if(s&&(t=s.stateNode)){var a=t[Lt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Da(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ln(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var d=l[Lt]||null;if(!d)throw Error(r(90));Da(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Lr(l)}break e;case"textarea":$c(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&js(t,!!a.multiple,s,!1)}}}var Ma=!1;function ks(t,s,a){if(Ma)return t(s,a);Ma=!0;try{var l=t(s);return l}finally{if(Ma=!1,(Ps!==null||Ai!==null)&&(Hu(),Ps&&(s=Ps,t=Ai,Ai=Ps=null,zr(s),t)))for(s=0;s<t.length;s++)zr(t[s])}}function ei(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Lt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(jn)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Br=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Br=!1}var Ni=null,il=null,Fr=null;function sl(){if(Fr)return Fr;var t,s=il,a=s.length,l,d="value"in Ni?Ni.value:Ni.textContent,m=d.length;for(t=0;t<a&&s[t]===d[t];t++);var _=a-t;for(l=1;l<=_&&s[a-l]===d[m-l];l++);return Fr=d.slice(t,1<l?1-l:void 0)}function qr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Wi(){return!0}function ti(){return!1}function qt(t){function s(a,l,d,m,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Wi:ti,this.isPropagationStopped=ti,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),s}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=qt(Ji),Vs=x({},Ji,{view:0,detail:0}),rl=qt(Vs),Ls,Pa,Ci,ka=x({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Ls=t.screenX-Ci.screenX,Pa=t.screenY-Ci.screenY):Pa=Ls=0,Ci=t),Ls)},movementY:function(t){return"movementY"in t?t.movementY:Pa}}),al=qt(ka),Hr=x({},ka,{dataTransfer:0}),Jc=qt(Hr),Zc=x({},Vs,{relatedTarget:0}),Gr=qt(Zc),ol=x({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=qt(ol),Va=x({},Ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tu=qt(Va),nu=x({},Ji,{data:0}),Ii=qt(nu),iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function au(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=ru[t])?!!s[t]:!1}function Us(){return au}var sn=x({},Vs,{key:function(t){if(t.key){var s=iu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=qr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?su[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(t){return t.type==="keypress"?qr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ou=qt(sn),lu=x({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=qt(lu),h=x({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),v=qt(h),w=x({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=qt(w),q=x({},ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=qt(q),ae=x({},Ji,{newState:0,oldState:0}),Ce=qt(ae),gt=[9,13,27,32],Qe=jn&&"CompositionEvent"in window,lt=null;jn&&"documentMode"in document&&(lt=document.documentMode);var On=jn&&"TextEvent"in window&&!lt,Di=jn&&(!Qe||lt&&8<lt&&11>=lt),ni=" ",ii=!1;function Qr(t,s){switch(t){case"keyup":return gt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function DT(t,s){switch(t){case"compositionend":return La(s);case"keypress":return s.which!==32?null:(ii=!0,ni);case"textInput":return t=s.data,t===ni&&ii?null:t;default:return null}}function jT(t,s){if(Ua)return t==="compositionend"||!Qe&&Qr(t,s)?(t=sl(),Fr=il=Ni=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Di&&s.locale!=="ko"?null:s.data;default:return null}}var OT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sy(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!OT[t.type]:s==="textarea"}function ry(t,s,a,l){Ps?Ai?Ai.push(l):Ai=[l]:Ps=l,s=Wu(s,"onChange"),0<s.length&&(a=new Ri("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var ll=null,cl=null;function MT(t){B0(t,0)}function cu(t){var s=_n(t);if(Lr(s))return t}function ay(t,s){if(t==="change")return s}var oy=!1;if(jn){var Yd;if(jn){var $d="oninput"in document;if(!$d){var ly=document.createElement("div");ly.setAttribute("oninput","return;"),$d=typeof ly.oninput=="function"}Yd=$d}else Yd=!1;oy=Yd&&(!document.documentMode||9<document.documentMode)}function cy(){ll&&(ll.detachEvent("onpropertychange",uy),cl=ll=null)}function uy(t){if(t.propertyName==="value"&&cu(cl)){var s=[];ry(s,cl,t,Dn(t)),ks(MT,s)}}function PT(t,s,a){t==="focusin"?(cy(),ll=s,cl=a,ll.attachEvent("onpropertychange",uy)):t==="focusout"&&cy()}function kT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(cl)}function VT(t,s){if(t==="click")return cu(s)}function LT(t,s){if(t==="input"||t==="change")return cu(s)}function UT(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var xn=typeof Object.is=="function"?Object.is:UT;function ul(t,s){if(xn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!bt.call(s,d)||!xn(t[d],s[d]))return!1}return!0}function hy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dy(t,s){var a=hy(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=hy(a)}}function fy(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?fy(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function my(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Si(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Si(t.document)}return s}function Xd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var zT=jn&&"documentMode"in document&&11>=document.documentMode,za=null,Wd=null,hl=null,Jd=!1;function py(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jd||za==null||za!==Si(l)||(l=za,"selectionStart"in l&&Xd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),hl&&ul(hl,l)||(hl=l,l=Wu(Wd,"onSelect"),0<l.length&&(s=new Ri("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=za)))}function Kr(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ba={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},Zd={},gy={};jn&&(gy=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Yr(t){if(Zd[t])return Zd[t];if(!Ba[t])return t;var s=Ba[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in gy)return Zd[t]=s[a];return t}var yy=Yr("animationend"),vy=Yr("animationiteration"),_y=Yr("animationstart"),BT=Yr("transitionrun"),FT=Yr("transitionstart"),qT=Yr("transitioncancel"),by=Yr("transitionend"),xy=new Map,ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ef.push("scrollEnd");function si(t,s){xy.set(t,s),Ei(s,[t])}var uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Mn=[],Fa=0,tf=0;function hu(){for(var t=Fa,s=tf=Fa=0;s<t;){var a=Mn[s];Mn[s++]=null;var l=Mn[s];Mn[s++]=null;var d=Mn[s];Mn[s++]=null;var m=Mn[s];if(Mn[s++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}m!==0&&wy(a,d,m)}}function du(t,s,a,l){Mn[Fa++]=t,Mn[Fa++]=s,Mn[Fa++]=a,Mn[Fa++]=l,tf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function nf(t,s,a,l){return du(t,s,a,l),fu(t)}function $r(t,s){return du(t,null,null,s),fu(t)}function wy(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&s!==null&&(d=31-pt(a),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[s]:l.push(s),s.lane=a|536870912),m):null}function fu(t){if(50<Ol)throw Ol=0,dm=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var qa={};function HT(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,s,a,l){return new HT(t,s,a,l)}function sf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function es(t,s){var a=t.alternate;return a===null?(a=wn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ey(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function mu(t,s,a,l,d,m){var _=0;if(l=t,typeof t=="function")sf(t)&&(_=1);else if(typeof t=="string")_=$S(t,a,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=wn(31,a,s,d),t.elementType=R,t.lanes=m,t;case V:return Xr(a.children,d,m,s);case k:_=8,d|=24;break;case U:return t=wn(12,a,s,d|2),t.elementType=U,t.lanes=m,t;case oe:return t=wn(13,a,s,d),t.elementType=oe,t.lanes=m,t;case ue:return t=wn(19,a,s,d),t.elementType=ue,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:_=10;break e;case Q:_=9;break e;case re:_=11;break e;case C:_=14;break e;case A:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=wn(_,a,s,d),s.elementType=t,s.type=l,s.lanes=m,s}function Xr(t,s,a,l){return t=wn(7,t,l,s),t.lanes=a,t}function rf(t,s,a){return t=wn(6,t,null,s),t.lanes=a,t}function Ty(t){var s=wn(18,null,null,0);return s.stateNode=t,s}function af(t,s,a){return s=wn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Sy=new WeakMap;function Pn(t,s){if(typeof t=="object"&&t!==null){var a=Sy.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Fo(s)},Sy.set(t,s),s)}return{value:t,source:s,stack:Fo(s)}}var Ha=[],Ga=0,pu=null,dl=0,kn=[],Vn=0,zs=null,ji=1,Oi="";function ts(t,s){Ha[Ga++]=dl,Ha[Ga++]=pu,pu=t,dl=s}function Ay(t,s,a){kn[Vn++]=ji,kn[Vn++]=Oi,kn[Vn++]=zs,zs=t;var l=ji;t=Oi;var d=32-pt(l)-1;l&=~(1<<d),a+=1;var m=32-pt(s)+d;if(30<m){var _=d-d%5;m=(l&(1<<_)-1).toString(32),l>>=_,d-=_,ji=1<<32-pt(s)+d|a<<d|l,Oi=m+t}else ji=1<<m|a<<d|l,Oi=t}function of(t){t.return!==null&&(ts(t,1),Ay(t,1,0))}function lf(t){for(;t===pu;)pu=Ha[--Ga],Ha[Ga]=null,dl=Ha[--Ga],Ha[Ga]=null;for(;t===zs;)zs=kn[--Vn],kn[Vn]=null,Oi=kn[--Vn],kn[Vn]=null,ji=kn[--Vn],kn[Vn]=null}function Ny(t,s){kn[Vn++]=ji,kn[Vn++]=Oi,kn[Vn++]=zs,ji=s.id,Oi=s.overflow,zs=t}var Ht=null,st=null,Be=!1,Bs=null,Ln=!1,cf=Error(r(519));function Fs(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(Pn(s,t)),cf}function Ry(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[wt]=t,s[Lt]=l,a){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(a=0;a<Pl.length;a++)Me(Pl[a],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),Yc(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),Os(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||G0(s.textContent,a)?(l.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),l.onScroll!=null&&Me("scroll",s),l.onScrollEnd!=null&&Me("scrollend",s),l.onClick!=null&&(s.onclick=Zn),s=!0):s=!1,s||Fs(t,!0)}function Cy(t){for(Ht=t.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Ht=Ht.return}}function Qa(t){if(t!==Ht)return!1;if(!Be)return Cy(t),Be=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Nm(t.type,t.memoizedProps)),a=!a),a&&st&&Fs(t),Cy(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));st=e_(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));st=e_(t)}else s===27?(s=st,nr(t.type)?(t=jm,jm=null,st=t):st=s):st=Ht?zn(t.stateNode.nextSibling):null;return!0}function Wr(){st=Ht=null,Be=!1}function uf(){var t=Bs;return t!==null&&(fn===null?fn=t:fn.push.apply(fn,t),Bs=null),t}function fl(t){Bs===null?Bs=[t]:Bs.push(t)}var hf=j(null),Jr=null,ns=null;function qs(t,s,a){ce(hf,s._currentValue),s._currentValue=a}function is(t){t._currentValue=hf.current,J(hf)}function df(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function ff(t,s,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=d;for(var D=0;D<s.length;D++)if(T.context===s[D]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),df(m.return,a,t),l||(_=null);break e}m=T.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),df(_,a,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ka(t,s,a,l){t=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=d.type;xn(d.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(d===Fe.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(zl):t=[zl])}d=d.return}t!==null&&ff(s,t,a,l),s.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zr(t){Jr=t,ns=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return Iy(Jr,t)}function yu(t,s){return Jr===null&&Zr(t),Iy(t,s)}function Iy(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ns===null){if(t===null)throw Error(r(308));ns=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ns=ns.next=s;return a}var GT=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},QT=i.unstable_scheduleCallback,KT=i.unstable_NormalPriority,St={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mf(){return{controller:new GT,data:new Map,refCount:0}}function ml(t){t.refCount--,t.refCount===0&&QT(KT,function(){t.controller.abort()})}var pl=null,pf=0,Ya=0,$a=null;function YT(t,s){if(pl===null){var a=pl=[];pf=0,Ya=vm(),$a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return pf++,s.then(Dy,Dy),s}function Dy(){if(--pf===0&&pl!==null){$a!==null&&($a.status="fulfilled");var t=pl;pl=null,Ya=0,$a=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function $T(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var jy=Y.S;Y.S=function(t,s){p0=nn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&YT(t,s),jy!==null&&jy(t,s)};var ea=j(null);function gf(){var t=ea.current;return t!==null?t:nt.pooledCache}function vu(t,s){s===null?ce(ea,ea.current):ce(ea,s.pool)}function Oy(){var t=gf();return t===null?null:{parent:St._currentValue,pool:t}}var Xa=Error(r(460)),yf=Error(r(474)),_u=Error(r(542)),bu={then:function(){}};function My(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Py(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Zn,Zn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vy(t),t;default:if(typeof s.status=="string")s.then(Zn,Zn);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=l}},function(l){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vy(t),t}throw na=s,Xa}}function ta(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(na=a,Xa):a}}var na=null;function ky(){if(na===null)throw Error(r(459));var t=na;return na=null,t}function Vy(t){if(t===Xa||t===_u)throw Error(r(483))}var Wa=null,gl=0;function xu(t){var s=gl;return gl+=1,Wa===null&&(Wa=[]),Py(Wa,t,s)}function yl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function wu(t,s){throw s.$$typeof===E?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ly(t){function s(B,L){if(t){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!t)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function l(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function d(B,L){return B=es(B,L),B.index=0,B.sibling=null,B}function m(B,L,H){return B.index=H,t?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function T(B,L,H,ee){return L===null||L.tag!==6?(L=rf(H,B.mode,ee),L.return=B,L):(L=d(L,H),L.return=B,L)}function D(B,L,H,ee){var ye=H.type;return ye===V?Z(B,L,H.props.children,ee,H.key):L!==null&&(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===A&&ta(ye)===L.type)?(L=d(L,H.props),yl(L,H),L.return=B,L):(L=mu(H.type,H.key,H.props,null,B.mode,ee),yl(L,H),L.return=B,L)}function G(B,L,H,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=af(H,B.mode,ee),L.return=B,L):(L=d(L,H.children||[]),L.return=B,L)}function Z(B,L,H,ee,ye){return L===null||L.tag!==7?(L=Xr(H,B.mode,ee,ye),L.return=B,L):(L=d(L,H),L.return=B,L)}function ne(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=rf(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case N:return H=mu(L.type,L.key,L.props,null,B.mode,H),yl(H,L),H.return=B,H;case O:return L=af(L,B.mode,H),L.return=B,L;case A:return L=ta(L),ne(B,L,H)}if(Ee(L)||F(L))return L=Xr(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return ne(B,xu(L),H);if(L.$$typeof===W)return ne(B,yu(B,L),H);wu(B,L)}return null}function K(B,L,H,ee){var ye=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ye!==null?null:T(B,L,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case N:return H.key===ye?D(B,L,H,ee):null;case O:return H.key===ye?G(B,L,H,ee):null;case A:return H=ta(H),K(B,L,H,ee)}if(Ee(H)||F(H))return ye!==null?null:Z(B,L,H,ee,null);if(typeof H.then=="function")return K(B,L,xu(H),ee);if(H.$$typeof===W)return K(B,L,yu(B,H),ee);wu(B,H)}return null}function X(B,L,H,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(H)||null,T(L,B,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case N:return B=B.get(ee.key===null?H:ee.key)||null,D(L,B,ee,ye);case O:return B=B.get(ee.key===null?H:ee.key)||null,G(L,B,ee,ye);case A:return ee=ta(ee),X(B,L,H,ee,ye)}if(Ee(ee)||F(ee))return B=B.get(H)||null,Z(L,B,ee,ye,null);if(typeof ee.then=="function")return X(B,L,H,xu(ee),ye);if(ee.$$typeof===W)return X(B,L,H,yu(L,ee),ye);wu(L,ee)}return null}function me(B,L,H,ee){for(var ye=null,He=null,ge=L,De=L=0,ke=null;ge!==null&&De<H.length;De++){ge.index>De?(ke=ge,ge=null):ke=ge.sibling;var Ge=K(B,ge,H[De],ee);if(Ge===null){ge===null&&(ge=ke);break}t&&ge&&Ge.alternate===null&&s(B,ge),L=m(Ge,L,De),He===null?ye=Ge:He.sibling=Ge,He=Ge,ge=ke}if(De===H.length)return a(B,ge),Be&&ts(B,De),ye;if(ge===null){for(;De<H.length;De++)ge=ne(B,H[De],ee),ge!==null&&(L=m(ge,L,De),He===null?ye=ge:He.sibling=ge,He=ge);return Be&&ts(B,De),ye}for(ge=l(ge);De<H.length;De++)ke=X(ge,B,De,H[De],ee),ke!==null&&(t&&ke.alternate!==null&&ge.delete(ke.key===null?De:ke.key),L=m(ke,L,De),He===null?ye=ke:He.sibling=ke,He=ke);return t&&ge.forEach(function(or){return s(B,or)}),Be&&ts(B,De),ye}function _e(B,L,H,ee){if(H==null)throw Error(r(151));for(var ye=null,He=null,ge=L,De=L=0,ke=null,Ge=H.next();ge!==null&&!Ge.done;De++,Ge=H.next()){ge.index>De?(ke=ge,ge=null):ke=ge.sibling;var or=K(B,ge,Ge.value,ee);if(or===null){ge===null&&(ge=ke);break}t&&ge&&or.alternate===null&&s(B,ge),L=m(or,L,De),He===null?ye=or:He.sibling=or,He=or,ge=ke}if(Ge.done)return a(B,ge),Be&&ts(B,De),ye;if(ge===null){for(;!Ge.done;De++,Ge=H.next())Ge=ne(B,Ge.value,ee),Ge!==null&&(L=m(Ge,L,De),He===null?ye=Ge:He.sibling=Ge,He=Ge);return Be&&ts(B,De),ye}for(ge=l(ge);!Ge.done;De++,Ge=H.next())Ge=X(ge,B,De,Ge.value,ee),Ge!==null&&(t&&Ge.alternate!==null&&ge.delete(Ge.key===null?De:Ge.key),L=m(Ge,L,De),He===null?ye=Ge:He.sibling=Ge,He=Ge);return t&&ge.forEach(function(a1){return s(B,a1)}),Be&&ts(B,De),ye}function tt(B,L,H,ee){if(typeof H=="object"&&H!==null&&H.type===V&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case N:e:{for(var ye=H.key;L!==null;){if(L.key===ye){if(ye=H.type,ye===V){if(L.tag===7){a(B,L.sibling),ee=d(L,H.props.children),ee.return=B,B=ee;break e}}else if(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===A&&ta(ye)===L.type){a(B,L.sibling),ee=d(L,H.props),yl(ee,H),ee.return=B,B=ee;break e}a(B,L);break}else s(B,L);L=L.sibling}H.type===V?(ee=Xr(H.props.children,B.mode,ee,H.key),ee.return=B,B=ee):(ee=mu(H.type,H.key,H.props,null,B.mode,ee),yl(ee,H),ee.return=B,B=ee)}return _(B);case O:e:{for(ye=H.key;L!==null;){if(L.key===ye)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),ee=d(L,H.children||[]),ee.return=B,B=ee;break e}else{a(B,L);break}else s(B,L);L=L.sibling}ee=af(H,B.mode,ee),ee.return=B,B=ee}return _(B);case A:return H=ta(H),tt(B,L,H,ee)}if(Ee(H))return me(B,L,H,ee);if(F(H)){if(ye=F(H),typeof ye!="function")throw Error(r(150));return H=ye.call(H),_e(B,L,H,ee)}if(typeof H.then=="function")return tt(B,L,xu(H),ee);if(H.$$typeof===W)return tt(B,L,yu(B,H),ee);wu(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),ee=d(L,H),ee.return=B,B=ee):(a(B,L),ee=rf(H,B.mode,ee),ee.return=B,B=ee),_(B)):a(B,L)}return function(B,L,H,ee){try{gl=0;var ye=tt(B,L,H,ee);return Wa=null,ye}catch(ge){if(ge===Xa||ge===_u)throw ge;var He=wn(29,ge,null,B.mode);return He.lanes=ee,He.return=B,He}finally{}}}var ia=Ly(!0),Uy=Ly(!1),Hs=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _f(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Gs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Qs(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var d=l.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),l.pending=s,s=fu(t),wy(t,null,a),s}return du(t,l,s,a),fu(t)}function vl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Go(t,a)}}function bf(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var xf=!1;function _l(){if(xf){var t=$a;if(t!==null)throw t}}function bl(t,s,a,l){xf=!1;var d=t.updateQueue;Hs=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var D=T,G=D.next;D.next=null,_===null?m=G:_.next=G,_=D;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==_&&(T===null?Z.firstBaseUpdate=G:T.next=G,Z.lastBaseUpdate=D))}if(m!==null){var ne=d.baseState;_=0,Z=G=D=null,T=m;do{var K=T.lane&-536870913,X=K!==T.lane;if(X?(Pe&K)===K:(l&K)===K){K!==0&&K===Ya&&(xf=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var me=t,_e=T;K=s;var tt=a;switch(_e.tag){case 1:if(me=_e.payload,typeof me=="function"){ne=me.call(tt,ne,K);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=_e.payload,K=typeof me=="function"?me.call(tt,ne,K):me,K==null)break e;ne=x({},ne,K);break e;case 2:Hs=!0}}K=T.callback,K!==null&&(t.flags|=64,X&&(t.flags|=8192),X=d.callbacks,X===null?d.callbacks=[K]:X.push(K))}else X={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(G=Z=X,D=ne):Z=Z.next=X,_|=K;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;X=T,T=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);Z===null&&(D=ne),d.baseState=D,d.firstBaseUpdate=G,d.lastBaseUpdate=Z,m===null&&(d.shared.lanes=0),Ws|=_,t.lanes=_,t.memoizedState=ne}}function zy(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function By(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)zy(a[t],s)}var Ja=j(null),Eu=j(0);function Fy(t,s){t=ds,ce(Eu,t),ce(Ja,s),ds=t|s.baseLanes}function wf(){ce(Eu,ds),ce(Ja,Ja.current)}function Ef(){ds=Eu.current,J(Ja),J(Eu)}var En=j(null),Un=null;function Ks(t){var s=t.alternate;ce(yt,yt.current&1),ce(En,t),Un===null&&(s===null||Ja.current!==null||s.memoizedState!==null)&&(Un=t)}function Tf(t){ce(yt,yt.current),ce(En,t),Un===null&&(Un=t)}function qy(t){t.tag===22?(ce(yt,yt.current),ce(En,t),Un===null&&(Un=t)):Ys()}function Ys(){ce(yt,yt.current),ce(En,En.current)}function Tn(t){J(En),Un===t&&(Un=null),J(yt)}var yt=j(0);function Tu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Im(a)||Dm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ss=0,Ie=null,Ze=null,At=null,Su=!1,Za=!1,sa=!1,Au=0,xl=0,eo=null,XT=0;function dt(){throw Error(r(321))}function Sf(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!xn(t[a],s[a]))return!1;return!0}function Af(t,s,a,l,d,m){return ss=m,Ie=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=t===null||t.memoizedState===null?Av:Bf,sa=!1,m=a(l,d),sa=!1,Za&&(m=Gy(s,a,l,d)),Hy(t),m}function Hy(t){Y.H=Tl;var s=Ze!==null&&Ze.next!==null;if(ss=0,At=Ze=Ie=null,Su=!1,xl=0,eo=null,s)throw Error(r(300));t===null||Nt||(t=t.dependencies,t!==null&&gu(t)&&(Nt=!0))}function Gy(t,s,a,l){Ie=t;var d=0;do{if(Za&&(eo=null),xl=0,Za=!1,25<=d)throw Error(r(301));if(d+=1,At=Ze=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=Nv,m=s(a,l)}while(Za);return m}function WT(){var t=Y.H,s=t.useState()[0];return s=typeof s.then=="function"?wl(s):s,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Ie.flags|=1024),s}function Nf(){var t=Au!==0;return Au=0,t}function Rf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Cf(t){if(Su){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Su=!1}ss=0,At=Ze=Ie=null,Za=!1,xl=Au=0,eo=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ie.memoizedState=At=t:At=At.next=t,At}function vt(){if(Ze===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var s=At===null?Ie.memoizedState:At.next;if(s!==null)At=s,Ze=t;else{if(t===null)throw Ie.alternate===null?Error(r(467)):Error(r(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},At===null?Ie.memoizedState=At=t:At=At.next=t}return At}function Nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var s=xl;return xl+=1,eo===null&&(eo=[]),t=Py(eo,t,s),s=Ie,(At===null?s.memoizedState:At.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?Av:Bf),t}function Ru(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===W)return Gt(t)}throw Error(r(438,String(t)))}function If(t){var s=null,a=Ie.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Nu(),Ie.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=z;return s.index++,a}function rs(t,s){return typeof s=="function"?s(t):s}function Cu(t){var s=vt();return Df(s,Ze,t)}function Df(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}s.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{s=d.next;var T=_=null,D=null,G=s,Z=!1;do{var ne=G.lane&-536870913;if(ne!==G.lane?(Pe&ne)===ne:(ss&ne)===ne){var K=G.revertLane;if(K===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ne===Ya&&(Z=!0);else if((ss&K)===K){G=G.next,K===Ya&&(Z=!0);continue}else ne={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=ne,_=m):D=D.next=ne,Ie.lanes|=K,Ws|=K;ne=G.action,sa&&a(m,ne),m=G.hasEagerState?G.eagerState:a(m,ne)}else K={lane:ne,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=K,_=m):D=D.next=K,Ie.lanes|=ne,Ws|=ne;G=G.next}while(G!==null&&G!==s);if(D===null?_=m:D.next=T,!xn(m,t.memoizedState)&&(Nt=!0,Z&&(a=$a,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=D,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function jf(t){var s=vt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=t(m,_.action),_=_.next;while(_!==d);xn(m,s.memoizedState)||(Nt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Qy(t,s,a){var l=Ie,d=vt(),m=Be;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!xn((Ze||d).memoizedState,a);if(_&&(d.memoizedState=a,Nt=!0),d=d.queue,Pf($y.bind(null,l,d,t),[t]),d.getSnapshot!==s||_||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,to(9,{destroy:void 0},Yy.bind(null,l,d,a,s),null),nt===null)throw Error(r(349));m||(ss&127)!==0||Ky(l,s,a)}return a}function Ky(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ie.updateQueue,s===null?(s=Nu(),Ie.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Yy(t,s,a,l){s.value=a,s.getSnapshot=l,Xy(s)&&Wy(t)}function $y(t,s,a){return a(function(){Xy(s)&&Wy(t)})}function Xy(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!xn(t,a)}catch{return!0}}function Wy(t){var s=$r(t,2);s!==null&&mn(s,t,2)}function Of(t){var s=rn();if(typeof t=="function"){var a=t;if(t=a(),sa){Cn(!0);try{a()}finally{Cn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:t},s}function Jy(t,s,a,l){return t.baseState=a,Df(t,Ze,typeof l=="function"?l:rs)}function JT(t,s,a,l,d){if(ju(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Y.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,Zy(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Zy(t,s){var a=s.action,l=s.payload,d=t.state;if(s.isTransition){var m=Y.T,_={};Y.T=_;try{var T=a(d,l),D=Y.S;D!==null&&D(_,T),ev(t,s,T)}catch(G){Mf(t,s,G)}finally{m!==null&&_.types!==null&&(m.types=_.types),Y.T=m}}else try{m=a(d,l),ev(t,s,m)}catch(G){Mf(t,s,G)}}function ev(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){tv(t,s,l)},function(l){return Mf(t,s,l)}):tv(t,s,a)}function tv(t,s,a){s.status="fulfilled",s.value=a,nv(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Zy(t,a)))}function Mf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,nv(s),s=s.next;while(s!==l)}t.action=null}function nv(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function iv(t,s){return s}function sv(t,s){if(Be){var a=nt.formState;if(a!==null){e:{var l=Ie;if(Be){if(st){t:{for(var d=st,m=Ln;d.nodeType!==8;){if(!m){d=null;break t}if(d=zn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){st=zn(d.nextSibling),l=d.data==="F!";break e}}Fs(l)}l=!1}l&&(s=a[0])}}return a=rn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iv,lastRenderedState:s},a.queue=l,a=Ev.bind(null,Ie,l),l.dispatch=a,l=Of(!1),m=zf.bind(null,Ie,!1,l.queue),l=rn(),d={state:s,dispatch:null,action:t,pending:null},l.queue=d,a=JT.bind(null,Ie,d,m,a),d.dispatch=a,l.memoizedState=t,[s,a,!1]}function rv(t){var s=vt();return av(s,Ze,t)}function av(t,s,a){if(s=Df(t,s,iv)[0],t=Cu(rs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=wl(s)}catch(_){throw _===Xa?_u:_}else l=s;s=vt();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(Ie.flags|=2048,to(9,{destroy:void 0},ZT.bind(null,d,a),null)),[l,m,t]}function ZT(t,s){t.action=s}function ov(t){var s=vt(),a=Ze;if(a!==null)return av(s,a,t);vt(),s=s.memoizedState,a=vt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function to(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Ie.updateQueue,s===null&&(s=Nu(),Ie.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function lv(){return vt().memoizedState}function Iu(t,s,a,l){var d=rn();Ie.flags|=t,d.memoizedState=to(1|s,{destroy:void 0},a,l===void 0?null:l)}function Du(t,s,a,l){var d=vt();l=l===void 0?null:l;var m=d.memoizedState.inst;Ze!==null&&l!==null&&Sf(l,Ze.memoizedState.deps)?d.memoizedState=to(s,m,a,l):(Ie.flags|=t,d.memoizedState=to(1|s,m,a,l))}function cv(t,s){Iu(8390656,8,t,s)}function Pf(t,s){Du(2048,8,t,s)}function eS(t){Ie.flags|=4;var s=Ie.updateQueue;if(s===null)s=Nu(),Ie.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function uv(t){var s=vt().memoizedState;return eS({ref:s,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function hv(t,s){return Du(4,2,t,s)}function dv(t,s){return Du(4,4,t,s)}function fv(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function mv(t,s,a){a=a!=null?a.concat([t]):null,Du(4,4,fv.bind(null,s,t),a)}function kf(){}function pv(t,s){var a=vt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Sf(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function gv(t,s){var a=vt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Sf(s,l[1]))return l[0];if(l=t(),sa){Cn(!0);try{t()}finally{Cn(!1)}}return a.memoizedState=[l,s],l}function Vf(t,s,a){return a===void 0||(ss&1073741824)!==0&&(Pe&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=y0(),Ie.lanes|=t,Ws|=t,a)}function yv(t,s,a,l){return xn(a,s)?a:Ja.current!==null?(t=Vf(t,a,l),xn(t,s)||(Nt=!0),t):(ss&42)===0||(ss&1073741824)!==0&&(Pe&261930)===0?(Nt=!0,t.memoizedState=a):(t=y0(),Ie.lanes|=t,Ws|=t,s)}function vv(t,s,a,l,d){var m=se.p;se.p=m!==0&&8>m?m:8;var _=Y.T,T={};Y.T=T,zf(t,!1,s,a);try{var D=d(),G=Y.S;if(G!==null&&G(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=$T(D,l);El(t,s,Z,Nn(t))}else El(t,s,l,Nn(t))}catch(ne){El(t,s,{then:function(){},status:"rejected",reason:ne},Nn())}finally{se.p=m,_!==null&&T.types!==null&&(_.types=T.types),Y.T=_}}function tS(){}function Lf(t,s,a,l){if(t.tag!==5)throw Error(r(476));var d=_v(t).queue;vv(t,d,s,le,a===null?tS:function(){return bv(t),a(l)})}function _v(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:le},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function bv(t){var s=_v(t);s.next===null&&(s=t.alternate.memoizedState),El(t,s.next.queue,{},Nn())}function Uf(){return Gt(zl)}function xv(){return vt().memoizedState}function wv(){return vt().memoizedState}function nS(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Nn();t=Gs(a);var l=Qs(s,t,a);l!==null&&(mn(l,s,a),vl(l,s,a)),s={cache:mf()},t.payload=s;return}s=s.return}}function iS(t,s,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ju(t)?Tv(s,a):(a=nf(t,s,a,l),a!==null&&(mn(a,t,l),Sv(a,s,l)))}function Ev(t,s,a){var l=Nn();El(t,s,a,l)}function El(t,s,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ju(t))Tv(s,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,T=m(_,a);if(d.hasEagerState=!0,d.eagerState=T,xn(T,_))return du(t,s,d,0),nt===null&&hu(),!1}catch{}finally{}if(a=nf(t,s,d,l),a!==null)return mn(a,t,l),Sv(a,s,l),!0}return!1}function zf(t,s,a,l){if(l={lane:2,revertLane:vm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ju(t)){if(s)throw Error(r(479))}else s=nf(t,a,l,2),s!==null&&mn(s,t,2)}function ju(t){var s=t.alternate;return t===Ie||s!==null&&s===Ie}function Tv(t,s){Za=Su=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Sv(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Go(t,a)}}var Tl={readContext:Gt,use:Ru,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Tl.useEffectEvent=dt;var Av={readContext:Gt,use:Ru,useCallback:function(t,s){return rn().memoizedState=[t,s===void 0?null:s],t},useContext:Gt,useEffect:cv,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Iu(4194308,4,fv.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Iu(4194308,4,t,s)},useInsertionEffect:function(t,s){Iu(4,2,t,s)},useMemo:function(t,s){var a=rn();s=s===void 0?null:s;var l=t();if(sa){Cn(!0);try{t()}finally{Cn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=rn();if(a!==void 0){var d=a(s);if(sa){Cn(!0);try{a(s)}finally{Cn(!1)}}}else d=s;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=iS.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var s=rn();return t={current:t},s.memoizedState=t},useState:function(t){t=Of(t);var s=t.queue,a=Ev.bind(null,Ie,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:kf,useDeferredValue:function(t,s){var a=rn();return Vf(a,t,s)},useTransition:function(){var t=Of(!1);return t=vv.bind(null,Ie,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Ie,d=rn();if(Be){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),nt===null)throw Error(r(349));(Pe&127)!==0||Ky(l,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,cv($y.bind(null,l,m,t),[t]),l.flags|=2048,to(9,{destroy:void 0},Yy.bind(null,l,m,a,s),null),a},useId:function(){var t=rn(),s=nt.identifierPrefix;if(Be){var a=Oi,l=ji;a=(l&~(1<<32-pt(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Au++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=XT++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Uf,useFormState:sv,useActionState:sv,useOptimistic:function(t){var s=rn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=zf.bind(null,Ie,!0,a),a.dispatch=s,[t,s]},useMemoCache:If,useCacheRefresh:function(){return rn().memoizedState=nS.bind(null,Ie)},useEffectEvent:function(t){var s=rn(),a={impl:t};return s.memoizedState=a,function(){if((Ke&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Bf={readContext:Gt,use:Ru,useCallback:pv,useContext:Gt,useEffect:Pf,useImperativeHandle:mv,useInsertionEffect:hv,useLayoutEffect:dv,useMemo:gv,useReducer:Cu,useRef:lv,useState:function(){return Cu(rs)},useDebugValue:kf,useDeferredValue:function(t,s){var a=vt();return yv(a,Ze.memoizedState,t,s)},useTransition:function(){var t=Cu(rs)[0],s=vt().memoizedState;return[typeof t=="boolean"?t:wl(t),s]},useSyncExternalStore:Qy,useId:xv,useHostTransitionStatus:Uf,useFormState:rv,useActionState:rv,useOptimistic:function(t,s){var a=vt();return Jy(a,Ze,t,s)},useMemoCache:If,useCacheRefresh:wv};Bf.useEffectEvent=uv;var Nv={readContext:Gt,use:Ru,useCallback:pv,useContext:Gt,useEffect:Pf,useImperativeHandle:mv,useInsertionEffect:hv,useLayoutEffect:dv,useMemo:gv,useReducer:jf,useRef:lv,useState:function(){return jf(rs)},useDebugValue:kf,useDeferredValue:function(t,s){var a=vt();return Ze===null?Vf(a,t,s):yv(a,Ze.memoizedState,t,s)},useTransition:function(){var t=jf(rs)[0],s=vt().memoizedState;return[typeof t=="boolean"?t:wl(t),s]},useSyncExternalStore:Qy,useId:xv,useHostTransitionStatus:Uf,useFormState:ov,useActionState:ov,useOptimistic:function(t,s){var a=vt();return Ze!==null?Jy(a,Ze,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:If,useCacheRefresh:wv};Nv.useEffectEvent=uv;function Ff(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:x({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var qf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Nn(),d=Gs(l);d.payload=s,a!=null&&(d.callback=a),s=Qs(t,d,l),s!==null&&(mn(s,t,l),vl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Nn(),d=Gs(l);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Qs(t,d,l),s!==null&&(mn(s,t,l),vl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Nn(),l=Gs(a);l.tag=2,s!=null&&(l.callback=s),s=Qs(t,l,a),s!==null&&(mn(s,t,a),vl(s,t,a))}};function Rv(t,s,a,l,d,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!ul(a,l)||!ul(d,m):!0}function Cv(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&qf.enqueueReplaceState(s,s.state,null)}function ra(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=x({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function Iv(t){uu(t)}function Dv(t){console.error(t)}function jv(t){uu(t)}function Ou(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Ov(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Hf(t,s,a){return a=Gs(a),a.tag=3,a.payload={element:null},a.callback=function(){Ou(t,s)},a}function Mv(t){return t=Gs(t),t.tag=3,t}function Pv(t,s,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){Ov(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Ov(s,a,l),typeof d!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function sS(t,s,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Ka(s,a,d,!0),a=En.current,a!==null){switch(a.tag){case 31:case 13:return Un===null?Gu():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===bu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),pm(t,l,d)),!1;case 22:return a.flags|=65536,l===bu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),pm(t,l,d)),!1}throw Error(r(435,a.tag))}return pm(t,l,d),Gu(),!1}if(Be)return s=En.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,l!==cf&&(t=Error(r(422),{cause:l}),fl(Pn(t,a)))):(l!==cf&&(s=Error(r(423),{cause:l}),fl(Pn(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Pn(l,a),d=Hf(t.stateNode,l,d),bf(t,d),ft!==4&&(ft=2)),!1;var m=Error(r(520),{cause:l});if(m=Pn(m,a),jl===null?jl=[m]:jl.push(m),ft!==4&&(ft=2),s===null)return!0;l=Pn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=Hf(a.stateNode,l,t),bf(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Js===null||!Js.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Mv(d),Pv(d,t,a,l),bf(a,d),!1}a=a.return}while(a!==null);return!1}var Gf=Error(r(461)),Nt=!1;function Qt(t,s,a,l){s.child=t===null?Uy(s,null,a,l):ia(s,t.child,a,l)}function kv(t,s,a,l,d){a=a.render;var m=s.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Zr(s),l=Af(t,s,a,_,m,d),T=Nf(),t!==null&&!Nt?(Rf(t,s,d),as(t,s,d)):(Be&&T&&of(s),s.flags|=1,Qt(t,s,l,d),s.child)}function Vv(t,s,a,l,d){if(t===null){var m=a.type;return typeof m=="function"&&!sf(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Lv(t,s,m,l,d)):(t=mu(a.type,null,l,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Zf(t,d)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(_,l)&&t.ref===s.ref)return as(t,s,d)}return s.flags|=1,t=es(m,l),t.ref=s.ref,t.return=s,s.child=t}function Lv(t,s,a,l,d){if(t!==null){var m=t.memoizedProps;if(ul(m,l)&&t.ref===s.ref)if(Nt=!1,s.pendingProps=l=m,Zf(t,d))(t.flags&131072)!==0&&(Nt=!0);else return s.lanes=t.lanes,as(t,s,d)}return Qf(t,s,a,l,d)}function Uv(t,s,a,l){var d=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=s.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~m}else l=0,s.child=null;return zv(t,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&vu(s,m!==null?m.cachePool:null),m!==null?Fy(s,m):wf(),qy(s);else return l=s.lanes=536870912,zv(t,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(vu(s,m.cachePool),Fy(s,m),Ys(),s.memoizedState=null):(t!==null&&vu(s,null),wf(),Ys());return Qt(t,s,d,a),s.child}function Sl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function zv(t,s,a,l,d){var m=gf();return m=m===null?null:{parent:St._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&vu(s,null),wf(),qy(s),t!==null&&Ka(t,s,l,!0),s.childLanes=d,null}function Mu(t,s){return s=ku({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Bv(t,s,a){return ia(s,t.child,null,a),t=Mu(s,s.pendingProps),t.flags|=2,Tn(s),s.memoizedState=null,t}function rS(t,s,a){var l=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Be){if(l.mode==="hidden")return t=Mu(s,l),s.lanes=536870912,Sl(null,t);if(Tf(s),(t=st)?(t=Z0(t,Ln),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:zs!==null?{id:ji,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=Ty(t),a.return=s,s.child=a,Ht=s,st=null)):t=null,t===null)throw Fs(s);return s.lanes=536870912,null}return Mu(s,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Tf(s),d)if(s.flags&256)s.flags&=-257,s=Bv(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(Nt||Ka(t,s,a,!1),d=(a&t.childLanes)!==0,Nt||d){if(l=nt,l!==null&&(_=Qo(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,$r(t,_),mn(l,t,_),Gf;Gu(),s=Bv(t,s,a)}else t=m.treeContext,st=zn(_.nextSibling),Ht=s,Be=!0,Bs=null,Ln=!1,t!==null&&Ny(s,t),s=Mu(s,l),s.flags|=4096;return s}return t=es(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Pu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Qf(t,s,a,l,d){return Zr(s),a=Af(t,s,a,l,void 0,d),l=Nf(),t!==null&&!Nt?(Rf(t,s,d),as(t,s,d)):(Be&&l&&of(s),s.flags|=1,Qt(t,s,a,d),s.child)}function Fv(t,s,a,l,d,m){return Zr(s),s.updateQueue=null,a=Gy(s,l,a,d),Hy(t),l=Nf(),t!==null&&!Nt?(Rf(t,s,m),as(t,s,m)):(Be&&l&&of(s),s.flags|=1,Qt(t,s,a,m),s.child)}function qv(t,s,a,l,d){if(Zr(s),s.stateNode===null){var m=qa,_=a.contextType;typeof _=="object"&&_!==null&&(m=Gt(_)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},vf(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?Gt(_):qa,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Ff(s,a,_,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&qf.enqueueReplaceState(m,m.state,null),bl(s,l,m,d),_l(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var T=s.memoizedProps,D=ra(a,T);m.props=D;var G=m.context,Z=a.contextType;_=qa,typeof Z=="object"&&Z!==null&&(_=Gt(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||G!==_)&&Cv(s,m,l,_),Hs=!1;var K=s.memoizedState;m.state=K,bl(s,l,m,d),_l(),G=s.memoizedState,T||K!==G||Hs?(typeof ne=="function"&&(Ff(s,a,ne,l),G=s.memoizedState),(D=Hs||Rv(s,a,D,l,K,G,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=G),m.props=l,m.state=G,m.context=_,l=D):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,_f(t,s),_=s.memoizedProps,Z=ra(a,_),m.props=Z,ne=s.pendingProps,K=m.context,G=a.contextType,D=qa,typeof G=="object"&&G!==null&&(D=Gt(G)),T=a.getDerivedStateFromProps,(G=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ne||K!==D)&&Cv(s,m,l,D),Hs=!1,K=s.memoizedState,m.state=K,bl(s,l,m,d),_l();var X=s.memoizedState;_!==ne||K!==X||Hs||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof T=="function"&&(Ff(s,a,T,l),X=s.memoizedState),(Z=Hs||Rv(s,a,Z,l,K,X,D)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,X,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,X,D)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=X),m.props=l,m.state=X,m.context=D,l=Z):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Pu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=ia(s,t.child,null,d),s.child=ia(s,null,a,d)):Qt(t,s,a,d),s.memoizedState=m.state,t=s.child):t=as(t,s,d),t}function Hv(t,s,a,l){return Wr(),s.flags|=256,Qt(t,s,a,l),s.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(t){return{baseLanes:t,cachePool:Oy()}}function $f(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=An),t}function Gv(t,s,a){var l=s.pendingProps,d=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(yt.current&2)!==0),_&&(d=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(Be){if(d?Ks(s):Ys(),(t=st)?(t=Z0(t,Ln),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:zs!==null?{id:ji,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=Ty(t),a.return=s,s.child=a,Ht=s,st=null)):t=null,t===null)throw Fs(s);return Dm(t)?s.lanes=32:s.lanes=536870912,null}var T=l.children;return l=l.fallback,d?(Ys(),d=s.mode,T=ku({mode:"hidden",children:T},d),l=Xr(l,d,a,null),T.return=s,l.return=s,T.sibling=l,s.child=T,l=s.child,l.memoizedState=Yf(a),l.childLanes=$f(t,_,a),s.memoizedState=Kf,Sl(null,l)):(Ks(s),Xf(s,T))}var D=t.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(m)s.flags&256?(Ks(s),s.flags&=-257,s=Wf(t,s,a)):s.memoizedState!==null?(Ys(),s.child=t.child,s.flags|=128,s=null):(Ys(),T=l.fallback,d=s.mode,l=ku({mode:"visible",children:l.children},d),T=Xr(T,d,a,null),T.flags|=2,l.return=s,T.return=s,l.sibling=T,s.child=l,ia(s,t.child,null,a),l=s.child,l.memoizedState=Yf(a),l.childLanes=$f(t,_,a),s.memoizedState=Kf,s=Sl(null,l));else if(Ks(s),Dm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var G=_.dgst;_=G,l=Error(r(419)),l.stack="",l.digest=_,fl({value:l,source:null,stack:null}),s=Wf(t,s,a)}else if(Nt||Ka(t,s,a,!1),_=(a&t.childLanes)!==0,Nt||_){if(_=nt,_!==null&&(l=Qo(_,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,$r(t,l),mn(_,t,l),Gf;Im(T)||Gu(),s=Wf(t,s,a)}else Im(T)?(s.flags|=192,s.child=t.child,s=null):(t=D.treeContext,st=zn(T.nextSibling),Ht=s,Be=!0,Bs=null,Ln=!1,t!==null&&Ny(s,t),s=Xf(s,l.children),s.flags|=4096);return s}return d?(Ys(),T=l.fallback,d=s.mode,D=t.child,G=D.sibling,l=es(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,G!==null?T=es(G,T):(T=Xr(T,d,a,null),T.flags|=2),T.return=s,l.return=s,l.sibling=T,s.child=l,Sl(null,l),l=s.child,T=t.child.memoizedState,T===null?T=Yf(a):(d=T.cachePool,d!==null?(D=St._currentValue,d=d.parent!==D?{parent:D,pool:D}:d):d=Oy(),T={baseLanes:T.baseLanes|a,cachePool:d}),l.memoizedState=T,l.childLanes=$f(t,_,a),s.memoizedState=Kf,Sl(t.child,l)):(Ks(s),a=t.child,t=a.sibling,a=es(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function Xf(t,s){return s=ku({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ku(t,s){return t=wn(22,t,null,s),t.lanes=0,t}function Wf(t,s,a){return ia(s,t.child,null,a),t=Xf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Qv(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),df(t.return,s,a)}function Jf(t,s,a,l,d,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=m)}function Kv(t,s,a){var l=s.pendingProps,d=l.revealOrder,m=l.tail;l=l.children;var _=yt.current,T=(_&2)!==0;if(T?(_=_&1|2,s.flags|=128):_&=1,ce(yt,_),Qt(t,s,l,a),l=Be?dl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qv(t,a,s);else if(t.tag===19)Qv(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&Tu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Jf(s,!1,d,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Tu(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Jf(s,!0,a,null,m,l);break;case"together":Jf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function as(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Ws|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Ka(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=es(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=es(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Zf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function aS(t,s,a){switch(s.tag){case 3:Ot(s,s.stateNode.containerInfo),qs(s,St,t.memoizedState.cache),Wr();break;case 27:case 5:Dr(s);break;case 4:Ot(s,s.stateNode.containerInfo);break;case 10:qs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Tf(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ks(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Gv(t,s,a):(Ks(s),t=as(t,s,a),t!==null?t.sibling:null);Ks(s);break;case 19:var d=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Ka(t,s,a,!1),l=(a&s.childLanes)!==0),d){if(l)return Kv(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ce(yt,yt.current),l)break;return null;case 22:return s.lanes=0,Uv(t,s,a,s.pendingProps);case 24:qs(s,St,t.memoizedState.cache)}return as(t,s,a)}function Yv(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Nt=!0;else{if(!Zf(t,a)&&(s.flags&128)===0)return Nt=!1,aS(t,s,a);Nt=(t.flags&131072)!==0}else Nt=!1,Be&&(s.flags&1048576)!==0&&Ay(s,dl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=ta(s.elementType),s.type=t,typeof t=="function")sf(t)?(l=ra(t,l),s.tag=1,s=qv(null,s,t,l,a)):(s.tag=0,s=Qf(null,s,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===re){s.tag=11,s=kv(null,s,t,l,a);break e}else if(d===C){s.tag=14,s=Vv(null,s,t,l,a);break e}}throw s=pe(t)||t,Error(r(306,s,""))}}return s;case 0:return Qf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,d=ra(l,s.pendingProps),qv(t,s,l,d,a);case 3:e:{if(Ot(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;d=m.element,_f(t,s),bl(s,l,null,a);var _=s.memoizedState;if(l=_.cache,qs(s,St,l),l!==m.cache&&ff(s,[St],a,!0),_l(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Hv(t,s,l,a);break e}else if(l!==d){d=Pn(Error(r(424)),s),fl(d),s=Hv(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(st=zn(t.firstChild),Ht=s,Be=!0,Bs=null,Ln=!0,a=Uy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wr(),l===d){s=as(t,s,a);break e}Qt(t,s,l,a)}s=s.child}return s;case 26:return Pu(t,s),t===null?(a=r_(s.type,null,s.pendingProps,null))?s.memoizedState=a:Be||(a=s.type,t=s.pendingProps,l=Ju(Ae.current).createElement(a),l[wt]=s,l[Lt]=t,Kt(l,a,t),Et(l),s.stateNode=l):s.memoizedState=r_(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Dr(s),t===null&&Be&&(l=s.stateNode=n_(s.type,s.pendingProps,Ae.current),Ht=s,Ln=!0,d=st,nr(s.type)?(jm=d,st=zn(l.firstChild)):st=d),Qt(t,s,s.pendingProps.children,a),Pu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Be&&((d=l=st)&&(l=kS(l,s.type,s.pendingProps,Ln),l!==null?(s.stateNode=l,Ht=s,st=zn(l.firstChild),Ln=!1,d=!0):d=!1),d||Fs(s)),Dr(s),d=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Nm(d,m)?l=null:_!==null&&Nm(d,_)&&(s.flags|=32),s.memoizedState!==null&&(d=Af(t,s,WT,null,null,a),zl._currentValue=d),Pu(t,s),Qt(t,s,l,a),s.child;case 6:return t===null&&Be&&((t=a=st)&&(a=VS(a,s.pendingProps,Ln),a!==null?(s.stateNode=a,Ht=s,st=null,t=!0):t=!1),t||Fs(s)),null;case 13:return Gv(t,s,a);case 4:return Ot(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=ia(s,null,l,a):Qt(t,s,l,a),s.child;case 11:return kv(t,s,s.type,s.pendingProps,a);case 7:return Qt(t,s,s.pendingProps,a),s.child;case 8:return Qt(t,s,s.pendingProps.children,a),s.child;case 12:return Qt(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,qs(s,s.type,l.value),Qt(t,s,l.children,a),s.child;case 9:return d=s.type._context,l=s.pendingProps.children,Zr(s),d=Gt(d),l=l(d),s.flags|=1,Qt(t,s,l,a),s.child;case 14:return Vv(t,s,s.type,s.pendingProps,a);case 15:return Lv(t,s,s.type,s.pendingProps,a);case 19:return Kv(t,s,a);case 31:return rS(t,s,a);case 22:return Uv(t,s,a,s.pendingProps);case 24:return Zr(s),l=Gt(St),t===null?(d=gf(),d===null&&(d=nt,m=mf(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:l,cache:d},vf(s),qs(s,St,d)):((t.lanes&a)!==0&&(_f(t,s),bl(s,null,null,a),_l()),d=t.memoizedState,m=s.memoizedState,d.parent!==l?(d={parent:l,cache:l},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),qs(s,St,l)):(l=m.cache,qs(s,St,l),l!==d.cache&&ff(s,[St],a,!0))),Qt(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function os(t){t.flags|=4}function em(t,s,a,l,d){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(x0())t.flags|=8192;else throw na=bu,yf}else t.flags&=-16777217}function $v(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!u_(s))if(x0())t.flags|=8192;else throw na=bu,yf}function Vu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?qc():536870912,t.lanes|=s,ro|=s)}function Al(t,s){if(!Be)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function rt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function oS(t,s,a){var l=s.pendingProps;switch(lf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(s),null;case 1:return rt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),is(St),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Qa(s)?os(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,uf())),rt(s),null;case 26:var d=s.type,m=s.memoizedState;return t===null?(os(s),m!==null?(rt(s),$v(s,m)):(rt(s),em(s,d,null,l,a))):m?m!==t.memoizedState?(os(s),rt(s),$v(s,m)):(rt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&os(s),rt(s),em(s,d,t,l,a)),null;case 27:if(Ta(s),a=Ae.current,d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&os(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return rt(s),null}t=he.current,Qa(s)?Ry(s):(t=n_(d,l,a),s.stateNode=t,os(s))}return rt(s),null;case 5:if(Ta(s),d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&os(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return rt(s),null}if(m=he.current,Qa(s))Ry(s);else{var _=Ju(Ae.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}m[wt]=s,m[Lt]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(Kt(m,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&os(s)}}return rt(s),em(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&os(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Ae.current,Qa(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,d=Ht,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[wt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||G0(t.nodeValue,a)),t||Fs(s,!0)}else t=Ju(t).createTextNode(l),t[wt]=s,s.stateNode=t}return rt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Qa(s),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[wt]=s}else Wr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),t=!1}else a=uf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Tn(s),s):(Tn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return rt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Qa(s),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[wt]=s}else Wr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),d=!1}else d=uf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Tn(s),s):(Tn(s),null)}return Tn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Vu(s,s.updateQueue),rt(s),null);case 4:return ot(),t===null&&wm(s.stateNode.containerInfo),rt(s),null;case 10:return is(s.type),rt(s),null;case 19:if(J(yt),l=s.memoizedState,l===null)return rt(s),null;if(d=(s.flags&128)!==0,m=l.rendering,m===null)if(d)Al(l,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Tu(t),m!==null){for(s.flags|=128,Al(l,!1),t=m.updateQueue,s.updateQueue=t,Vu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Ey(a,t),a=a.sibling;return ce(yt,yt.current&1|2),Be&&ts(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&nn()>Fu&&(s.flags|=128,d=!0,Al(l,!1),s.lanes=4194304)}else{if(!d)if(t=Tu(m),t!==null){if(s.flags|=128,d=!0,t=t.updateQueue,s.updateQueue=t,Vu(s,t),Al(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Be)return rt(s),null}else 2*nn()-l.renderingStartTime>Fu&&a!==536870912&&(s.flags|=128,d=!0,Al(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nn(),t.sibling=null,a=yt.current,ce(yt,d?a&1|2:a&1),Be&&ts(s,l.treeForkCount),t):(rt(s),null);case 22:case 23:return Tn(s),Ef(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(rt(s),s.subtreeFlags&6&&(s.flags|=8192)):rt(s),a=s.updateQueue,a!==null&&Vu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&J(ea),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),is(St),rt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function lS(t,s){switch(lf(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return is(St),ot(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Ta(s),null;case 31:if(s.memoizedState!==null){if(Tn(s),s.alternate===null)throw Error(r(340));Wr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Tn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Wr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return J(yt),null;case 4:return ot(),null;case 10:return is(s.type),null;case 22:case 23:return Tn(s),Ef(),t!==null&&J(ea),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return is(St),null;case 25:return null;default:return null}}function Xv(t,s){switch(lf(s),s.tag){case 3:is(St),ot();break;case 26:case 27:case 5:Ta(s);break;case 4:ot();break;case 31:s.memoizedState!==null&&Tn(s);break;case 13:Tn(s);break;case 19:J(yt);break;case 10:is(s.type);break;case 22:case 23:Tn(s),Ef(),t!==null&&J(ea);break;case 24:is(St)}}function Nl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==d)}}catch(T){We(s,s.return,T)}}function $s(t,s,a){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,d=s;var D=a,G=T;try{G()}catch(Z){We(d,D,Z)}}}l=l.next}while(l!==m)}}catch(Z){We(s,s.return,Z)}}function Wv(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{By(s,a)}catch(l){We(t,t.return,l)}}}function Jv(t,s,a){a.props=ra(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,s,l)}}function Rl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){We(t,s,d)}}function Mi(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){We(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){We(t,s,d)}else a.current=null}function Zv(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){We(t,t.return,d)}}function tm(t,s,a){try{var l=t.stateNode;IS(l,t.type,a,s),l[Lt]=s}catch(d){We(t,t.return,d)}}function e0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&nr(t.type)||t.tag===4}function nm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||e0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&nr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function im(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Zn));else if(l!==4&&(l===27&&nr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(im(t,s,a),t=t.sibling;t!==null;)im(t,s,a),t=t.sibling}function Lu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&nr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Lu(t,s,a),t=t.sibling;t!==null;)Lu(t,s,a),t=t.sibling}function t0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Kt(s,l,a),s[wt]=t,s[Lt]=a}catch(m){We(t,t.return,m)}}var ls=!1,Rt=!1,sm=!1,n0=typeof WeakSet=="function"?WeakSet:Set,zt=null;function cS(t,s){if(t=t.containerInfo,Sm=rh,t=my(t),Xd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,T=-1,D=-1,G=0,Z=0,ne=t,K=null;t:for(;;){for(var X;ne!==a||d!==0&&ne.nodeType!==3||(T=_+d),ne!==m||l!==0&&ne.nodeType!==3||(D=_+l),ne.nodeType===3&&(_+=ne.nodeValue.length),(X=ne.firstChild)!==null;)K=ne,ne=X;for(;;){if(ne===t)break t;if(K===a&&++G===d&&(T=_),K===m&&++Z===l&&(D=_),(X=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=X}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Am={focusedElem:t,selectionRange:a},rh=!1,zt=s;zt!==null;)if(s=zt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,zt=t;else for(;zt!==null;){switch(s=zt,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var me=ra(a.type,d);t=l.getSnapshotBeforeUpdate(me,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){We(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Cm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,zt=t;break}zt=s.return}}function i0(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:us(t,a),l&4&&Nl(5,a);break;case 1:if(us(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){We(a,a.return,_)}else{var d=ra(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){We(a,a.return,_)}}l&64&&Wv(a),l&512&&Rl(a,a.return);break;case 3:if(us(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{By(t,s)}catch(_){We(a,a.return,_)}}break;case 27:s===null&&l&4&&t0(a);case 26:case 5:us(t,a),s===null&&l&4&&Zv(a),l&512&&Rl(a,a.return);break;case 12:us(t,a);break;case 31:us(t,a),l&4&&a0(t,a);break;case 13:us(t,a),l&4&&o0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=vS.bind(null,a),LS(t,a))));break;case 22:if(l=a.memoizedState!==null||ls,!l){s=s!==null&&s.memoizedState!==null||Rt,d=ls;var m=Rt;ls=l,(Rt=s)&&!m?hs(t,a,(a.subtreeFlags&8772)!==0):us(t,a),ls=d,Rt=m}break;case 30:break;default:us(t,a)}}function s0(t){var s=t.alternate;s!==null&&(t.alternate=null,s0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ca(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,un=!1;function cs(t,s,a){for(a=a.child;a!==null;)r0(t,s,a),a=a.sibling}function r0(t,s,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount($n,a)}catch{}switch(a.tag){case 26:Rt||Mi(a,s),cs(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||Mi(a,s);var l=ct,d=un;nr(a.type)&&(ct=a.stateNode,un=!1),cs(t,s,a),Vl(a.stateNode),ct=l,un=d;break;case 5:Rt||Mi(a,s);case 6:if(l=ct,d=un,ct=null,cs(t,s,a),ct=l,un=d,ct!==null)if(un)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(m){We(a,s,m)}else try{ct.removeChild(a.stateNode)}catch(m){We(a,s,m)}break;case 18:ct!==null&&(un?(t=ct,W0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),mo(t)):W0(ct,a.stateNode));break;case 4:l=ct,d=un,ct=a.stateNode.containerInfo,un=!0,cs(t,s,a),ct=l,un=d;break;case 0:case 11:case 14:case 15:$s(2,a,s),Rt||$s(4,a,s),cs(t,s,a);break;case 1:Rt||(Mi(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Jv(a,s,l)),cs(t,s,a);break;case 21:cs(t,s,a);break;case 22:Rt=(l=Rt)||a.memoizedState!==null,cs(t,s,a),Rt=l;break;default:cs(t,s,a)}}function a0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{mo(t)}catch(a){We(s,s.return,a)}}}function o0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{mo(t)}catch(a){We(s,s.return,a)}}function uS(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new n0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new n0),s;default:throw Error(r(435,t.tag))}}function Uu(t,s){var a=uS(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var d=_S.bind(null,t,l);l.then(d,d)}})}function hn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=t,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(nr(T.type)){ct=T.stateNode,un=!1;break e}break;case 5:ct=T.stateNode,un=!1;break e;case 3:case 4:ct=T.stateNode.containerInfo,un=!0;break e}T=T.return}if(ct===null)throw Error(r(160));r0(m,_,d),ct=null,un=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)l0(s,t),s=s.sibling}var ri=null;function l0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hn(s,t),dn(t),l&4&&($s(3,t,t.return),Nl(3,t),$s(5,t,t.return));break;case 1:hn(s,t),dn(t),l&512&&(Rt||a===null||Mi(a,a.return)),l&64&&ls&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=ri;if(hn(s,t),dn(t),l&512&&(Rt||a===null||Mi(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[bi]||m[wt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),Kt(m,l,a),m[wt]=t,Et(m),l=m;break e;case"link":var _=l_("link","href",d).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(m=_[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}m=d.createElement(l),Kt(m,l,a),d.head.appendChild(m);break;case"meta":if(_=l_("meta","content",d).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(m=_[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}m=d.createElement(l),Kt(m,l,a),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[wt]=t,Et(m),l=m}t.stateNode=l}else c_(d,t.type,t.stateNode);else t.stateNode=o_(d,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?c_(d,t.type,t.stateNode):o_(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&tm(t,t.memoizedProps,a.memoizedProps)}break;case 27:hn(s,t),dn(t),l&512&&(Rt||a===null||Mi(a,a.return)),a!==null&&l&4&&tm(t,t.memoizedProps,a.memoizedProps);break;case 5:if(hn(s,t),dn(t),l&512&&(Rt||a===null||Mi(a,a.return)),t.flags&32){d=t.stateNode;try{cn(d,"")}catch(me){We(t,t.return,me)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,tm(t,d,a!==null?a.memoizedProps:d)),l&1024&&(sm=!0);break;case 6:if(hn(s,t),dn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(me){We(t,t.return,me)}}break;case 3:if(th=null,d=ri,ri=Zu(s.containerInfo),hn(s,t),ri=d,dn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{mo(s.containerInfo)}catch(me){We(t,t.return,me)}sm&&(sm=!1,c0(t));break;case 4:l=ri,ri=Zu(t.stateNode.containerInfo),hn(s,t),dn(t),ri=l;break;case 12:hn(s,t),dn(t);break;case 31:hn(s,t),dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uu(t,l)));break;case 13:hn(s,t),dn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bu=nn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uu(t,l)));break;case 22:d=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,G=ls,Z=Rt;if(ls=G||d,Rt=Z||D,hn(s,t),Rt=Z,ls=G,dn(t),l&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||D||ls||Rt||aa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){D=a=s;try{if(m=D.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=D.stateNode;var ne=D.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(me){We(D,D.return,me)}}}else if(s.tag===6){if(a===null){D=s;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(me){We(D,D.return,me)}}}else if(s.tag===18){if(a===null){D=s;try{var X=D.stateNode;d?J0(X,!0):J0(D.stateNode,!1)}catch(me){We(D,D.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Uu(t,a))));break;case 19:hn(s,t),dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uu(t,l)));break;case 30:break;case 21:break;default:hn(s,t),dn(t)}}function dn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(e0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=nm(t);Lu(t,m,d);break;case 5:var _=a.stateNode;a.flags&32&&(cn(_,""),a.flags&=-33);var T=nm(t);Lu(t,T,_);break;case 3:case 4:var D=a.stateNode.containerInfo,G=nm(t);im(t,G,D);break;default:throw Error(r(161))}}catch(Z){We(t,t.return,Z)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function c0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;c0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function us(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)i0(t,s.alternate,s),s=s.sibling}function aa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:$s(4,s,s.return),aa(s);break;case 1:Mi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Jv(s,s.return,a),aa(s);break;case 27:Vl(s.stateNode);case 26:case 5:Mi(s,s.return),aa(s);break;case 22:s.memoizedState===null&&aa(s);break;case 30:aa(s);break;default:aa(s)}t=t.sibling}}function hs(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,d=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:hs(d,m,a),Nl(4,m);break;case 1:if(hs(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){We(l,l.return,G)}if(l=m,d=l.updateQueue,d!==null){var T=l.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)zy(D[d],T)}catch(G){We(l,l.return,G)}}a&&_&64&&Wv(m),Rl(m,m.return);break;case 27:t0(m);case 26:case 5:hs(d,m,a),a&&l===null&&_&4&&Zv(m),Rl(m,m.return);break;case 12:hs(d,m,a);break;case 31:hs(d,m,a),a&&_&4&&a0(d,m);break;case 13:hs(d,m,a),a&&_&4&&o0(d,m);break;case 22:m.memoizedState===null&&hs(d,m,a),Rl(m,m.return);break;case 30:break;default:hs(d,m,a)}s=s.sibling}}function rm(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ml(a))}function am(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ml(t))}function ai(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)u0(t,s,a,l),s=s.sibling}function u0(t,s,a,l){var d=s.flags;switch(s.tag){case 0:case 11:case 15:ai(t,s,a,l),d&2048&&Nl(9,s);break;case 1:ai(t,s,a,l);break;case 3:ai(t,s,a,l),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ml(t)));break;case 12:if(d&2048){ai(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,T=m.onPostCommit;typeof T=="function"&&T(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){We(s,s.return,D)}}else ai(t,s,a,l);break;case 31:ai(t,s,a,l);break;case 13:ai(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?ai(t,s,a,l):Cl(t,s):m._visibility&2?ai(t,s,a,l):(m._visibility|=2,no(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),d&2048&&rm(_,s);break;case 24:ai(t,s,a,l),d&2048&&am(s.alternate,s);break;default:ai(t,s,a,l)}}function no(t,s,a,l,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,T=a,D=l,G=_.flags;switch(_.tag){case 0:case 11:case 15:no(m,_,T,D,d),Nl(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?no(m,_,T,D,d):Cl(m,_):(Z._visibility|=2,no(m,_,T,D,d)),d&&G&2048&&rm(_.alternate,_);break;case 24:no(m,_,T,D,d),d&&G&2048&&am(_.alternate,_);break;default:no(m,_,T,D,d)}s=s.sibling}}function Cl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,d=l.flags;switch(l.tag){case 22:Cl(a,l),d&2048&&rm(l.alternate,l);break;case 24:Cl(a,l),d&2048&&am(l.alternate,l);break;default:Cl(a,l)}s=s.sibling}}var Il=8192;function io(t,s,a){if(t.subtreeFlags&Il)for(t=t.child;t!==null;)h0(t,s,a),t=t.sibling}function h0(t,s,a){switch(t.tag){case 26:io(t,s,a),t.flags&Il&&t.memoizedState!==null&&XS(a,ri,t.memoizedState,t.memoizedProps);break;case 5:io(t,s,a);break;case 3:case 4:var l=ri;ri=Zu(t.stateNode.containerInfo),io(t,s,a),ri=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Il,Il=16777216,io(t,s,a),Il=l):io(t,s,a));break;default:io(t,s,a)}}function d0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Dl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];zt=l,m0(l,t)}d0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)f0(t),t=t.sibling}function f0(t){switch(t.tag){case 0:case 11:case 15:Dl(t),t.flags&2048&&$s(9,t,t.return);break;case 3:Dl(t);break;case 12:Dl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,zu(t)):Dl(t);break;default:Dl(t)}}function zu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];zt=l,m0(l,t)}d0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:$s(8,s,s.return),zu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,zu(s));break;default:zu(s)}t=t.sibling}}function m0(t,s){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:$s(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ml(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,zt=l;else e:for(a=t;zt!==null;){l=zt;var d=l.sibling,m=l.return;if(s0(l),l===a){zt=null;break e}if(d!==null){d.return=m,zt=d;break e}zt=m}}}var hS={getCacheForType:function(t){var s=Gt(St),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Gt(St).controller.signal}},dS=typeof WeakMap=="function"?WeakMap:Map,Ke=0,nt=null,Oe=null,Pe=0,Xe=0,Sn=null,Xs=!1,so=!1,om=!1,ds=0,ft=0,Ws=0,oa=0,lm=0,An=0,ro=0,jl=null,fn=null,cm=!1,Bu=0,p0=0,Fu=1/0,qu=null,Js=null,Pt=0,Zs=null,ao=null,fs=0,um=0,hm=null,g0=null,Ol=0,dm=null;function Nn(){return(Ke&2)!==0&&Pe!==0?Pe&-Pe:Y.T!==null?vm():Hc()}function y0(){if(An===0)if((Pe&536870912)===0||Be){var t=Mr;Mr<<=1,(Mr&3932160)===0&&(Mr=262144),An=t}else An=536870912;return t=En.current,t!==null&&(t.flags|=32),An}function mn(t,s,a){(t===nt&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(oo(t,0),er(t,Pe,An,!1)),Pr(t,a),((Ke&2)===0||t!==nt)&&(t===nt&&((Ke&2)===0&&(oa|=a),ft===4&&er(t,Pe,An,!1)),Pi(t))}function v0(t,s,a){if((Ke&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Xn(t,s),d=l?pS(t,s):mm(t,s,!0),m=l;do{if(d===0){so&&!l&&er(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!fS(a)){d=mm(t,s,!1),m=!1;continue}if(d===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var T=t;d=jl;var D=T.current.memoizedState.isDehydrated;if(D&&(oo(T,_).flags|=256),_=mm(T,_,!1),_!==2){if(om&&!D){T.errorRecoveryDisabledLanes|=m,oa|=m,d=4;break e}m=fn,fn=d,m!==null&&(fn===null?fn=m:fn.push.apply(fn,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){oo(t,0),er(t,s,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:er(l,s,An,!Xs);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Bu+300-nn(),10<d)){if(er(l,s,An,!Xs),yi(l,0,!0)!==0)break e;fs=s,l.timeoutHandle=$0(_0.bind(null,l,a,fn,qu,cm,s,An,oa,ro,Xs,m,"Throttled",-0,0),d);break e}_0(l,a,fn,qu,cm,s,An,oa,ro,Xs,m,null,-0,0)}}break}while(!0);Pi(t)}function _0(t,s,a,l,d,m,_,T,D,G,Z,ne,K,X){if(t.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},h0(s,m,ne);var me=(m&62914560)===m?Bu-nn():(m&4194048)===m?p0-nn():0;if(me=WS(ne,me),me!==null){fs=m,t.cancelPendingCommit=me(N0.bind(null,t,s,m,a,l,d,_,T,D,Z,ne,null,K,X)),er(t,m,_,!G);return}}N0(t,s,m,a,l,d,_,T,D)}function fS(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!xn(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function er(t,s,a,l){s&=~lm,s&=~oa,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var d=s;0<d;){var m=31-pt(d),_=1<<m;l[m]=-1,d&=~_}a!==0&&kr(t,a,s)}function Hu(){return(Ke&6)===0?(Ml(0),!1):!0}function fm(){if(Oe!==null){if(Xe===0)var t=Oe.return;else t=Oe,ns=Jr=null,Cf(t),Wa=null,gl=0,t=Oe;for(;t!==null;)Xv(t.alternate,t),t=t.return;Oe=null}}function oo(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,OS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fs=0,fm(),nt=t,Oe=a=es(t.current,null),Pe=s,Xe=0,Sn=null,Xs=!1,so=Xn(t,s),om=!1,ro=An=lm=oa=Ws=ft=0,fn=jl=null,cm=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var d=31-pt(l),m=1<<d;s|=t[d],l&=~m}return ds=s,hu(),a}function b0(t,s){Ie=null,Y.H=Tl,s===Xa||s===_u?(s=ky(),Xe=3):s===yf?(s=ky(),Xe=4):Xe=s===Gf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Sn=s,Oe===null&&(ft=1,Ou(t,Pn(s,t.current)))}function x0(){var t=En.current;return t===null?!0:(Pe&4194048)===Pe?Un===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?t===Un:!1}function w0(){var t=Y.H;return Y.H=Tl,t===null?Tl:t}function E0(){var t=Y.A;return Y.A=hS,t}function Gu(){ft=4,Xs||(Pe&4194048)!==Pe&&En.current!==null||(so=!0),(Ws&134217727)===0&&(oa&134217727)===0||nt===null||er(nt,Pe,An,!1)}function mm(t,s,a){var l=Ke;Ke|=2;var d=w0(),m=E0();(nt!==t||Pe!==s)&&(qu=null,oo(t,s)),s=!1;var _=ft;e:do try{if(Xe!==0&&Oe!==null){var T=Oe,D=Sn;switch(Xe){case 8:fm(),_=6;break e;case 3:case 2:case 9:case 6:En.current===null&&(s=!0);var G=Xe;if(Xe=0,Sn=null,lo(t,T,D,G),a&&so){_=0;break e}break;default:G=Xe,Xe=0,Sn=null,lo(t,T,D,G)}}mS(),_=ft;break}catch(Z){b0(t,Z)}while(!0);return s&&t.shellSuspendCounter++,ns=Jr=null,Ke=l,Y.H=d,Y.A=m,Oe===null&&(nt=null,Pe=0,hu()),_}function mS(){for(;Oe!==null;)T0(Oe)}function pS(t,s){var a=Ke;Ke|=2;var l=w0(),d=E0();nt!==t||Pe!==s?(qu=null,Fu=nn()+500,oo(t,s)):so=Xn(t,s);e:do try{if(Xe!==0&&Oe!==null){s=Oe;var m=Sn;t:switch(Xe){case 1:Xe=0,Sn=null,lo(t,s,m,1);break;case 2:case 9:if(My(m)){Xe=0,Sn=null,S0(s);break}s=function(){Xe!==2&&Xe!==9||nt!==t||(Xe=7),Pi(t)},m.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:My(m)?(Xe=0,Sn=null,S0(s)):(Xe=0,Sn=null,lo(t,s,m,7));break;case 5:var _=null;switch(Oe.tag){case 26:_=Oe.memoizedState;case 5:case 27:var T=Oe;if(_?u_(_):T.stateNode.complete){Xe=0,Sn=null;var D=T.sibling;if(D!==null)Oe=D;else{var G=T.return;G!==null?(Oe=G,Qu(G)):Oe=null}break t}}Xe=0,Sn=null,lo(t,s,m,5);break;case 6:Xe=0,Sn=null,lo(t,s,m,6);break;case 8:fm(),ft=6;break e;default:throw Error(r(462))}}gS();break}catch(Z){b0(t,Z)}while(!0);return ns=Jr=null,Y.H=l,Y.A=d,Ke=a,Oe!==null?0:(nt=null,Pe=0,hu(),ft)}function gS(){for(;Oe!==null&&!qd();)T0(Oe)}function T0(t){var s=Yv(t.alternate,t,ds);t.memoizedProps=t.pendingProps,s===null?Qu(t):Oe=s}function S0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Fv(a,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=Fv(a,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:Cf(s);default:Xv(a,s),s=Oe=Ey(s,ds),s=Yv(a,s,ds)}t.memoizedProps=t.pendingProps,s===null?Qu(t):Oe=s}function lo(t,s,a,l){ns=Jr=null,Cf(s),Wa=null,gl=0;var d=s.return;try{if(sS(t,d,s,a,Pe)){ft=1,Ou(t,Pn(a,t.current)),Oe=null;return}}catch(m){if(d!==null)throw Oe=d,m;ft=1,Ou(t,Pn(a,t.current)),Oe=null;return}s.flags&32768?(Be||l===1?t=!0:so||(Pe&536870912)!==0?t=!1:(Xs=t=!0,(l===2||l===9||l===3||l===6)&&(l=En.current,l!==null&&l.tag===13&&(l.flags|=16384))),A0(s,t)):Qu(s)}function Qu(t){var s=t;do{if((s.flags&32768)!==0){A0(s,Xs);return}t=s.return;var a=oS(s.alternate,s,ds);if(a!==null){Oe=a;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=t}while(s!==null);ft===0&&(ft=5)}function A0(t,s){do{var a=lS(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);ft=6,Oe=null}function N0(t,s,a,l,d,m,_,T,D){t.cancelPendingCommit=null;do Ku();while(Pt!==0);if((Ke&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=tf,Qd(t,a,m,_,T,D),t===nt&&(Oe=nt=null,Pe=0),ao=s,Zs=t,fs=a,um=m,hm=d,g0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,bS(Is,function(){return j0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,d=se.p,se.p=2,_=Ke,Ke|=4;try{cS(t,s,a)}finally{Ke=_,se.p=d,Y.T=l}}Pt=1,R0(),C0(),I0()}}function R0(){if(Pt===1){Pt=0;var t=Zs,s=ao,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=se.p;se.p=2;var d=Ke;Ke|=4;try{l0(s,t);var m=Am,_=my(t.containerInfo),T=m.focusedElem,D=m.selectionRange;if(_!==T&&T&&T.ownerDocument&&fy(T.ownerDocument.documentElement,T)){if(D!==null&&Xd(T)){var G=D.start,Z=D.end;if(Z===void 0&&(Z=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(Z,T.value.length);else{var ne=T.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var X=K.getSelection(),me=T.textContent.length,_e=Math.min(D.start,me),tt=D.end===void 0?_e:Math.min(D.end,me);!X.extend&&_e>tt&&(_=tt,tt=_e,_e=_);var B=dy(T,_e),L=dy(T,tt);if(B&&L&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var H=ne.createRange();H.setStart(B.node,B.offset),X.removeAllRanges(),_e>tt?(X.addRange(H),X.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),X.addRange(H))}}}}for(ne=[],X=T;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var ee=ne[T];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}rh=!!Sm,Am=Sm=null}finally{Ke=d,se.p=l,Y.T=a}}t.current=s,Pt=2}}function C0(){if(Pt===2){Pt=0;var t=Zs,s=ao,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=se.p;se.p=2;var d=Ke;Ke|=4;try{i0(t,s.alternate,s)}finally{Ke=d,se.p=l,Y.T=a}}Pt=3}}function I0(){if(Pt===4||Pt===3){Pt=0,Vc();var t=Zs,s=ao,a=fs,l=g0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pt=5:(Pt=0,ao=Zs=null,D0(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Js=null),Xi(a),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot($n,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Y.T,d=se.p,se.p=2,Y.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];m(T.value,{componentStack:T.stack})}}finally{Y.T=s,se.p=d}}(fs&3)!==0&&Ku(),Pi(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===dm?Ol++:(Ol=0,dm=t):Ol=0,Ml(0)}}function D0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,ml(s)))}function Ku(){return R0(),C0(),I0(),j0()}function j0(){if(Pt!==5)return!1;var t=Zs,s=um;um=0;var a=Xi(fs),l=Y.T,d=se.p;try{se.p=32>a?32:a,Y.T=null,a=hm,hm=null;var m=Zs,_=fs;if(Pt=0,ao=Zs=null,fs=0,(Ke&6)!==0)throw Error(r(331));var T=Ke;if(Ke|=4,f0(m.current),u0(m,m.current,_,a),Ke=T,Ml(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot($n,m)}catch{}return!0}finally{se.p=d,Y.T=l,D0(t,s)}}function O0(t,s,a){s=Pn(a,s),s=Hf(t.stateNode,s,2),t=Qs(t,s,2),t!==null&&(Pr(t,2),Pi(t))}function We(t,s,a){if(t.tag===3)O0(t,t,a);else for(;s!==null;){if(s.tag===3){O0(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Js===null||!Js.has(l))){t=Pn(a,t),a=Mv(2),l=Qs(s,a,2),l!==null&&(Pv(a,l,s,t),Pr(l,2),Pi(l));break}}s=s.return}}function pm(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new dS;var d=new Set;l.set(s,d)}else d=l.get(s),d===void 0&&(d=new Set,l.set(s,d));d.has(a)||(om=!0,d.add(a),t=yS.bind(null,t,s,a),s.then(t,t))}function yS(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(Pe&a)===a&&(ft===4||ft===3&&(Pe&62914560)===Pe&&300>nn()-Bu?(Ke&2)===0&&oo(t,0):lm|=a,ro===Pe&&(ro=0)),Pi(t)}function M0(t,s){s===0&&(s=qc()),t=$r(t,s),t!==null&&(Pr(t,s),Pi(t))}function vS(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),M0(t,a)}function _S(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),M0(t,a)}function bS(t,s){return Mt(t,s)}var Yu=null,co=null,gm=!1,$u=!1,ym=!1,tr=0;function Pi(t){t!==co&&t.next===null&&(co===null?Yu=co=t:co=co.next=t),$u=!0,gm||(gm=!0,wS())}function Ml(t,s){if(!ym&&$u){ym=!0;do for(var a=!1,l=Yu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var _=l.suspendedLanes,T=l.pingedLanes;m=(1<<31-pt(42|t)+1)-1,m&=d&~(_&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,L0(l,m))}else m=Pe,m=yi(l,l===nt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Xn(l,m)||(a=!0,L0(l,m));l=l.next}while(a);ym=!1}}function xS(){P0()}function P0(){$u=gm=!1;var t=0;tr!==0&&jS()&&(t=tr);for(var s=nn(),a=null,l=Yu;l!==null;){var d=l.next,m=k0(l,s);m===0?(l.next=null,a===null?Yu=d:a.next=d,d===null&&(co=a)):(a=l,(t!==0||(m&3)!==0)&&($u=!0)),l=d}Pt!==0&&Pt!==5||Ml(t),tr!==0&&(tr=0)}function k0(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-pt(m),T=1<<_,D=d[_];D===-1?((T&a)===0||(T&l)!==0)&&(d[_]=Gd(T,s)):D<=s&&(t.expiredLanes|=T),m&=~T}if(s=nt,a=Pe,a=yi(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Cs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Xn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&Cs(l),Xi(a)){case 2:case 8:a=Ho;break;case 32:a=Is;break;case 268435456:a=Lc;break;default:a=Is}return l=V0.bind(null,t),a=Mt(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&Cs(l),t.callbackPriority=2,t.callbackNode=null,2}function V0(t,s){if(Pt!==0&&Pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ku()&&t.callbackNode!==a)return null;var l=Pe;return l=yi(t,t===nt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(v0(t,l,s),k0(t,nn()),t.callbackNode!=null&&t.callbackNode===a?V0.bind(null,t):null)}function L0(t,s){if(Ku())return null;v0(t,s,!0)}function wS(){MS(function(){(Ke&6)!==0?Mt(qo,xS):P0()})}function vm(){if(tr===0){var t=Ya;t===0&&(t=pi,pi<<=1,(pi&261888)===0&&(pi=256)),tr=t}return tr}function U0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Oa(""+t)}function z0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function ES(t,s,a,l,d){if(s==="submit"&&a&&a.stateNode===d){var m=U0((d[Lt]||null).action),_=l.submitter;_&&(s=(s=_[Lt]||null)?U0(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var T=new Ri("action","action",null,l,d);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(tr!==0){var D=_?z0(d,_):new FormData(d);Lf(a,{pending:!0,data:D,method:d.method,action:m},null,D)}}else typeof m=="function"&&(T.preventDefault(),D=_?z0(d,_):new FormData(d),Lf(a,{pending:!0,data:D,method:d.method,action:m},m,D))},currentTarget:d}]})}}for(var _m=0;_m<ef.length;_m++){var bm=ef[_m],TS=bm.toLowerCase(),SS=bm[0].toUpperCase()+bm.slice(1);si(TS,"on"+SS)}si(yy,"onAnimationEnd"),si(vy,"onAnimationIteration"),si(_y,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(BT,"onTransitionRun"),si(FT,"onTransitionStart"),si(qT,"onTransitionCancel"),si(by,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function B0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var T=l[_],D=T.instance,G=T.currentTarget;if(T=T.listener,D!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=G;try{m(d)}catch(Z){uu(Z)}d.currentTarget=null,m=D}else for(_=0;_<l.length;_++){if(T=l[_],D=T.instance,G=T.currentTarget,T=T.listener,D!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=G;try{m(d)}catch(Z){uu(Z)}d.currentTarget=null,m=D}}}}function Me(t,s){var a=s[Ra];a===void 0&&(a=s[Ra]=new Set);var l=t+"__bubble";a.has(l)||(F0(s,t,2,!1),a.add(l))}function xm(t,s,a){var l=0;s&&(l|=4),F0(a,t,l,s)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function wm(t){if(!t[Xu]){t[Xu]=!0,Ko.forEach(function(a){a!=="selectionchange"&&(AS.has(a)||xm(a,!1,t),xm(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Xu]||(s[Xu]=!0,xm("selectionchange",!1,s))}}function F0(t,s,a,l){switch(y_(s)){case 2:var d=e1;break;case 8:d=t1;break;default:d=Vm}a=d.bind(null,s,a,t),d=void 0,!Br||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function Em(t,s,a,l,d){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===d)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;T!==null;){if(_=xi(T),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=m=_;continue e}T=T.parentNode}}l=l.return}ks(function(){var G=m,Z=Dn(a),ne=[];e:{var K=xy.get(t);if(K!==void 0){var X=Ri,me=t;switch(t){case"keypress":if(qr(a)===0)break e;case"keydown":case"keyup":X=ou;break;case"focusin":me="focus",X=Gr;break;case"focusout":me="blur",X=Gr;break;case"beforeblur":case"afterblur":X=Gr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=v;break;case yy:case vy:case _y:X=eu;break;case by:X=S;break;case"scroll":case"scrollend":X=rl;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Zi;break;case"toggle":case"beforetoggle":X=Ce}var _e=(s&4)!==0,tt=!_e&&(t==="scroll"||t==="scrollend"),B=_e?K!==null?K+"Capture":null:K;_e=[];for(var L=G,H;L!==null;){var ee=L;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||B===null||(ee=ei(L,B),ee!=null&&_e.push(kl(L,ee,H))),tt)break;L=L.return}0<_e.length&&(K=new X(K,me,null,a,Z),ne.push({event:K,listeners:_e}))}}if((s&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",K&&a!==nl&&(me=a.relatedTarget||a.fromElement)&&(xi(me)||me[_i]))break e;if((X||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,X?(me=a.relatedTarget||a.toElement,X=G,me=me?xi(me):null,me!==null&&(tt=c(me),_e=me.tag,me!==tt||_e!==5&&_e!==27&&_e!==6)&&(me=null)):(X=null,me=G),X!==me)){if(_e=al,ee="onMouseLeave",B="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(_e=Zi,ee="onPointerLeave",B="onPointerEnter",L="pointer"),tt=X==null?K:_n(X),H=me==null?K:_n(me),K=new _e(ee,L+"leave",X,a,Z),K.target=tt,K.relatedTarget=H,ee=null,xi(Z)===G&&(_e=new _e(B,L+"enter",me,a,Z),_e.target=H,_e.relatedTarget=tt,ee=_e),tt=ee,X&&me)t:{for(_e=NS,B=X,L=me,H=0,ee=B;ee;ee=_e(ee))H++;ee=0;for(var ye=L;ye;ye=_e(ye))ee++;for(;0<H-ee;)B=_e(B),H--;for(;0<ee-H;)L=_e(L),ee--;for(;H--;){if(B===L||L!==null&&B===L.alternate){_e=B;break t}B=_e(B),L=_e(L)}_e=null}else _e=null;X!==null&&q0(ne,K,X,_e,!1),me!==null&&tt!==null&&q0(ne,tt,me,_e,!0)}}e:{if(K=G?_n(G):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var He=ay;else if(sy(K))if(oy)He=LT;else{He=kT;var ge=PT}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&ja(G.elementType)&&(He=ay):He=VT;if(He&&(He=He(t,G))){ry(ne,He,a,Z);break e}ge&&ge(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Zo(K,"number",K.value)}switch(ge=G?_n(G):window,t){case"focusin":(sy(ge)||ge.contentEditable==="true")&&(za=ge,Wd=G,hl=null);break;case"focusout":hl=Wd=za=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,py(ne,a,Z);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":py(ne,a,Z)}var De;if(Qe)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ua?Qr(t,a)&&(ke="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Di&&a.locale!=="ko"&&(Ua||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ua&&(De=sl()):(Ni=Z,il="value"in Ni?Ni.value:Ni.textContent,Ua=!0)),ge=Wu(G,ke),0<ge.length&&(ke=new Ii(ke,t,null,a,Z),ne.push({event:ke,listeners:ge}),De?ke.data=De:(De=La(a),De!==null&&(ke.data=De)))),(De=On?DT(t,a):jT(t,a))&&(ke=Wu(G,"onBeforeInput"),0<ke.length&&(ge=new Ii("onBeforeInput","beforeinput",null,a,Z),ne.push({event:ge,listeners:ke}),ge.data=De)),ES(ne,t,G,a,Z)}B0(ne,s)})}function kl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Wu(t,s){for(var a=s+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=ei(t,a),d!=null&&l.unshift(kl(t,d,m)),d=ei(t,s),d!=null&&l.push(kl(t,d,m))),t.tag===3)return l;t=t.return}return[]}function NS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function q0(t,s,a,l,d){for(var m=s._reactName,_=[];a!==null&&a!==l;){var T=a,D=T.alternate,G=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||G===null||(D=G,d?(G=ei(a,m),G!=null&&_.unshift(kl(a,G,D))):d||(G=ei(a,m),G!=null&&_.push(kl(a,G,D)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var RS=/\r\n?/g,CS=/\u0000|\uFFFD/g;function H0(t){return(typeof t=="string"?t:""+t).replace(RS,`
`).replace(CS,"")}function G0(t,s){return s=H0(s),H0(t)===s}function et(t,s,a,l,d,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||cn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&cn(t,""+l);break;case"className":bn(t,"class",l);break;case"tabIndex":bn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(t,a,l);break;case"style":tl(t,l,m);break;case"data":if(s!=="object"){bn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Oa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&et(t,s,"name",d.name,d,null),et(t,s,"formEncType",d.formEncType,d,null),et(t,s,"formMethod",d.formMethod,d,null),et(t,s,"formTarget",d.formTarget,d,null)):(et(t,s,"encType",d.encType,d,null),et(t,s,"method",d.method,d,null),et(t,s,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Oa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Zn);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Oa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),Ia(t,"popover",l);break;case"xlinkActuate":Tt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Tt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Tt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Tt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Tt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Tt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ia(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Wc.get(a)||a,Ia(t,a,l))}}function Tm(t,s,a,l,d,m){switch(a){case"style":tl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?cn(t,l):(typeof l=="number"||typeof l=="bigint")&&cn(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=t[Lt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ia(t,a,l)}}}function Kt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:et(t,s,m,_,a,null)}}d&&et(t,s,"srcSet",a.srcSet,a,null),l&&et(t,s,"src",a.src,a,null);return;case"input":Me("invalid",t);var T=m=_=d=null,D=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":d=Z;break;case"type":_=Z;break;case"checked":D=Z;break;case"defaultChecked":G=Z;break;case"value":m=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:et(t,s,l,Z,a,null)}}Yc(t,m,T,D,G,_,d,!1);return;case"select":Me("invalid",t),l=_=m=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":m=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:et(t,s,d,T,a,null)}s=m,a=_,t.multiple=!!l,s!=null?js(t,!!l,s,!1):a!=null&&js(t,!!l,a,!0);return;case"textarea":Me("invalid",t),m=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":d=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:et(t,s,_,T,a,null)}Os(t,l,d,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(t,s,D,l,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<Pl.length;l++)Me(Pl[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:et(t,s,G,l,a,null)}return;default:if(ja(s)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Tm(t,s,Z,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&et(t,s,T,l,a,null))}function IS(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,T=null,D=null,G=null,Z=null;for(X in a){var ne=a[X];if(a.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=ne;default:l.hasOwnProperty(X)||et(t,s,X,null,l,ne)}}for(var K in l){var X=l[K];if(ne=a[K],l.hasOwnProperty(K)&&(X!=null||ne!=null))switch(K){case"type":m=X;break;case"name":d=X;break;case"checked":G=X;break;case"defaultChecked":Z=X;break;case"value":_=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:X!==ne&&et(t,s,K,X,l,ne)}}Da(t,_,T,D,G,Z,m,d);return;case"select":X=_=T=K=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":X=D;default:l.hasOwnProperty(m)||et(t,s,m,null,l,D)}for(d in l)if(m=l[d],D=a[d],l.hasOwnProperty(d)&&(m!=null||D!=null))switch(d){case"value":K=m;break;case"defaultValue":T=m;break;case"multiple":_=m;default:m!==D&&et(t,s,d,m,l,D)}s=T,a=_,l=X,K!=null?js(t,!!a,K,!1):!!l!=!!a&&(s!=null?js(t,!!a,s,!0):js(t,!!a,a?[]:"",!1));return;case"textarea":X=K=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:et(t,s,T,null,l,d)}for(_ in l)if(d=l[_],m=a[_],l.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":K=d;break;case"defaultValue":X=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&et(t,s,_,d,l,m)}$c(t,K,X);return;case"option":for(var me in a)if(K=a[me],a.hasOwnProperty(me)&&K!=null&&!l.hasOwnProperty(me))switch(me){case"selected":t.selected=!1;break;default:et(t,s,me,null,l,K)}for(D in l)if(K=l[D],X=a[D],l.hasOwnProperty(D)&&K!==X&&(K!=null||X!=null))switch(D){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:et(t,s,D,K,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)K=a[_e],a.hasOwnProperty(_e)&&K!=null&&!l.hasOwnProperty(_e)&&et(t,s,_e,null,l,K);for(G in l)if(K=l[G],X=a[G],l.hasOwnProperty(G)&&K!==X&&(K!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:et(t,s,G,K,l,X)}return;default:if(ja(s)){for(var tt in a)K=a[tt],a.hasOwnProperty(tt)&&K!==void 0&&!l.hasOwnProperty(tt)&&Tm(t,s,tt,void 0,l,K);for(Z in l)K=l[Z],X=a[Z],!l.hasOwnProperty(Z)||K===X||K===void 0&&X===void 0||Tm(t,s,Z,K,l,X);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&et(t,s,B,null,l,K);for(ne in l)K=l[ne],X=a[ne],!l.hasOwnProperty(ne)||K===X||K==null&&X==null||et(t,s,ne,K,l,X)}function Q0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],m=d.transferSize,_=d.initiatorType,T=d.duration;if(m&&T&&Q0(_)){for(_=0,T=d.responseEnd,l+=1;l<a.length;l++){var D=a[l],G=D.startTime;if(G>T)break;var Z=D.transferSize,ne=D.initiatorType;Z&&Q0(ne)&&(D=D.responseEnd,_+=Z*(D<T?1:(T-G)/(D-G)))}if(--l,s+=8*(m+_)/(d.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Sm=null,Am=null;function Ju(t){return t.nodeType===9?t:t.ownerDocument}function K0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y0(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Nm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rm=null;function jS(){var t=window.event;return t&&t.type==="popstate"?t===Rm?!1:(Rm=t,!0):(Rm=null,!1)}var $0=typeof setTimeout=="function"?setTimeout:void 0,OS=typeof clearTimeout=="function"?clearTimeout:void 0,X0=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof X0<"u"?function(t){return X0.resolve(null).then(t).catch(PS)}:$0;function PS(t){setTimeout(function(){throw t})}function nr(t){return t==="head"}function W0(t,s){var a=s,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),mo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Vl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Vl(a);for(var m=a.firstChild;m;){var _=m.nextSibling,T=m.nodeName;m[bi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Vl(t.ownerDocument.body);a=d}while(a);mo(s)}function J0(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Cm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cm(a),Ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function kS(t,s,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[bi])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=zn(t.nextSibling),t===null)break}return null}function VS(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=zn(t.nextSibling),t===null))return null;return t}function Z0(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=zn(t.nextSibling),t===null))return null;return t}function Im(t){return t.data==="$?"||t.data==="$~"}function Dm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function LS(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function zn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var jm=null;function e_(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return zn(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function t_(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function n_(t,s,a){switch(s=Ju(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Vl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ca(t)}var Bn=new Map,i_=new Set;function Zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ms=se.d;se.d={f:US,r:zS,D:BS,C:FS,L:qS,m:HS,X:QS,S:GS,M:KS};function US(){var t=ms.f(),s=Hu();return t||s}function zS(t){var s=In(t);s!==null&&s.tag===5&&s.type==="form"?bv(s):ms.r(t)}var uo=typeof document>"u"?null:document;function s_(t,s,a){var l=uo;if(l&&typeof s=="string"&&s){var d=ln(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),i_.has(d)||(i_.add(d),t={rel:t,crossOrigin:a,href:s},l.querySelector(d)===null&&(s=l.createElement("link"),Kt(s,"link",t),Et(s),l.head.appendChild(s)))}}function BS(t){ms.D(t),s_("dns-prefetch",t,null)}function FS(t,s){ms.C(t,s),s_("preconnect",t,s)}function qS(t,s,a){ms.L(t,s,a);var l=uo;if(l&&t&&s){var d='link[rel="preload"][as="'+ln(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+ln(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+ln(a.imageSizes)+'"]')):d+='[href="'+ln(t)+'"]';var m=d;switch(s){case"style":m=ho(t);break;case"script":m=fo(t)}Bn.has(m)||(t=x({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Bn.set(m,t),l.querySelector(d)!==null||s==="style"&&l.querySelector(Ll(m))||s==="script"&&l.querySelector(Ul(m))||(s=l.createElement("link"),Kt(s,"link",t),Et(s),l.head.appendChild(s)))}}function HS(t,s){ms.m(t,s);var a=uo;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+ln(l)+'"][href="'+ln(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=fo(t)}if(!Bn.has(m)&&(t=x({rel:"modulepreload",href:t},s),Bn.set(m,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ul(m)))return}l=a.createElement("link"),Kt(l,"link",t),Et(l),a.head.appendChild(l)}}}function GS(t,s,a){ms.S(t,s,a);var l=uo;if(l&&t){var d=wi(l).hoistableStyles,m=ho(t);s=s||"default";var _=d.get(m);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Ll(m)))T.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Bn.get(m))&&Om(t,a);var D=_=l.createElement("link");Et(D),Kt(D,"link",t),D._p=new Promise(function(G,Z){D.onload=G,D.onerror=Z}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,eh(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:T},d.set(m,_)}}}function QS(t,s){ms.X(t,s);var a=uo;if(a&&t){var l=wi(a).hoistableScripts,d=fo(t),m=l.get(d);m||(m=a.querySelector(Ul(d)),m||(t=x({src:t,async:!0},s),(s=Bn.get(d))&&Mm(t,s),m=a.createElement("script"),Et(m),Kt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function KS(t,s){ms.M(t,s);var a=uo;if(a&&t){var l=wi(a).hoistableScripts,d=fo(t),m=l.get(d);m||(m=a.querySelector(Ul(d)),m||(t=x({src:t,async:!0,type:"module"},s),(s=Bn.get(d))&&Mm(t,s),m=a.createElement("script"),Et(m),Kt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function r_(t,s,a,l){var d=(d=Ae.current)?Zu(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=ho(a.href),a=wi(d).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ho(a.href);var m=wi(d).hoistableStyles,_=m.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=d.querySelector(Ll(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Bn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(t,a),m||YS(d,t,a,_.state))),s&&l===null)throw Error(r(528,""));return _}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=fo(a),a=wi(d).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function ho(t){return'href="'+ln(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function a_(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function YS(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Kt(s,"link",a),Et(s),t.head.appendChild(s))}function fo(t){return'[src="'+ln(t)+'"]'}function Ul(t){return"script[async]"+t}function o_(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+ln(a.href)+'"]');if(l)return s.instance=l,Et(l),l;var d=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Et(l),Kt(l,"style",d),eh(l,a.precedence,t),s.instance=l;case"stylesheet":d=ho(a.href);var m=t.querySelector(Ll(d));if(m)return s.state.loading|=4,s.instance=m,Et(m),m;l=a_(a),(d=Bn.get(d))&&Om(l,d),m=(t.ownerDocument||t).createElement("link"),Et(m);var _=m;return _._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),Kt(m,"link",l),s.state.loading|=4,eh(m,a.precedence,t),s.instance=m;case"script":return m=fo(a.src),(d=t.querySelector(Ul(m)))?(s.instance=d,Et(d),d):(l=a,(d=Bn.get(m))&&(l=x({},a),Mm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),Et(d),Kt(d,"link",l),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,eh(l,a.precedence,t));return s.instance}function eh(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===s)m=T;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Om(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Mm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var th=null;function l_(t,s,a){if(th===null){var l=new Map,d=th=new Map;d.set(a,l)}else d=th,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[bi]||m[wt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var T=l.get(_);T?T.push(m):l.set(_,[m])}}return l}function c_(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function $S(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function u_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function XS(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=ho(l.href),m=s.querySelector(Ll(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=nh.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Et(m);return}m=s.ownerDocument||s,l=a_(l),(d=Bn.get(d))&&Om(l,d),m=m.createElement("link"),Et(m);var _=m;_._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),Kt(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=nh.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Pm=0;function WS(t,s){return t.stylesheets&&t.count===0&&sh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&sh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Pm===0&&(Pm=62500*DS());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&sh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Pm?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function nh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ih=null;function sh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ih=new Map,s.forEach(JS,t),ih=null,nh.call(t))}function JS(t,s){if(!(s.state.loading&4)){var a=ih.get(t);if(a)var l=a.get(null);else{a=new Map,ih.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=s.instance,_=d.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,d),a.set(_,d),this.count++,l=nh.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var zl={$$typeof:W,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function ZS(t,s,a,l,d,m,_,T,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function h_(t,s,a,l,d,m,_,T,D,G,Z,ne){return t=new ZS(t,s,a,_,D,G,Z,ne,T),s=1,m===!0&&(s|=24),m=wn(3,null,null,s),t.current=m,m.stateNode=t,s=mf(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},vf(m),t}function d_(t){return t?(t=qa,t):qa}function f_(t,s,a,l,d,m){d=d_(d),l.context===null?l.context=d:l.pendingContext=d,l=Gs(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Qs(t,l,s),a!==null&&(mn(a,t,s),vl(a,t,s))}function m_(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function km(t,s){m_(t,s),(t=t.alternate)&&m_(t,s)}function p_(t){if(t.tag===13||t.tag===31){var s=$r(t,67108864);s!==null&&mn(s,t,67108864),km(t,67108864)}}function g_(t){if(t.tag===13||t.tag===31){var s=Nn();s=Vr(s);var a=$r(t,s);a!==null&&mn(a,t,s),km(t,s)}}var rh=!0;function e1(t,s,a,l){var d=Y.T;Y.T=null;var m=se.p;try{se.p=2,Vm(t,s,a,l)}finally{se.p=m,Y.T=d}}function t1(t,s,a,l){var d=Y.T;Y.T=null;var m=se.p;try{se.p=8,Vm(t,s,a,l)}finally{se.p=m,Y.T=d}}function Vm(t,s,a,l){if(rh){var d=Lm(l);if(d===null)Em(t,s,l,ah,a),v_(t,l);else if(i1(d,t,s,a,l))l.stopPropagation();else if(v_(t,l),s&4&&-1<n1.indexOf(t)){for(;d!==null;){var m=In(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=gi(m.pendingLanes);if(_!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var D=1<<31-pt(_);T.entanglements[1]|=D,_&=~D}Pi(m),(Ke&6)===0&&(Fu=nn()+500,Ml(0))}}break;case 31:case 13:T=$r(m,2),T!==null&&mn(T,m,2),Hu(),km(m,2)}if(m=Lm(l),m===null&&Em(t,s,l,ah,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else Em(t,s,l,null,a)}}function Lm(t){return t=Dn(t),Um(t)}var ah=null;function Um(t){if(ah=null,t=xi(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=u(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return ah=t,null}function y_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Or()){case qo:return 2;case Ho:return 8;case Is:case Hd:return 32;case Lc:return 268435456;default:return 32}default:return 32}}var zm=!1,ir=null,sr=null,rr=null,Bl=new Map,Fl=new Map,ar=[],n1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v_(t,s){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Bl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(s.pointerId)}}function ql(t,s,a,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},s!==null&&(s=In(s),s!==null&&p_(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function i1(t,s,a,l,d){switch(s){case"focusin":return ir=ql(ir,t,s,a,l,d),!0;case"dragenter":return sr=ql(sr,t,s,a,l,d),!0;case"mouseover":return rr=ql(rr,t,s,a,l,d),!0;case"pointerover":var m=d.pointerId;return Bl.set(m,ql(Bl.get(m)||null,t,s,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,Fl.set(m,ql(Fl.get(m)||null,t,s,a,l,d)),!0}return!1}function __(t){var s=xi(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){t.blockedOn=s,Wn(t.priority,function(){g_(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,Wn(t.priority,function(){g_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Lm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);nl=l,a.target.dispatchEvent(l),nl=null}else return s=In(a),s!==null&&p_(s),t.blockedOn=a,!1;s.shift()}return!0}function b_(t,s,a){oh(t)&&a.delete(s)}function s1(){zm=!1,ir!==null&&oh(ir)&&(ir=null),sr!==null&&oh(sr)&&(sr=null),rr!==null&&oh(rr)&&(rr=null),Bl.forEach(b_),Fl.forEach(b_)}function lh(t,s){t.blockedOn===s&&(t.blockedOn=null,zm||(zm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,s1)))}var ch=null;function x_(t){ch!==t&&(ch=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ch===t&&(ch=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],d=t[s+2];if(typeof l!="function"){if(Um(l||a)===null)continue;break}var m=In(a);m!==null&&(t.splice(s,3),s-=3,Lf(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function mo(t){function s(D){return lh(D,t)}ir!==null&&lh(ir,t),sr!==null&&lh(sr,t),rr!==null&&lh(rr,t),Bl.forEach(s),Fl.forEach(s);for(var a=0;a<ar.length;a++){var l=ar[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ar.length&&(a=ar[0],a.blockedOn===null);)__(a),a.blockedOn===null&&ar.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],_=d[Lt]||null;if(typeof m=="function")_||x_(a);else if(_){var T=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[Lt]||null)T=_.formAction;else if(Um(d)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),x_(a)}}}function w_(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Bm(t){this._internalRoot=t}uh.prototype.render=Bm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=Nn();f_(a,l,t,s,null,null)},uh.prototype.unmount=Bm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;f_(t.current,2,null,t,null,null),Hu(),s[_i]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var s=Hc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<ar.length&&s!==0&&s<ar[a].priority;a++);ar.splice(a,0,t),a===0&&__(t)}};var E_=e.version;if(E_!=="19.2.0")throw Error(r(527,E_,"19.2.0"));se.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var r1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{$n=hh.inject(r1),Ft=hh}catch{}}return Gl.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",d=Iv,m=Dv,_=jv;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=h_(t,1,!1,null,null,a,l,null,d,m,_,w_),t[_i]=s.current,wm(t),new Bm(s)},Gl.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,d="",m=Iv,_=Dv,T=jv,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),s=h_(t,1,!0,s,a??null,l,d,D,m,_,T,w_),s.context=d_(null),a=s.current,l=Nn(),l=Vr(l),d=Gs(l),d.callback=null,Qs(a,d,l),a=l,s.current.lanes=a,Pr(s,a),Pi(s),t[_i]=s.current,wm(t),new uh(s)},Gl.version="19.2.0",Gl}var O_;function p1(){if(O_)return Hm.exports;O_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hm.exports=m1(),Hm.exports}var g1=p1();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var M_="popstate";function y1(i={}){function e(r,o){let{pathname:c,search:u,hash:p}=r.location;return up("",{pathname:c,search:u,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:lc(o)}return _1(e,n,null,i)}function ut(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Qn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v1(){return Math.random().toString(36).substring(2,10)}function P_(i,e){return{usr:i.state,key:i.key,idx:e}}function up(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Io(e):e,state:n,key:e&&e.key||r||v1()}}function lc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Io(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function _1(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,u=o.history,p="POP",g=null,y=b();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function b(){return(u.state||{idx:null}).idx}function x(){p="POP";let k=b(),U=k==null?null:k-y;y=k,g&&g({action:p,location:V.location,delta:U})}function E(k,U){p="PUSH";let Q=up(V.location,k,U);y=b()+1;let W=P_(Q,y),re=V.createHref(Q);try{u.pushState(W,"",re)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;o.location.assign(re)}c&&g&&g({action:p,location:V.location,delta:1})}function N(k,U){p="REPLACE";let Q=up(V.location,k,U);y=b();let W=P_(Q,y),re=V.createHref(Q);u.replaceState(W,"",re),c&&g&&g({action:p,location:V.location,delta:0})}function O(k){return b1(k)}let V={get action(){return p},get location(){return i(o,u)},listen(k){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(M_,x),g=k,()=>{o.removeEventListener(M_,x),g=null}},createHref(k){return e(o,k)},createURL:O,encodeLocation(k){let U=O(k);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:E,replace:N,go(k){return u.go(k)}};return V}function b1(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ut(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:lc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function jx(i,e,n="/"){return x1(i,e,n,!1)}function x1(i,e,n,r){let o=typeof e=="string"?Io(e):e,c=xs(o.pathname||"/",n);if(c==null)return null;let u=Ox(i);w1(u);let p=null;for(let g=0;p==null&&g<u.length;++g){let y=O1(c);p=D1(u[g],y,r)}return p}function Ox(i,e=[],n=[],r="",o=!1){let c=(u,p,g=o,y)=>{let b={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(r)&&g)return;ut(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length)}let x=vs([r,b.relativePath]),E=n.concat(b);u.children&&u.children.length>0&&(ut(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Ox(u.children,e,E,x,g)),!(u.path==null&&!u.index)&&e.push({path:x,score:C1(x,u.index),routesMeta:E})};return i.forEach((u,p)=>{if(u.path===""||!u.path?.includes("?"))c(u,p);else for(let g of Mx(u.path))c(u,p,!0,g)}),e}function Mx(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let u=Mx(r.join("/")),p=[];return p.push(...u.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...u),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function w1(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:I1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var E1=/^:[\w-]+$/,T1=3,S1=2,A1=1,N1=10,R1=-2,k_=i=>i==="*";function C1(i,e){let n=i.split("/"),r=n.length;return n.some(k_)&&(r+=R1),e&&(r+=S1),n.filter(o=>!k_(o)).reduce((o,c)=>o+(E1.test(c)?T1:c===""?A1:N1),r)}function I1(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function D1(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",u=[];for(let p=0;p<r.length;++p){let g=r[p],y=p===r.length-1,b=c==="/"?e:e.slice(c.length)||"/",x=Lh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),E=g.route;if(!x&&y&&n&&!r[r.length-1].route.index&&(x=Lh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!x)return null;Object.assign(o,x.params),u.push({params:o,pathname:vs([c,x.pathname]),pathnameBase:V1(vs([c,x.pathnameBase])),route:E}),x.pathnameBase!=="/"&&(c=vs([c,x.pathnameBase]))}return u}function Lh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=j1(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],u=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((y,{paramName:b,isOptional:x},E)=>{if(b==="*"){let O=p[E]||"";u=c.slice(0,c.length-O.length).replace(/(.)\/+$/,"$1")}const N=p[E];return x&&!N?y[b]=void 0:y[b]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:u,pattern:i}}function j1(i,e=!1,n=!0){Qn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function O1(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function xs(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}function M1(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?Io(i):i;return{pathname:n?n.startsWith("/")?n:P1(n,e):e,search:L1(r),hash:U1(o)}}function P1(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Ym(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k1(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gp(i){let e=k1(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Qp(i,e,n,r=!1){let o;typeof i=="string"?o=Io(i):(o={...i},ut(!o.pathname||!o.pathname.includes("?"),Ym("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),Ym("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),Ym("#","search","hash",o)));let c=i===""||o.pathname==="",u=c?"/":o.pathname,p;if(u==null)p=n;else{let x=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),x-=1;o.pathname=E.join("/")}p=x>=0?e[x]:"/"}let g=M1(o,p),y=u&&u!=="/"&&u.endsWith("/"),b=(c||u===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var vs=i=>i.join("/").replace(/\/\/+/g,"/"),V1=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),L1=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,U1=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function z1(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Px=["POST","PUT","PATCH","DELETE"];new Set(Px);var B1=["GET",...Px];new Set(B1);var Do=P.createContext(null);Do.displayName="DataRouter";var ld=P.createContext(null);ld.displayName="DataRouterState";P.createContext(!1);var kx=P.createContext({isTransitioning:!1});kx.displayName="ViewTransition";var F1=P.createContext(new Map);F1.displayName="Fetchers";var q1=P.createContext(null);q1.displayName="Await";var fi=P.createContext(null);fi.displayName="Navigation";var wc=P.createContext(null);wc.displayName="Location";var Ki=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ki.displayName="Route";var Kp=P.createContext(null);Kp.displayName="RouteError";function H1(i,{relative:e}={}){ut(jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(fi),{hash:o,pathname:c,search:u}=Tc(i,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:vs([n,c])),r.createHref({pathname:p,search:u,hash:o})}function jo(){return P.useContext(wc)!=null}function Ns(){return ut(jo(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(wc).location}var Vx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lx(i){P.useContext(fi).static||P.useLayoutEffect(i)}function Ec(){let{isDataRoute:i}=P.useContext(Ki);return i?iA():G1()}function G1(){ut(jo(),"useNavigate() may be used only in the context of a <Router> component.");let i=P.useContext(Do),{basename:e,navigator:n}=P.useContext(fi),{matches:r}=P.useContext(Ki),{pathname:o}=Ns(),c=JSON.stringify(Gp(r)),u=P.useRef(!1);return Lx(()=>{u.current=!0}),P.useCallback((g,y={})=>{if(Qn(u.current,Vx),!u.current)return;if(typeof g=="number"){n.go(g);return}let b=Qp(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:vs([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,c,o,i])}P.createContext(null);function Tc(i,{relative:e}={}){let{matches:n}=P.useContext(Ki),{pathname:r}=Ns(),o=JSON.stringify(Gp(n));return P.useMemo(()=>Qp(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function Q1(i,e){return Ux(i,e)}function Ux(i,e,n,r,o){ut(jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=P.useContext(fi),{matches:u}=P.useContext(Ki),p=u[u.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",x=p&&p.route;{let Q=x&&x.path||"";zx(y,!x||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let E=Ns(),N;if(e){let Q=typeof e=="string"?Io(e):e;ut(b==="/"||Q.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),N=Q}else N=E;let O=N.pathname||"/",V=O;if(b!=="/"){let Q=b.replace(/^\//,"").split("/");V="/"+O.replace(/^\//,"").split("/").slice(Q.length).join("/")}let k=jx(i,{pathname:V});Qn(x||k!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Qn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=W1(k&&k.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:vs([b,c.encodeLocation?c.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?b:vs([b,c.encodeLocation?c.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),u,n,r,o);return e&&U?P.createElement(wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},U):U}function K1(){let i=nA(),e=z1(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:c},"ErrorBoundary")," or"," ",P.createElement("code",{style:c},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:o},n):null,u)}var Y1=P.createElement(K1,null),$1=class extends P.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?P.createElement(Ki.Provider,{value:this.props.routeContext},P.createElement(Kp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function X1({routeContext:i,match:e,children:n}){let r=P.useContext(Do);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Ki.Provider,{value:i},n)}function W1(i,e=[],n=null,r=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,u=n?.errors;if(u!=null){let y=c.findIndex(b=>b.route.id&&u?.[b.route.id]!==void 0);ut(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<c.length;y++){let b=c[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(g=y),b.route.id){let{loaderData:x,errors:E}=n,N=b.route.loader&&!x.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||N){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,b,x)=>{let E,N=!1,O=null,V=null;n&&(E=u&&b.route.id?u[b.route.id]:void 0,O=b.route.errorElement||Y1,p&&(g<0&&x===0?(zx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,V=null):g===x&&(N=!0,V=b.route.hydrateFallbackElement||null)));let k=e.concat(c.slice(0,x+1)),U=()=>{let Q;return E?Q=O:N?Q=V:b.route.Component?Q=P.createElement(b.route.Component,null):b.route.element?Q=b.route.element:Q=y,P.createElement(X1,{match:b,routeContext:{outlet:y,matches:k,isDataRoute:n!=null},children:Q})};return n&&(b.route.ErrorBoundary||b.route.errorElement||x===0)?P.createElement($1,{location:n.location,revalidation:n.revalidation,component:O,error:E,children:U(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:r}):U()},null)}function Yp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J1(i){let e=P.useContext(Do);return ut(e,Yp(i)),e}function Z1(i){let e=P.useContext(ld);return ut(e,Yp(i)),e}function eA(i){let e=P.useContext(Ki);return ut(e,Yp(i)),e}function $p(i){let e=eA(i),n=e.matches[e.matches.length-1];return ut(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function tA(){return $p("useRouteId")}function nA(){let i=P.useContext(Kp),e=Z1("useRouteError"),n=$p("useRouteError");return i!==void 0?i:e.errors?.[n]}function iA(){let{router:i}=J1("useNavigate"),e=$p("useNavigate"),n=P.useRef(!1);return Lx(()=>{n.current=!0}),P.useCallback(async(o,c={})=>{Qn(n.current,Vx),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var V_={};function zx(i,e,n){!e&&!V_[i]&&(V_[i]=!0,Qn(!1,n))}P.memo(sA);function sA({routes:i,future:e,state:n,unstable_onError:r}){return Ux(i,void 0,n,r,e)}function hp({to:i,replace:e,state:n,relative:r}){ut(jo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=P.useContext(fi);Qn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=P.useContext(Ki),{pathname:u}=Ns(),p=Ec(),g=Qp(i,Gp(c),u,r==="path"),y=JSON.stringify(g);return P.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:r})},[p,y,r,e,n]),null}function an(i){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rA({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){ut(!jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),p=P.useMemo(()=>({basename:u,navigator:o,static:c,future:{}}),[u,o,c]);typeof n=="string"&&(n=Io(n));let{pathname:g="/",search:y="",hash:b="",state:x=null,key:E="default"}=n,N=P.useMemo(()=>{let O=xs(g,u);return O==null?null:{location:{pathname:O,search:y,hash:b,state:x,key:E},navigationType:r}},[u,g,y,b,x,E,r]);return Qn(N!=null,`<Router basename="${u}"> is not able to match the URL "${g}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:P.createElement(fi.Provider,{value:p},P.createElement(wc.Provider,{children:e,value:N}))}function aA({children:i,location:e}){return Q1(dp(i),e)}function dp(i,e=[]){let n=[];return P.Children.forEach(i,(r,o)=>{if(!P.isValidElement(r))return;let c=[...e,o];if(r.type===P.Fragment){n.push.apply(n,dp(r.props.children,c));return}ut(r.type===an,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=dp(r.props.children,c)),n.push(u)}),n}var Sh="get",Ah="application/x-www-form-urlencoded";function cd(i){return i!=null&&typeof i.tagName=="string"}function oA(i){return cd(i)&&i.tagName.toLowerCase()==="button"}function lA(i){return cd(i)&&i.tagName.toLowerCase()==="form"}function cA(i){return cd(i)&&i.tagName.toLowerCase()==="input"}function uA(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function hA(i,e){return i.button===0&&(!e||e==="_self")&&!uA(i)}function fp(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,n)=>{let r=i[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function dA(i,e){let n=fp(i);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(c=>{n.append(o,c)})}),n}var dh=null;function fA(){if(dh===null)try{new FormData(document.createElement("form"),0),dh=!1}catch{dh=!0}return dh}var mA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $m(i){return i!=null&&!mA.has(i)?(Qn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ah}"`),null):i}function pA(i,e){let n,r,o,c,u;if(lA(i)){let p=i.getAttribute("action");r=p?xs(p,e):null,n=i.getAttribute("method")||Sh,o=$m(i.getAttribute("enctype"))||Ah,c=new FormData(i)}else if(oA(i)||cA(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||p.getAttribute("action");if(r=g?xs(g,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||Sh,o=$m(i.getAttribute("formenctype"))||$m(p.getAttribute("enctype"))||Ah,c=new FormData(p,i),!fA()){let{name:y,type:b,value:x}=i;if(b==="image"){let E=y?`${y}.`:"";c.append(`${E}x`,"0"),c.append(`${E}y`,"0")}else y&&c.append(y,x)}}else{if(cd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Sh,r=null,o=Ah,u=i}return c&&o==="text/plain"&&(u=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function gA(i,e,n){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&xs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function yA(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vA(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function _A(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let u=await yA(c,n);return u.links?u.links():[]}return[]}));return EA(r.flat(1).filter(vA).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function L_(i,e,n,r,o,c){let u=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>u(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{let b=r.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(u(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function bA(i,e,{includeHydrateFallback:n}={}){return xA(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function xA(i){return[...new Set(i)]}function wA(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function EA(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(wA(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}function Bx(){let i=P.useContext(Do);return Xp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function TA(){let i=P.useContext(ld);return Xp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Wp=P.createContext(void 0);Wp.displayName="FrameworkContext";function Fx(){let i=P.useContext(Wp);return Xp(i,"You must render this element inside a <HydratedRouter> element"),i}function SA(i,e){let n=P.useContext(Wp),[r,o]=P.useState(!1),[c,u]=P.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:x}=e,E=P.useRef(null);P.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let V=U=>{U.forEach(Q=>{u(Q.isIntersecting)})},k=new IntersectionObserver(V,{threshold:.5});return E.current&&k.observe(E.current),()=>{k.disconnect()}}},[i]),P.useEffect(()=>{if(r){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[r]);let N=()=>{o(!0)},O=()=>{o(!1),u(!1)};return n?i!=="intent"?[c,E,{}]:[c,E,{onFocus:Ql(p,N),onBlur:Ql(g,O),onMouseEnter:Ql(y,N),onMouseLeave:Ql(b,O),onTouchStart:Ql(x,N)}]:[!1,E,{}]}function Ql(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function AA({page:i,...e}){let{router:n}=Bx(),r=P.useMemo(()=>jx(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?P.createElement(RA,{page:i,matches:r,...e}):null}function NA(i){let{manifest:e,routeModules:n}=Fx(),[r,o]=P.useState([]);return P.useEffect(()=>{let c=!1;return _A(i,e,n).then(u=>{c||o(u)}),()=>{c=!0}},[i,e,n]),r}function RA({page:i,matches:e,...n}){let r=Ns(),{manifest:o,routeModules:c}=Fx(),{basename:u}=Bx(),{loaderData:p,matches:g}=TA(),y=P.useMemo(()=>L_(i,e,g,o,r,"data"),[i,e,g,o,r]),b=P.useMemo(()=>L_(i,e,g,o,r,"assets"),[i,e,g,o,r]),x=P.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let O=new Set,V=!1;if(e.forEach(U=>{let Q=o.routes[U.route.id];!Q||!Q.hasLoader||(!y.some(W=>W.route.id===U.route.id)&&U.route.id in p&&c[U.route.id]?.shouldRevalidate||Q.hasClientLoader?V=!0:O.add(U.route.id))}),O.size===0)return[];let k=gA(i,u,"data");return V&&O.size>0&&k.searchParams.set("_routes",e.filter(U=>O.has(U.route.id)).map(U=>U.route.id).join(",")),[k.pathname+k.search]},[u,p,r,o,y,e,i,c]),E=P.useMemo(()=>bA(b,o),[b,o]),N=NA(b);return P.createElement(P.Fragment,null,x.map(O=>P.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...n})),E.map(O=>P.createElement("link",{key:O,rel:"modulepreload",href:O,...n})),N.map(({key:O,link:V})=>P.createElement("link",{key:O,nonce:n.nonce,...V})))}function CA(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var qx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qx&&(window.__reactRouterVersion="7.9.3")}catch{}function IA({basename:i,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=y1({window:n,v5Compat:!0}));let o=r.current,[c,u]=P.useState({action:o.action,location:o.location}),p=P.useCallback(g=>{P.startTransition(()=>u(g))},[u]);return P.useLayoutEffect(()=>o.listen(p),[o,p]),P.createElement(rA,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var Hx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:u,state:p,target:g,to:y,preventScrollReset:b,viewTransition:x,...E},N){let{basename:O}=P.useContext(fi),V=typeof y=="string"&&Hx.test(y),k,U=!1;if(typeof y=="string"&&V&&(k=y,qx))try{let R=new URL(window.location.href),z=y.startsWith("//")?new URL(R.protocol+y):new URL(y),M=xs(z.pathname,O);z.origin===R.origin&&M!=null?y=M+z.search+z.hash:U=!0}catch{Qn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=H1(y,{relative:o}),[W,re,oe]=SA(r,E),ue=MA(y,{replace:u,state:p,target:g,preventScrollReset:b,relative:o,viewTransition:x});function C(R){e&&e(R),R.defaultPrevented||ue(R)}let A=P.createElement("a",{...E,...oe,href:k||Q,onClick:U||c?e:C,ref:CA(N,re),target:g,"data-discover":!V&&n==="render"?"true":void 0});return W&&!V?P.createElement(P.Fragment,null,A,P.createElement(AA,{page:Q})):A});Ve.displayName="Link";var DA=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:u,viewTransition:p,children:g,...y},b){let x=Tc(u,{relative:y.relative}),E=Ns(),N=P.useContext(ld),{navigator:O,basename:V}=P.useContext(fi),k=N!=null&&zA(x)&&p===!0,U=O.encodeLocation?O.encodeLocation(x).pathname:x.pathname,Q=E.pathname,W=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(Q=Q.toLowerCase(),W=W?W.toLowerCase():null,U=U.toLowerCase()),W&&V&&(W=xs(W,V)||W);const re=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let oe=Q===U||!o&&Q.startsWith(U)&&Q.charAt(re)==="/",ue=W!=null&&(W===U||!o&&W.startsWith(U)&&W.charAt(U.length)==="/"),C={isActive:oe,isPending:ue,isTransitioning:k},A=oe?e:void 0,R;typeof r=="function"?R=r(C):R=[r,oe?"active":null,ue?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let z=typeof c=="function"?c(C):c;return P.createElement(Ve,{...y,"aria-current":A,className:R,ref:b,style:z,to:u,viewTransition:p},typeof g=="function"?g(C):g)});DA.displayName="NavLink";var jA=P.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:u=Sh,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:x,...E},N)=>{let O=LA(),V=UA(p,{relative:y}),k=u.toLowerCase()==="get"?"get":"post",U=typeof p=="string"&&Hx.test(p),Q=W=>{if(g&&g(W),W.defaultPrevented)return;W.preventDefault();let re=W.nativeEvent.submitter,oe=re?.getAttribute("formmethod")||u;O(re||W.currentTarget,{fetcherKey:e,method:oe,navigate:n,replace:o,state:c,relative:y,preventScrollReset:b,viewTransition:x})};return P.createElement("form",{ref:N,method:k,action:V,onSubmit:r?g:Q,...E,"data-discover":!U&&i==="render"?"true":void 0})});jA.displayName="Form";function OA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gx(i){let e=P.useContext(Do);return ut(e,OA(i)),e}function MA(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:u}={}){let p=Ec(),g=Ns(),y=Tc(i,{relative:c});return P.useCallback(b=>{if(hA(b,e)){b.preventDefault();let x=n!==void 0?n:lc(g)===lc(y);p(i,{replace:x,state:r,preventScrollReset:o,relative:c,viewTransition:u})}},[g,p,y,n,r,e,i,o,c,u])}function PA(i){Qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(fp(i)),n=P.useRef(!1),r=Ns(),o=P.useMemo(()=>dA(r.search,n.current?null:e.current),[r.search]),c=Ec(),u=P.useCallback((p,g)=>{const y=fp(typeof p=="function"?p(new URLSearchParams(o)):p);n.current=!0,c("?"+y,g)},[c,o]);return[o,u]}var kA=0,VA=()=>`__${String(++kA)}__`;function LA(){let{router:i}=Gx("useSubmit"),{basename:e}=P.useContext(fi),n=tA();return P.useCallback(async(r,o={})=>{let{action:c,method:u,encType:p,formData:g,body:y}=pA(r,e);if(o.navigate===!1){let b=o.fetcherKey||VA();await i.fetch(b,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||u,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||u,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function UA(i,{relative:e}={}){let{basename:n}=P.useContext(fi),r=P.useContext(Ki);ut(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...Tc(i||".",{relative:e})},u=Ns();if(i==null){c.search=u.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(x=>x).forEach(x=>p.append("index",x));let b=p.toString();c.search=b?`?${b}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:vs([n,c.pathname])),lc(c)}function zA(i,{relative:e}={}){let n=P.useContext(kx);ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Gx("useViewTransitionState"),o=Tc(i,{relative:e});if(!n.isTransitioning)return!1;let c=xs(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=xs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lh(o.pathname,u)!=null||Lh(o.pathname,c)!=null}var ud=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(i){return this.listeners.add(i),this.onSubscribe(),()=>{this.listeners.delete(i),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},BA={setTimeout:(i,e)=>setTimeout(i,e),clearTimeout:i=>clearTimeout(i),setInterval:(i,e)=>setInterval(i,e),clearInterval:i=>clearInterval(i)},FA=class{#e=BA;#t=!1;setTimeoutProvider(i){this.#e=i}setTimeout(i,e){return this.#e.setTimeout(i,e)}clearTimeout(i){this.#e.clearTimeout(i)}setInterval(i,e){return this.#e.setInterval(i,e)}clearInterval(i){this.#e.clearInterval(i)}},mp=new FA;function qA(i){setTimeout(i,0)}var hd=typeof window>"u"||"Deno"in globalThis;function li(){}function HA(i,e){return typeof i=="function"?i(e):i}function GA(i){return typeof i=="number"&&i>=0&&i!==1/0}function QA(i,e){return Math.max(i+(e||0)-Date.now(),0)}function pp(i,e){return typeof i=="function"?i(e):i}function KA(i,e){return typeof i=="function"?i(e):i}function U_(i,e){const{type:n="all",exact:r,fetchStatus:o,predicate:c,queryKey:u,stale:p}=i;if(u){if(r){if(e.queryHash!==Jp(u,e.options))return!1}else if(!uc(e.queryKey,u))return!1}if(n!=="all"){const g=e.isActive();if(n==="active"&&!g||n==="inactive"&&g)return!1}return!(typeof p=="boolean"&&e.isStale()!==p||o&&o!==e.state.fetchStatus||c&&!c(e))}function z_(i,e){const{exact:n,status:r,predicate:o,mutationKey:c}=i;if(c){if(!e.options.mutationKey)return!1;if(n){if(cc(e.options.mutationKey)!==cc(c))return!1}else if(!uc(e.options.mutationKey,c))return!1}return!(r&&e.state.status!==r||o&&!o(e))}function Jp(i,e){return(e?.queryKeyHashFn||cc)(i)}function cc(i){return JSON.stringify(i,(e,n)=>gp(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function uc(i,e){return i===e?!0:typeof i!=typeof e?!1:i&&e&&typeof i=="object"&&typeof e=="object"?Object.keys(e).every(n=>uc(i[n],e[n])):!1}var YA=Object.prototype.hasOwnProperty;function Qx(i,e){if(i===e)return i;const n=B_(i)&&B_(e);if(!n&&!(gp(i)&&gp(e)))return e;const o=(n?i:Object.keys(i)).length,c=n?e:Object.keys(e),u=c.length,p=n?new Array(u):{};let g=0;for(let y=0;y<u;y++){const b=n?y:c[y],x=i[b],E=e[b];if(x===E){p[b]=x,(n?y<o:YA.call(i,b))&&g++;continue}if(x===null||E===null||typeof x!="object"||typeof E!="object"){p[b]=E;continue}const N=Qx(x,E);p[b]=N,N===x&&g++}return o===u&&g===o?i:p}function B_(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function gp(i){if(!F_(i))return!1;const e=i.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!F_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(i)!==Object.prototype)}function F_(i){return Object.prototype.toString.call(i)==="[object Object]"}function $A(i){return new Promise(e=>{mp.setTimeout(e,i)})}function XA(i,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(i,e):n.structuralSharing!==!1?Qx(i,e):e}function WA(i,e,n=0){const r=[...i,e];return n&&r.length>n?r.slice(1):r}function JA(i,e,n=0){const r=[e,...i];return n&&r.length>n?r.slice(0,-1):r}var Zp=Symbol();function Kx(i,e){return!i.queryFn&&e?.initialPromise?()=>e.initialPromise:!i.queryFn||i.queryFn===Zp?()=>Promise.reject(new Error(`Missing queryFn: '${i.queryHash}'`)):i.queryFn}var ZA=class extends ud{#e;#t;#n;constructor(){super(),this.#n=i=>{if(!hd&&window.addEventListener){const e=()=>i();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(i){this.#n=i,this.#t?.(),this.#t=i(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(i){this.#e!==i&&(this.#e=i,this.onFocus())}onFocus(){const i=this.isFocused();this.listeners.forEach(e=>{e(i)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Yx=new ZA;function eN(){let i,e;const n=new Promise((o,c)=>{i=o,e=c});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),i(o)},n.reject=o=>{r({status:"rejected",reason:o}),e(o)},n}var tN=qA;function nN(){let i=[],e=0,n=p=>{p()},r=p=>{p()},o=tN;const c=p=>{e?i.push(p):o(()=>{n(p)})},u=()=>{const p=i;i=[],p.length&&o(()=>{r(()=>{p.forEach(g=>{n(g)})})})};return{batch:p=>{let g;e++;try{g=p()}finally{e--,e||u()}return g},batchCalls:p=>(...g)=>{c(()=>{p(...g)})},schedule:c,setNotifyFunction:p=>{n=p},setBatchNotifyFunction:p=>{r=p},setScheduler:p=>{o=p}}}var on=nN(),iN=class extends ud{#e=!0;#t;#n;constructor(){super(),this.#n=i=>{if(!hd&&window.addEventListener){const e=()=>i(!0),n=()=>i(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(i){this.#n=i,this.#t?.(),this.#t=i(this.setOnline.bind(this))}setOnline(i){this.#e!==i&&(this.#e=i,this.listeners.forEach(n=>{n(i)}))}isOnline(){return this.#e}},Uh=new iN;function sN(i){return Math.min(1e3*2**i,3e4)}function $x(i){return(i??"online")==="online"?Uh.isOnline():!0}var yp=class extends Error{constructor(i){super("CancelledError"),this.revert=i?.revert,this.silent=i?.silent}};function Xx(i){let e=!1,n=0,r;const o=eN(),c=()=>o.status!=="pending",u=V=>{if(!c()){const k=new yp(V);E(k),i.onCancel?.(k)}},p=()=>{e=!0},g=()=>{e=!1},y=()=>Yx.isFocused()&&(i.networkMode==="always"||Uh.isOnline())&&i.canRun(),b=()=>$x(i.networkMode)&&i.canRun(),x=V=>{c()||(r?.(),o.resolve(V))},E=V=>{c()||(r?.(),o.reject(V))},N=()=>new Promise(V=>{r=k=>{(c()||y())&&V(k)},i.onPause?.()}).then(()=>{r=void 0,c()||i.onContinue?.()}),O=()=>{if(c())return;let V;const k=n===0?i.initialPromise:void 0;try{V=k??i.fn()}catch(U){V=Promise.reject(U)}Promise.resolve(V).then(x).catch(U=>{if(c())return;const Q=i.retry??(hd?0:3),W=i.retryDelay??sN,re=typeof W=="function"?W(n,U):W,oe=Q===!0||typeof Q=="number"&&n<Q||typeof Q=="function"&&Q(n,U);if(e||!oe){E(U);return}n++,i.onFail?.(n,U),$A(re).then(()=>y()?void 0:N()).then(()=>{e?E(U):O()})})};return{promise:o,status:()=>o.status,cancel:u,continue:()=>(r?.(),o),cancelRetry:p,continueRetry:g,canStart:b,start:()=>(b()?O():N().then(O),o)}}var Wx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),GA(this.gcTime)&&(this.#e=mp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(i){this.gcTime=Math.max(this.gcTime||0,i??(hd?1/0:300*1e3))}clearGcTimeout(){this.#e&&(mp.clearTimeout(this.#e),this.#e=void 0)}},rN=class extends Wx{#e;#t;#n;#s;#i;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=q_(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=q_(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const r=XA(this.state.data,e,this.options);return this.#r({data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){this.#r({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#i?.promise;return this.#i?.cancel(e),n?n.then(li).catch(li):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>KA(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>pp(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!QA(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(y=>y.options.queryFn);g&&this.setOptions(g.options)}const r=new AbortController,o=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},c=()=>{const g=Kx(this.options,n),b=(()=>{const x={client:this.#s,queryKey:this.queryKey,meta:this.meta};return o(x),x})();return this.#o=!1,this.options.persister?this.options.persister(g,b,this):g(b)},p=(()=>{const g={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:c};return o(g),g})();this.options.behavior?.onFetch(p,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==p.fetchOptions?.meta)&&this.#r({type:"fetch",meta:p.fetchOptions?.meta}),this.#i=Xx({initialPromise:n?.initialPromise,fn:p.fetchFn,onCancel:g=>{g instanceof yp&&g.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(g,y)=>{this.#r({type:"failed",failureCount:g,error:y})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:p.options.retry,retryDelay:p.options.retryDelay,networkMode:p.options.networkMode,canRun:()=>!0});try{const g=await this.#i.start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),this.#n.config.onSuccess?.(g,this),this.#n.config.onSettled?.(g,this.state.error,this),g}catch(g){if(g instanceof yp){if(g.silent)return this.#i.promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw this.#r({type:"error",error:g}),this.#n.config.onError?.(g,this),this.#n.config.onSettled?.(this.state.data,g,this),g}finally{this.scheduleGc()}}#r(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...aN(r.data,this.options),fetchMeta:e.meta??null};case"success":const o={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?o:void 0,o;case"error":const c=e.error;return{...r,error:c,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),on.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function aN(i,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$x(e.networkMode)?"fetching":"paused",...i===void 0&&{error:null,status:"pending"}}}function q_(i){const e=typeof i.initialData=="function"?i.initialData():i.initialData,n=e!==void 0,r=n?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function H_(i){return{onFetch:(e,n)=>{const r=e.options,o=e.fetchOptions?.meta?.fetchMore?.direction,c=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let p={pages:[],pageParams:[]},g=0;const y=async()=>{let b=!1;const x=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},E=Kx(e.options,e.fetchOptions),N=async(O,V,k)=>{if(b)return Promise.reject();if(V==null&&O.pages.length)return Promise.resolve(O);const Q=(()=>{const ue={client:e.client,queryKey:e.queryKey,pageParam:V,direction:k?"backward":"forward",meta:e.options.meta};return x(ue),ue})(),W=await E(Q),{maxPages:re}=e.options,oe=k?JA:WA;return{pages:oe(O.pages,W,re),pageParams:oe(O.pageParams,V,re)}};if(o&&c.length){const O=o==="backward",V=O?oN:G_,k={pages:c,pageParams:u},U=V(r,k);p=await N(k,U,O)}else{const O=i??c.length;do{const V=g===0?u[0]??r.initialPageParam:G_(r,p);if(g>0&&V==null)break;p=await N(p,V),g++}while(g<O)}return p};e.options.persister?e.fetchFn=()=>e.options.persister?.(y,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=y}}}function G_(i,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?i.getNextPageParam(e[r],e,n[r],n):void 0}function oN(i,{pages:e,pageParams:n}){return e.length>0?i.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var lN=class extends Wx{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||cN(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#i({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Xx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(u,p)=>{this.#i({type:"failed",failureCount:u,error:p})},onPause:()=>{this.#i({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const o=this.state.status==="pending",c=!this.#s.canStart();try{if(o)n();else{this.#i({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,r);const p=await this.options.onMutate?.(e,r);p!==this.state.context&&this.#i({type:"pending",context:p,variables:e,isPaused:c})}const u=await this.#s.start();return await this.#n.config.onSuccess?.(u,e,this.state.context,this,r),await this.options.onSuccess?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(u,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(u,null,e,this.state.context,r),this.#i({type:"success",data:u}),u}catch(u){try{throw await this.#n.config.onError?.(u,e,this.state.context,this,r),await this.options.onError?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(void 0,u,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,u,e,this.state.context,r),u}finally{this.#i({type:"error",error:u})}}finally{this.#n.runNext(this)}}#i(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),on.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function cN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var uN=class extends ud{constructor(i={}){super(),this.config=i,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(i,e,n){const r=new lN({client:i,mutationCache:this,mutationId:++this.#n,options:i.defaultMutationOptions(e),state:n});return this.add(r),r}add(i){this.#e.add(i);const e=fh(i);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(i):this.#t.set(e,[i])}this.notify({type:"added",mutation:i})}remove(i){if(this.#e.delete(i)){const e=fh(i);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(i);r!==-1&&n.splice(r,1)}else n[0]===i&&this.#t.delete(e)}}this.notify({type:"removed",mutation:i})}canRun(i){const e=fh(i);if(typeof e=="string"){const r=this.#t.get(e)?.find(o=>o.state.status==="pending");return!r||r===i}else return!0}runNext(i){const e=fh(i);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==i&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){on.batch(()=>{this.#e.forEach(i=>{this.notify({type:"removed",mutation:i})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(i){const e={exact:!0,...i};return this.getAll().find(n=>z_(e,n))}findAll(i={}){return this.getAll().filter(e=>z_(i,e))}notify(i){on.batch(()=>{this.listeners.forEach(e=>{e(i)})})}resumePausedMutations(){const i=this.getAll().filter(e=>e.state.isPaused);return on.batch(()=>Promise.all(i.map(e=>e.continue().catch(li))))}};function fh(i){return i.options.scope?.id}var hN=class extends ud{constructor(i={}){super(),this.config=i,this.#e=new Map}#e;build(i,e,n){const r=e.queryKey,o=e.queryHash??Jp(r,e);let c=this.get(o);return c||(c=new rN({client:i,queryKey:r,queryHash:o,options:i.defaultQueryOptions(e),state:n,defaultOptions:i.getQueryDefaults(r)}),this.add(c)),c}add(i){this.#e.has(i.queryHash)||(this.#e.set(i.queryHash,i),this.notify({type:"added",query:i}))}remove(i){const e=this.#e.get(i.queryHash);e&&(i.destroy(),e===i&&this.#e.delete(i.queryHash),this.notify({type:"removed",query:i}))}clear(){on.batch(()=>{this.getAll().forEach(i=>{this.remove(i)})})}get(i){return this.#e.get(i)}getAll(){return[...this.#e.values()]}find(i){const e={exact:!0,...i};return this.getAll().find(n=>U_(e,n))}findAll(i={}){const e=this.getAll();return Object.keys(i).length>0?e.filter(n=>U_(i,n)):e}notify(i){on.batch(()=>{this.listeners.forEach(e=>{e(i)})})}onFocus(){on.batch(()=>{this.getAll().forEach(i=>{i.onFocus()})})}onOnline(){on.batch(()=>{this.getAll().forEach(i=>{i.onOnline()})})}},dN=class{#e;#t;#n;#s;#i;#a;#o;#r;constructor(i={}){this.#e=i.queryCache||new hN,this.#t=i.mutationCache||new uN,this.#n=i.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=Yx.subscribe(async i=>{i&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=Uh.subscribe(async i=>{i&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#r?.(),this.#r=void 0)}isFetching(i){return this.#e.findAll({...i,fetchStatus:"fetching"}).length}isMutating(i){return this.#t.findAll({...i,status:"pending"}).length}getQueryData(i){const e=this.defaultQueryOptions({queryKey:i});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(i){const e=this.defaultQueryOptions(i),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(i):(i.revalidateIfStale&&n.isStaleByTime(pp(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(i){return this.#e.findAll(i).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(i,e,n){const r=this.defaultQueryOptions({queryKey:i}),c=this.#e.get(r.queryHash)?.state.data,u=HA(e,c);if(u!==void 0)return this.#e.build(this,r).setData(u,{...n,manual:!0})}setQueriesData(i,e,n){return on.batch(()=>this.#e.findAll(i).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(i){const e=this.defaultQueryOptions({queryKey:i});return this.#e.get(e.queryHash)?.state}removeQueries(i){const e=this.#e;on.batch(()=>{e.findAll(i).forEach(n=>{e.remove(n)})})}resetQueries(i,e){const n=this.#e;return on.batch(()=>(n.findAll(i).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...i},e)))}cancelQueries(i,e={}){const n={revert:!0,...e},r=on.batch(()=>this.#e.findAll(i).map(o=>o.cancel(n)));return Promise.all(r).then(li).catch(li)}invalidateQueries(i,e={}){return on.batch(()=>(this.#e.findAll(i).forEach(n=>{n.invalidate()}),i?.refetchType==="none"?Promise.resolve():this.refetchQueries({...i,type:i?.refetchType??i?.type??"active"},e)))}refetchQueries(i,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=on.batch(()=>this.#e.findAll(i).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let c=o.fetch(void 0,n);return n.throwOnError||(c=c.catch(li)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(r).then(li)}fetchQuery(i){const e=this.defaultQueryOptions(i);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(pp(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(i){return this.fetchQuery(i).then(li).catch(li)}fetchInfiniteQuery(i){return i.behavior=H_(i.pages),this.fetchQuery(i)}prefetchInfiniteQuery(i){return this.fetchInfiniteQuery(i).then(li).catch(li)}ensureInfiniteQueryData(i){return i.behavior=H_(i.pages),this.ensureQueryData(i)}resumePausedMutations(){return Uh.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(i){this.#n=i}setQueryDefaults(i,e){this.#s.set(cc(i),{queryKey:i,defaultOptions:e})}getQueryDefaults(i){const e=[...this.#s.values()],n={};return e.forEach(r=>{uc(i,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(i,e){this.#i.set(cc(i),{mutationKey:i,defaultOptions:e})}getMutationDefaults(i){const e=[...this.#i.values()],n={};return e.forEach(r=>{uc(i,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(i){if(i._defaulted)return i;const e={...this.#n.queries,...this.getQueryDefaults(i.queryKey),...i,_defaulted:!0};return e.queryHash||(e.queryHash=Jp(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Zp&&(e.enabled=!1),e}defaultMutationOptions(i){return i?._defaulted?i:{...this.#n.mutations,...i?.mutationKey&&this.getMutationDefaults(i.mutationKey),...i,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},fN=P.createContext(void 0),mN=({client:i,children:e})=>(P.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]),f.jsx(fN.Provider,{value:i,children:e}));const pN=()=>{};var Q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},gN=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],u=i[n++],p=i[n++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],u=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},Zx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,p=u?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,b=c>>2,x=(c&3)<<4|p>>4;let E=(p&15)<<2|y>>6,N=y&63;g||(N=64,u||(E=64)),r.push(n[b],n[x],n[E],n[N])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Jx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):gN(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const x=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||y==null||x==null)throw new yN;const E=c<<2|p>>4;if(r.push(E),y!==64){const N=p<<4&240|y>>2;if(r.push(N),x!==64){const O=y<<6&192|x;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class yN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vN=function(i){const e=Jx(i);return Zx.encodeByteArray(e,!0)},zh=function(i){return vN(i).replace(/\./g,"")},ew=function(i){try{return Zx.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=()=>_N().__FIREBASE_DEFAULTS__,xN=()=>{if(typeof process>"u"||typeof Q_>"u")return;const i=Q_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},wN=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ew(i[1]);return e&&JSON.parse(e)},dd=()=>{try{return pN()||bN()||xN()||wN()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},tw=i=>dd()?.emulatorHosts?.[i],nw=i=>{const e=tw(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iw=()=>dd()?.config,sw=i=>dd()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eg(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[zh(JSON.stringify(n)),zh(JSON.stringify(u)),""].join(".")}const nc={};function TN(){const i={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?i.emulator.push(e):i.prod.push(e);return i}function SN(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let K_=!1;function tg(i,e){if(typeof window>"u"||typeof document>"u"||!ba(window.location.host)||nc[i]===e||nc[i]||K_)return;nc[i]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",c=TN().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function p(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,N){E.setAttribute("width","24"),E.setAttribute("id",N),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{K_=!0,u()},E}function b(E,N){E.setAttribute("id",N),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=SN(r),N=n("text"),O=document.getElementById(N)||document.createElement("span"),V=n("learnmore"),k=document.getElementById(V)||document.createElement("a"),U=n("preprendIcon"),Q=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const W=E.element;p(W),b(k,V);const re=y();g(Q,U),W.append(Q,O,k,re),document.body.appendChild(W)}c?(O.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function NN(){const i=dd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CN(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function IN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DN(){const i=tn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function jN(){return!NN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ON(){try{return typeof indexedDB=="object"}catch{return!1}}function MN(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="FirebaseError";class Yi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PN,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sc.prototype.create)}}class Sc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?kN(c,r):"Error",p=`${this.serviceName}: ${u} (${o}).`;return new Yi(o,p,r)}}function kN(i,e){return i.replace(VN,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const VN=/\{\$([^}]+)}/g;function LN(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fa(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],u=e[o];if(Y_(c)&&Y_(u)){if(!fa(c,u))return!1}else if(c!==u)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Y_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Wl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function UN(i,e){const n=new zN(i,e);return n.subscribe.bind(n)}class zN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BN(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Xm),o.error===void 0&&(o.error=Xm),o.complete===void 0&&(o.complete=Xm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BN(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(i){return i&&i._delegate?i._delegate:i}class yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HN(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&u.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qN(i){return i===la?void 0:i}function HN(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Le||(Le={}));const QN={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},KN=Le.INFO,YN={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},$N=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=YN[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ng{constructor(e){this.name=e,this._logLevel=KN,this._logHandler=$N,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const XN=(i,e)=>e.some(n=>i instanceof n);let $_,X_;function WN(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JN(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aw=new WeakMap,vp=new WeakMap,ow=new WeakMap,Wm=new WeakMap,ig=new WeakMap;function ZN(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{n(fr(i.result)),o()},u=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&aw.set(n,i)}).catch(()=>{}),ig.set(e,i),e}function eR(i){if(vp.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{n(),o()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});vp.set(i,e)}let _p={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return vp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ow.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function tR(i){_p=i(_p)}function nR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(Jm(this),e,...n);return ow.set(r,e.sort?e.sort():[e]),fr(r)}:JN().includes(i)?function(...e){return i.apply(Jm(this),e),fr(aw.get(this))}:function(...e){return fr(i.apply(Jm(this),e))}}function iR(i){return typeof i=="function"?nR(i):(i instanceof IDBTransaction&&eR(i),XN(i,WN())?new Proxy(i,_p):i)}function fr(i){if(i instanceof IDBRequest)return ZN(i);if(Wm.has(i))return Wm.get(i);const e=iR(i);return e!==i&&(Wm.set(i,e),ig.set(e,i)),e}const Jm=i=>ig.get(i);function sR(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),p=fr(u);return r&&u.addEventListener("upgradeneeded",g=>{r(fr(u.result),g.oldVersion,g.newVersion,fr(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const rR=["get","getKey","getAll","getAllKeys","count"],aR=["put","add","delete","clear"],Zm=new Map;function W_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Zm.get(e))return Zm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=aR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||rR.includes(n)))return;const c=async function(u,...p){const g=this.transaction(u,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return Zm.set(e,c),c}tR(i=>({...i,get:(e,n,r)=>W_(e,n)||i.get(e,n,r),has:(e,n)=>!!W_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lR(i){return i.getComponent()?.type==="VERSION"}const bp="@firebase/app",J_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new ng("@firebase/app"),cR="@firebase/app-compat",uR="@firebase/analytics-compat",hR="@firebase/analytics",dR="@firebase/app-check-compat",fR="@firebase/app-check",mR="@firebase/auth",pR="@firebase/auth-compat",gR="@firebase/database",yR="@firebase/data-connect",vR="@firebase/database-compat",_R="@firebase/functions",bR="@firebase/functions-compat",xR="@firebase/installations",wR="@firebase/installations-compat",ER="@firebase/messaging",TR="@firebase/messaging-compat",SR="@firebase/performance",AR="@firebase/performance-compat",NR="@firebase/remote-config",RR="@firebase/remote-config-compat",CR="@firebase/storage",IR="@firebase/storage-compat",DR="@firebase/firestore",jR="@firebase/ai",OR="@firebase/firestore-compat",MR="firebase",PR="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]",kR={[bp]:"fire-core",[cR]:"fire-core-compat",[hR]:"fire-analytics",[uR]:"fire-analytics-compat",[fR]:"fire-app-check",[dR]:"fire-app-check-compat",[mR]:"fire-auth",[pR]:"fire-auth-compat",[gR]:"fire-rtdb",[yR]:"fire-data-connect",[vR]:"fire-rtdb-compat",[_R]:"fire-fn",[bR]:"fire-fn-compat",[xR]:"fire-iid",[wR]:"fire-iid-compat",[ER]:"fire-fcm",[TR]:"fire-fcm-compat",[SR]:"fire-perf",[AR]:"fire-perf-compat",[NR]:"fire-rc",[RR]:"fire-rc-compat",[CR]:"fire-gcs",[IR]:"fire-gcs-compat",[DR]:"fire-fst",[OR]:"fire-fst-compat",[jR]:"fire-vertex","fire-js":"fire-js",[MR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new Map,VR=new Map,wp=new Map;function Z_(i,e){try{i.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function ma(i){const e=i.name;if(wp.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,i);for(const n of Bh.values())Z_(n,i);for(const n of VR.values())Z_(n,i);return!0}function fd(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function gn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Sc("app","Firebase",LR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=PR;function lw(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:xp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw mr.create("bad-app-name",{appName:String(o)});if(n||(n=iw()),!n)throw mr.create("no-options");const c=Bh.get(o);if(c){if(fa(n,c.options)&&fa(r,c.config))return c;throw mr.create("duplicate-app",{appName:o})}const u=new GN(o);for(const g of wp.values())u.addComponent(g);const p=new UR(n,r,u);return Bh.set(o,p),p}function sg(i=xp){const e=Bh.get(i);if(!e&&i===xp&&iw())return lw();if(!e)throw mr.create("no-app",{appName:i});return e}function Li(i,e,n){let r=kR[i]??i;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(u.join(" "));return}ma(new yr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firebase-heartbeat-database",BR=1,hc="firebase-heartbeat-store";let ep=null;function cw(){return ep||(ep=sR(zR,BR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(hc)}catch(n){console.warn(n)}}}}).catch(i=>{throw mr.create("idb-open",{originalErrorMessage:i.message})})),ep}async function FR(i){try{const n=(await cw()).transaction(hc),r=await n.objectStore(hc).get(uw(i));return await n.done,r}catch(e){if(e instanceof Yi)ws.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e?.message});ws.warn(n.message)}}}async function eb(i,e){try{const r=(await cw()).transaction(hc,"readwrite");await r.objectStore(hc).put(e,uw(i)),await r.done}catch(n){if(n instanceof Yi)ws.warn(n.message);else{const r=mr.create("idb-set",{originalErrorMessage:n?.message});ws.warn(r.message)}}}function uw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=1024,HR=30;class GR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=tb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>HR){const o=YR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ws.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tb(),{heartbeatsToSend:n,unsentEntries:r}=QR(this._heartbeatsCache.heartbeats),o=zh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ws.warn(e),""}}}function tb(){return new Date().toISOString().substring(0,10)}function QR(i,e=qR){const n=[];let r=i.slice();for(const o of i){const c=n.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),nb(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),nb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ON()?MN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return eb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return eb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nb(i){return zh(JSON.stringify({version:2,heartbeats:i})).length}function YR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(i){ma(new yr("platform-logger",e=>new oR(e),"PRIVATE")),ma(new yr("heartbeat",e=>new GR(e),"PRIVATE")),Li(bp,J_,i),Li(bp,J_,"esm2020"),Li("fire-js","")}$R("");function hw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XR=hw,dw=new Sc("auth","Firebase",hw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new ng("@firebase/auth");function WR(i,...e){Fh.logLevel<=Le.WARN&&Fh.warn(`Auth (${xa}): ${i}`,...e)}function Nh(i,...e){Fh.logLevel<=Le.ERROR&&Fh.error(`Auth (${xa}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(i,...e){throw ag(i,...e)}function hi(i,...e){return ag(i,...e)}function rg(i,e,n){const r={...XR(),[e]:n};return new Sc("auth","Firebase",r).create(e,{appName:i.name})}function _s(i){return rg(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JR(i,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Kn(i,"argument-error"),rg(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ag(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return dw.create(i,...e)}function xe(i,e,...n){if(!i)throw ag(e,...n)}function gs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Nh(e),new Error(e)}function Es(i,e){i||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){return typeof self<"u"&&self.location?.href||""}function ZR(){return ib()==="http:"||ib()==="https:"}function ib(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZR()||CN()||"connection"in navigator)?navigator.onLine:!0}function t2(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Es(n>e,"Short delay should be less than long delay!"),this.isMobile=AN()||IN()}get(){return e2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(i,e){Es(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s2=new Nc(3e4,6e4);function Ar(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Nr(i,e,n,r,o={}){return mw(i,o,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const p=Ac({key:i.config.apiKey,...u}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...c};return RN()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&ba(i.emulatorConfig.host)&&(y.credentials="include"),fw.fetch()(await pw(i,i.config.apiHost,n,p),y)})}async function mw(i,e,n){i._canInitEmulator=!1;const r={...n2,...e};try{const o=new a2(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw mh(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const p=c.ok?u.errorMessage:u.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw mh(i,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw mh(i,"email-already-in-use",u);if(g==="USER_DISABLED")throw mh(i,"user-disabled",u);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw rg(i,b,y);Kn(i,b)}}catch(o){if(o instanceof Yi)throw o;Kn(i,"network-request-failed",{message:String(o)})}}async function Rc(i,e,n,r,o={}){const c=await Nr(i,e,n,r,o);return"mfaPendingCredential"in c&&Kn(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function pw(i,e,n,r){const o=`${e}${n}?${r}`,c=i,u=c.config.emulator?og(i.config,o):`${i.config.apiScheme}://${o}`;return i2.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function r2(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class a2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hi(this.auth,"network-request-failed")),s2.get())})}}function mh(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=hi(i,e,r);return o.customData._tokenResponse=n,o}function sb(i){return i!==void 0&&i.enterprise!==void 0}class o2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return r2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function l2(i,e){return Nr(i,"GET","/v2/recaptchaConfig",Ar(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(i,e){return Nr(i,"POST","/v1/accounts:delete",e)}async function qh(i,e){return Nr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function u2(i,e=!1){const n=jt(i),r=await n.getIdToken(e),o=lg(r);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:r,authTime:ic(tp(o.auth_time)),issuedAtTime:ic(tp(o.iat)),expirationTime:ic(tp(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function tp(i){return Number(i)*1e3}function lg(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return Nh("JWT malformed, contained fewer than 3 sections"),null;try{const o=ew(n);return o?JSON.parse(o):(Nh("Failed to decode base64 JWT payload"),null)}catch(o){return Nh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function rb(i){const e=lg(i);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yi&&h2(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function h2({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(i){const e=i.auth,n=await i.getIdToken(),r=await dc(i,qh(e,{idToken:n}));xe(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?gw(o.providerUserInfo):[],u=m2(i.providerData,c),p=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!u?.length,y=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,b)}async function f2(i){const e=jt(i);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m2(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function gw(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(i,e){const n=await mw(i,{},async()=>{const r=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await pw(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&ba(i.emulatorConfig.host)&&(g.credentials="include"),fw.fetch()(u,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function g2(i,e){return Nr(i,"POST","/v2/accounts:revokeToken",Ar(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=rb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await p2(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,u=new bo;return r&&(xe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(xe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(xe(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(i,e){xe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ci{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new d2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await dc(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return u2(this,e)}reload(){return f2(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await dc(this,c2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:x,emailVerified:E,isAnonymous:N,providerData:O,stsTokenManager:V}=n;xe(x&&V,e,"internal-error");const k=bo.fromJSON(this.name,V);xe(typeof x=="string",e,"internal-error"),lr(r,e.name),lr(o,e.name),xe(typeof E=="boolean",e,"internal-error"),xe(typeof N=="boolean",e,"internal-error"),lr(c,e.name),lr(u,e.name),lr(p,e.name),lr(g,e.name),lr(y,e.name),lr(b,e.name);const U=new ci({uid:x,auth:e,email:o,emailVerified:E,displayName:r,isAnonymous:N,photoURL:u,phoneNumber:c,tenantId:p,stsTokenManager:k,createdAt:y,lastLoginAt:b});return O&&Array.isArray(O)&&(U.providerData=O.map(Q=>({...Q}))),g&&(U._redirectEventId=g),U}static async _fromIdTokenResponse(e,n,r=!1){const o=new bo;o.updateFromServerResponse(n);const c=new ci({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Hh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?gw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,p=new bo;p.updateFromIdToken(r);const g=new ci({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function ys(i){Es(i instanceof Function,"Expected a class definition");let e=ab.get(i);return e?(Es(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,ab.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yw.type="NONE";const ob=yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(i,e,n){return`firebase:${i}:${e}:${n}`}class xo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Rh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Rh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qh(this.auth,{idToken:e}).catch(()=>{});return n?ci._fromGetAccountInfoResponse(this.auth,n,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xo(ys(ob),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||ys(ob);const u=Rh(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(u);if(b){let x;if(typeof b=="string"){const E=await qh(e,{idToken:b}).catch(()=>{});if(!E)break;x=await ci._fromGetAccountInfoResponse(e,E,b)}else x=ci._fromJSON(e,b);y!==c&&(p=x),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new xo(c,e,r):(c=g[0],p&&await c._set(u,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new xo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ew(e))return"Blackberry";if(Tw(e))return"Webos";if(_w(e))return"Safari";if((e.includes("chrome/")||bw(e))&&!e.includes("edge/"))return"Chrome";if(ww(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function vw(i=tn()){return/firefox\//i.test(i)}function _w(i=tn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bw(i=tn()){return/crios\//i.test(i)}function xw(i=tn()){return/iemobile/i.test(i)}function ww(i=tn()){return/android/i.test(i)}function Ew(i=tn()){return/blackberry/i.test(i)}function Tw(i=tn()){return/webos/i.test(i)}function cg(i=tn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function y2(i=tn()){return cg(i)&&!!window.navigator?.standalone}function v2(){return DN()&&document.documentMode===10}function Sw(i=tn()){return cg(i)||ww(i)||Tw(i)||Ew(i)||/windows phone/i.test(i)||xw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(i,e=[]){let n;switch(i){case"Browser":n=lb(tn());break;case"Worker":n=`${lb(tn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((u,p)=>{try{const g=e(c);u(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(i,e={}){return Nr(i,"GET","/v2/passwordPolicy",Ar(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=6;class w2{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??x2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cb(this),this.idTokenSubscription=new cb(this),this.beforeStateQueue=new _2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ys(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qh(this,{idToken:e}),r=await ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===u)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(_s(this));const n=e?jt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b2(this),n=new w2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await g2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ys(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[ys(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(p,this,"internal-error"),p.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{u=!0,g()}}else{const g=e.addObserver(n);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Aw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&WR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Rr(i){return jt(i)}class cb{constructor(e){this.auth=e,this.observer=null,this.addObserver=UN(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T2(i){md=i}function Nw(i){return md.loadJS(i)}function S2(){return md.recaptchaEnterpriseScript}function A2(){return md.gapiScript}function N2(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class R2{constructor(){this.enterprise=new C2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class C2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const I2="recaptcha-enterprise",Rw="NO_RECAPTCHA";class D2{constructor(e){this.type=I2,this.auth=Rr(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,p)=>{l2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new o2(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,u(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,u,p){const g=window.grecaptcha;sb(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{u(y)}).catch(()=>{u(Rw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new R2().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{r(this.auth).then(p=>{if(!n&&sb(window.grecaptcha))o(p,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=S2();g.length!==0&&(g+=p),Nw(g).then(()=>{o(p,c,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function ub(i,e,n,r=!1,o=!1){const c=new D2(i);let u;if(o)u=Rw;else try{u=await c.verify(n)}catch{u=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Sp(i,e,n,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ub(i,e,n,n==="getOobCode");return r(i,c)}else return r(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ub(i,e,n,n==="getOobCode");return r(i,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(i,e){const n=fd(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(fa(c,e??{}))return o;Kn(o,"already-initialized")}return n.initialize({options:e})}function O2(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ys);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function M2(i,e,n){const r=Rr(i);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=Cw(e),{host:u,port:p}=P2(e),g=p===null?"":`:${p}`,y={url:`${c}//${u}${g}/`},b=Object.freeze({host:u,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(fa(y,r.config.emulator)&&fa(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,ba(u)?(eg(`${c}//${u}${g}`),tg("Auth",!0)):k2()}function Cw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function P2(i){const e=Cw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:hb(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:hb(u)}}}function hb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function k2(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function V2(i,e){return Nr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(i,e){return Rc(i,"POST","/v1/accounts:signInWithPassword",Ar(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(i,e){return Rc(i,"POST","/v1/accounts:signInWithEmailLink",Ar(i,e))}async function z2(i,e){return Rc(i,"POST","/v1/accounts:signInWithEmailLink",Ar(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends ug{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new fc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sp(e,n,"signInWithPassword",L2);case"emailLink":return U2(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sp(e,r,"signUpPassword",V2);case"emailLink":return z2(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(i,e){return Rc(i,"POST","/v1/accounts:signInWithIdp",Ar(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="http://localhost";class pa extends ug{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const u=new pa(r,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return wo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wo(e,n)}buildRequest(){const e={requestUri:B2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ac(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function q2(i){const e=Xl(Wl(i)).link,n=e?Xl(Wl(e)).deep_link_id:null,r=Xl(Wl(i)).deep_link_id;return(r?Xl(Wl(r)).link:null)||r||n||e||i}class hg{constructor(e){const n=Xl(Wl(e)),r=n.apiKey??null,o=n.oobCode??null,c=F2(n.mode??null);xe(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=q2(e);try{return new hg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,n){return fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=hg.parseLink(n);return xe(r,"argument-error"),fc._fromEmailAndCode(e,r.code,r.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends dg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Cc{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends Cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pa._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ps.credential(n,r)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Cc{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Cc{constructor(){super("twitter.com")}static credential(e,n){return pa._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(i,e){return Rc(i,"POST","/v1/accounts:signUp",Ar(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await ci._fromIdTokenResponse(e,r,o),u=db(r);return new ga({user:c,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=db(r);return new ga({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function db(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends Yi{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Gh(e,n,r,o)}}function Iw(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(i,c,e,r):c})}async function G2(i,e,n=!1){const r=await dc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ga._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(i,e,n=!1){const{auth:r}=i;if(gn(r.app))return Promise.reject(_s(r));const o="reauthenticate";try{const c=await dc(i,Iw(r,o,e,i),n);xe(c.idToken,r,"internal-error");const u=lg(c.idToken);xe(u,r,"internal-error");const{sub:p}=u;return xe(i.uid===p,r,"user-mismatch"),ga._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Kn(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dw(i,e,n=!1){if(gn(i.app))return Promise.reject(_s(i));const r="signIn",o=await Iw(i,r,e),c=await ga._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function K2(i,e){return Dw(Rr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(i){const e=Rr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Y2(i,e,n){if(gn(i.app))return Promise.reject(_s(i));const r=Rr(i),u=await Sp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",H2).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&jw(i),g}),p=await ga._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(p.user),p}function $2(i,e,n){return gn(i.app)?Promise.reject(_s(i)):K2(jt(i),Oo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jw(i),r})}function X2(i,e,n,r){return jt(i).onIdTokenChanged(e,n,r)}function W2(i,e,n){return jt(i).beforeAuthStateChanged(e,n)}function J2(i,e,n,r){return jt(i).onAuthStateChanged(e,n,r)}function Z2(i){return jt(i).signOut()}const Qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=1e3,tC=10;class Mw extends Ow{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,g)=>{this.notifyListeners(u,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);v2()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,tC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mw.type="LOCAL";const nC=Mw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends Ow{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Pw.type="SESSION";const kw=Pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,u=this.handlersMap[o];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(u).map(async y=>y(n.origin,c)),g=await iC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((p,g)=>{const y=fg("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(x){const E=x;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(E.data.response);break;default:clearTimeout(b),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(){return window}function rC(i){Ui().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}async function aC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oC(){return navigator?.serviceWorker?.controller||null}function lC(){return Vw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firebaseLocalStorageDb",cC=1,Kh="firebaseLocalStorage",Uw="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(i,e){return i.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function uC(){const i=indexedDB.deleteDatabase(Lw);return new Ic(i).toPromise()}function Ap(){const i=indexedDB.open(Lw,cC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Kh,{keyPath:Uw})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Kh)?e(r):(r.close(),await uC(),e(await Ap()))})})}async function fb(i,e,n){const r=gd(i,!0).put({[Uw]:e,value:n});return new Ic(r).toPromise()}async function hC(i,e){const n=gd(i,!1).get(e),r=await new Ic(n).toPromise();return r===void 0?null:r.value}function mb(i,e){const n=gd(i,!0).delete(e);return new Ic(n).toPromise()}const dC=800,fC=3;class zw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ap(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(lC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await aC(),!this.activeServiceWorker)return;this.sender=new sC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ap();return await fb(e,Qh,"1"),await mb(e,Qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>hC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=gd(o,!1).getAll();return new Ic(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zw.type="LOCAL";const mC=zw;new Nc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(i,e){return e?ys(e):(xe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends ug{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pC(i){return Dw(i.auth,new mg(i),i.bypassAuthState)}function gC(i){const{auth:e,user:n}=i;return xe(n,e,"internal-error"),Q2(n,new mg(i),i.bypassAuthState)}async function yC(i){const{auth:e,user:n}=i;return xe(n,e,"internal-error"),G2(n,new mg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:u,type:p}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return gC;default:Kn(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new Nc(2e3,1e4);async function _C(i,e,n){if(gn(i.app))return Promise.reject(hi(i,"operation-not-supported-in-this-environment"));const r=Rr(i);JR(i,e,dg);const o=Bw(r,n);return new ca(r,"signInViaPopup",e,o).executeNotNull()}class ca extends Fw{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="pendingRedirect",Ch=new Map;class xC extends Fw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ch.get(this.auth._key());if(!e){try{const r=await wC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ch.set(this.auth._key(),e)}return this.bypassAuthState||Ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wC(i,e){const n=SC(e),r=TC(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function EC(i,e){Ch.set(i._key(),e)}function TC(i){return ys(i._redirectPersistence)}function SC(i){return Rh(bC,i.config.apiKey,i.name)}async function AC(i,e,n=!1){if(gn(i.app))return Promise.reject(_s(i));const r=Rr(i),o=Bw(r,e),u=await new xC(r,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=600*1e3;class RC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!qw(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NC&&this.cachedEventUids.clear(),this.cachedEventUids.has(pb(e))}saveEventToCache(e){this.cachedEventUids.add(pb(e)),this.lastProcessedEventTime=Date.now()}}function pb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function qw({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function CC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(i,e={}){return Nr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jC=/^https?/;async function OC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await IC(i);for(const n of e)try{if(MC(n))return}catch{}Kn(i,"unauthorized-domain")}function MC(i){const e=Ep(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!jC.test(n))return!1;if(DC.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Nc(3e4,6e4);function gb(){const i=Ui().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function kC(i){return new Promise((e,n)=>{function r(){gb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gb(),n(hi(i,"network-request-failed"))},timeout:PC.get()})}if(Ui().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ui().gapi?.load)r();else{const o=N2("iframefcb");return Ui()[o]=()=>{gapi.load?r():n(hi(i,"network-request-failed"))},Nw(`${A2()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Ih=null,e})}let Ih=null;function VC(i){return Ih=Ih||kC(i),Ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Nc(5e3,15e3),UC="__/auth/iframe",zC="emulator/auth/iframe",BC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qC(i){const e=i.config;xe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?og(e,zC):`https://${i.config.authDomain}/${UC}`,r={apiKey:e.apiKey,appName:i.name,v:xa},o=FC.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Ac(r).slice(1)}`}async function HC(i){const e=await VC(i),n=Ui().gapi;return xe(n,i,"internal-error"),e.open({where:document.body,url:qC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BC,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const u=hi(i,"network-request-failed"),p=Ui().setTimeout(()=>{c(u)},LC.get());function g(){Ui().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QC=500,KC=600,YC="_blank",$C="http://localhost";class yb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XC(i,e,n,r=QC,o=KC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...GC,width:r.toString(),height:o.toString(),top:c,left:u},y=tn().toLowerCase();n&&(p=bw(y)?YC:n),vw(y)&&(e=e||$C,g.scrollbars="yes");const b=Object.entries(g).reduce((E,[N,O])=>`${E}${N}=${O},`,"");if(y2(y)&&p!=="_self")return WC(e||"",p),new yb(null);const x=window.open(e||"",p,b);xe(x,i,"popup-blocked");try{x.focus()}catch{}return new yb(x)}function WC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="__/auth/handler",ZC="emulator/auth/handler",eI=encodeURIComponent("fac");async function vb(i,e,n,r,o,c){xe(i.config.authDomain,i,"auth-domain-config-required"),xe(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:xa,eventId:o};if(e instanceof dg){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",LN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,x]of Object.entries({}))u[b]=x}if(e instanceof Cc){const b=e.getScopes().filter(x=>x!=="");b.length>0&&(u.scopes=b.join(","))}i.tenantId&&(u.tid=i.tenantId);const p=u;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await i._getAppCheckToken(),y=g?`#${eI}=${encodeURIComponent(g)}`:"";return`${tI(i)}?${Ac(p).slice(1)}${y}`}function tI({config:i}){return i.emulator?og(i,ZC):`https://${i.authDomain}/${JC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="webStorageSupport";class nI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kw,this._completeRedirectFn=AC,this._overrideRedirectResult=EC}async _openPopup(e,n,r,o){Es(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await vb(e,n,r,Ep(),o);return XC(e,c,fg())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await vb(e,n,r,Ep(),o);return rC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Es(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await HC(e),r=new RC(e);return n.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(np,{type:np},o=>{const c=o?.[0]?.[np];c!==void 0&&n(!!c),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Sw()||_w()||cg()}}const iI=nI;var _b="@firebase/auth",bb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aI(i){ma(new yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=r.options;xe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Aw(i)},y=new E2(r,o,c,g);return O2(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ma(new yr("auth-internal",e=>{const n=Rr(e.getProvider("auth").getImmediate());return(r=>new sI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(_b,bb,rI(i)),Li(_b,bb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=300,lI=sw("authIdTokenMaxAge")||oI;let xb=null;const cI=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lI)return;const o=n?.token;xb!==o&&(xb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function uI(i=sg()){const e=fd(i,"auth");if(e.isInitialized())return e.getImmediate();const n=j2(i,{popupRedirectResolver:iI,persistence:[mC,nC,kw]}),r=sw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=cI(c.toString());W2(n,u,()=>u(n.currentUser)),X2(n,p=>u(p))}}const o=tw("auth");return o&&M2(n,`http://${o}`),n}function hI(){return document.getElementsByTagName("head")?.[0]??document}T2({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=hi("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",hI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aI("Browser");var wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pr,Hw;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function R(){}R.prototype=A.prototype,C.F=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(z,M,F){for(var I=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)I[pe-2]=arguments[pe];return A.prototype[M].apply(z,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,A,R){R||(R=0);const z=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)z[M]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(M=0;M<16;++M)z[M]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],M=C.g[2];let F=C.g[3],I;I=A+(F^R&(M^F))+z[0]+3614090360&4294967295,A=R+(I<<7&4294967295|I>>>25),I=F+(M^A&(R^M))+z[1]+3905402710&4294967295,F=A+(I<<12&4294967295|I>>>20),I=M+(R^F&(A^R))+z[2]+606105819&4294967295,M=F+(I<<17&4294967295|I>>>15),I=R+(A^M&(F^A))+z[3]+3250441966&4294967295,R=M+(I<<22&4294967295|I>>>10),I=A+(F^R&(M^F))+z[4]+4118548399&4294967295,A=R+(I<<7&4294967295|I>>>25),I=F+(M^A&(R^M))+z[5]+1200080426&4294967295,F=A+(I<<12&4294967295|I>>>20),I=M+(R^F&(A^R))+z[6]+2821735955&4294967295,M=F+(I<<17&4294967295|I>>>15),I=R+(A^M&(F^A))+z[7]+4249261313&4294967295,R=M+(I<<22&4294967295|I>>>10),I=A+(F^R&(M^F))+z[8]+1770035416&4294967295,A=R+(I<<7&4294967295|I>>>25),I=F+(M^A&(R^M))+z[9]+2336552879&4294967295,F=A+(I<<12&4294967295|I>>>20),I=M+(R^F&(A^R))+z[10]+4294925233&4294967295,M=F+(I<<17&4294967295|I>>>15),I=R+(A^M&(F^A))+z[11]+2304563134&4294967295,R=M+(I<<22&4294967295|I>>>10),I=A+(F^R&(M^F))+z[12]+1804603682&4294967295,A=R+(I<<7&4294967295|I>>>25),I=F+(M^A&(R^M))+z[13]+4254626195&4294967295,F=A+(I<<12&4294967295|I>>>20),I=M+(R^F&(A^R))+z[14]+2792965006&4294967295,M=F+(I<<17&4294967295|I>>>15),I=R+(A^M&(F^A))+z[15]+1236535329&4294967295,R=M+(I<<22&4294967295|I>>>10),I=A+(M^F&(R^M))+z[1]+4129170786&4294967295,A=R+(I<<5&4294967295|I>>>27),I=F+(R^M&(A^R))+z[6]+3225465664&4294967295,F=A+(I<<9&4294967295|I>>>23),I=M+(A^R&(F^A))+z[11]+643717713&4294967295,M=F+(I<<14&4294967295|I>>>18),I=R+(F^A&(M^F))+z[0]+3921069994&4294967295,R=M+(I<<20&4294967295|I>>>12),I=A+(M^F&(R^M))+z[5]+3593408605&4294967295,A=R+(I<<5&4294967295|I>>>27),I=F+(R^M&(A^R))+z[10]+38016083&4294967295,F=A+(I<<9&4294967295|I>>>23),I=M+(A^R&(F^A))+z[15]+3634488961&4294967295,M=F+(I<<14&4294967295|I>>>18),I=R+(F^A&(M^F))+z[4]+3889429448&4294967295,R=M+(I<<20&4294967295|I>>>12),I=A+(M^F&(R^M))+z[9]+568446438&4294967295,A=R+(I<<5&4294967295|I>>>27),I=F+(R^M&(A^R))+z[14]+3275163606&4294967295,F=A+(I<<9&4294967295|I>>>23),I=M+(A^R&(F^A))+z[3]+4107603335&4294967295,M=F+(I<<14&4294967295|I>>>18),I=R+(F^A&(M^F))+z[8]+1163531501&4294967295,R=M+(I<<20&4294967295|I>>>12),I=A+(M^F&(R^M))+z[13]+2850285829&4294967295,A=R+(I<<5&4294967295|I>>>27),I=F+(R^M&(A^R))+z[2]+4243563512&4294967295,F=A+(I<<9&4294967295|I>>>23),I=M+(A^R&(F^A))+z[7]+1735328473&4294967295,M=F+(I<<14&4294967295|I>>>18),I=R+(F^A&(M^F))+z[12]+2368359562&4294967295,R=M+(I<<20&4294967295|I>>>12),I=A+(R^M^F)+z[5]+4294588738&4294967295,A=R+(I<<4&4294967295|I>>>28),I=F+(A^R^M)+z[8]+2272392833&4294967295,F=A+(I<<11&4294967295|I>>>21),I=M+(F^A^R)+z[11]+1839030562&4294967295,M=F+(I<<16&4294967295|I>>>16),I=R+(M^F^A)+z[14]+4259657740&4294967295,R=M+(I<<23&4294967295|I>>>9),I=A+(R^M^F)+z[1]+2763975236&4294967295,A=R+(I<<4&4294967295|I>>>28),I=F+(A^R^M)+z[4]+1272893353&4294967295,F=A+(I<<11&4294967295|I>>>21),I=M+(F^A^R)+z[7]+4139469664&4294967295,M=F+(I<<16&4294967295|I>>>16),I=R+(M^F^A)+z[10]+3200236656&4294967295,R=M+(I<<23&4294967295|I>>>9),I=A+(R^M^F)+z[13]+681279174&4294967295,A=R+(I<<4&4294967295|I>>>28),I=F+(A^R^M)+z[0]+3936430074&4294967295,F=A+(I<<11&4294967295|I>>>21),I=M+(F^A^R)+z[3]+3572445317&4294967295,M=F+(I<<16&4294967295|I>>>16),I=R+(M^F^A)+z[6]+76029189&4294967295,R=M+(I<<23&4294967295|I>>>9),I=A+(R^M^F)+z[9]+3654602809&4294967295,A=R+(I<<4&4294967295|I>>>28),I=F+(A^R^M)+z[12]+3873151461&4294967295,F=A+(I<<11&4294967295|I>>>21),I=M+(F^A^R)+z[15]+530742520&4294967295,M=F+(I<<16&4294967295|I>>>16),I=R+(M^F^A)+z[2]+3299628645&4294967295,R=M+(I<<23&4294967295|I>>>9),I=A+(M^(R|~F))+z[0]+4096336452&4294967295,A=R+(I<<6&4294967295|I>>>26),I=F+(R^(A|~M))+z[7]+1126891415&4294967295,F=A+(I<<10&4294967295|I>>>22),I=M+(A^(F|~R))+z[14]+2878612391&4294967295,M=F+(I<<15&4294967295|I>>>17),I=R+(F^(M|~A))+z[5]+4237533241&4294967295,R=M+(I<<21&4294967295|I>>>11),I=A+(M^(R|~F))+z[12]+1700485571&4294967295,A=R+(I<<6&4294967295|I>>>26),I=F+(R^(A|~M))+z[3]+2399980690&4294967295,F=A+(I<<10&4294967295|I>>>22),I=M+(A^(F|~R))+z[10]+4293915773&4294967295,M=F+(I<<15&4294967295|I>>>17),I=R+(F^(M|~A))+z[1]+2240044497&4294967295,R=M+(I<<21&4294967295|I>>>11),I=A+(M^(R|~F))+z[8]+1873313359&4294967295,A=R+(I<<6&4294967295|I>>>26),I=F+(R^(A|~M))+z[15]+4264355552&4294967295,F=A+(I<<10&4294967295|I>>>22),I=M+(A^(F|~R))+z[6]+2734768916&4294967295,M=F+(I<<15&4294967295|I>>>17),I=R+(F^(M|~A))+z[13]+1309151649&4294967295,R=M+(I<<21&4294967295|I>>>11),I=A+(M^(R|~F))+z[4]+4149444226&4294967295,A=R+(I<<6&4294967295|I>>>26),I=F+(R^(A|~M))+z[11]+3174756917&4294967295,F=A+(I<<10&4294967295|I>>>22),I=M+(A^(F|~R))+z[2]+718787259&4294967295,M=F+(I<<15&4294967295|I>>>17),I=R+(F^(M|~A))+z[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+F&4294967295}r.prototype.v=function(C,A){A===void 0&&(A=C.length);const R=A-this.blockSize,z=this.C;let M=this.h,F=0;for(;F<A;){if(M==0)for(;F<=R;)o(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<A;)if(z[M++]=C.charCodeAt(F++),M==this.blockSize){o(this,z),M=0;break}}else for(;F<A;)if(z[M++]=C[F++],M==this.blockSize){o(this,z),M=0;break}}this.h=M,this.o+=A},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,R=0;R<4;++R)for(let z=0;z<32;z+=8)C[A++]=this.g[R]>>>z&255;return C};function c(C,A){var R=p;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function u(C,A){this.h=A;const R=[];let z=!0;for(let M=C.length-1;M>=0;M--){const F=C[M]|0;z&&F==A||(R[M]=F,z=!1)}this.g=R}var p={};function g(C){return-128<=C&&C<128?c(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return x;if(C<0)return k(y(-C));const A=[];let R=1;for(let z=0;C>=R;z++)A[z]=C/R|0,R*=4294967296;return new u(A,0)}function b(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return k(b(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let z=x;for(let F=0;F<C.length;F+=8){var M=Math.min(8,C.length-F);const I=parseInt(C.substring(F,F+M),A);M<8?(M=y(Math.pow(A,M)),z=z.j(M).add(y(I))):(z=z.j(R),z=z.add(y(I)))}return z}var x=g(0),E=g(1),N=g(16777216);i=u.prototype,i.m=function(){if(V(this))return-k(this).m();let C=0,A=1;for(let R=0;R<this.g.length;R++){const z=this.i(R);C+=(z>=0?z:4294967296+z)*A,A*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(O(this))return"0";if(V(this))return"-"+k(this).toString(C);const A=y(Math.pow(C,6));var R=this;let z="";for(;;){const M=re(R,A).g;R=U(R,M.j(A));let F=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=M,O(R))return F+z;for(;F.length<6;)F="0"+F;z=F+z}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function O(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function V(C){return C.h==-1}i.l=function(C){return C=U(this,C),V(C)?-1:O(C)?0:1};function k(C){const A=C.g.length,R=[];for(let z=0;z<A;z++)R[z]=~C.g[z];return new u(R,~C.h).add(E)}i.abs=function(){return V(this)?k(this):this},i.add=function(C){const A=Math.max(this.g.length,C.g.length),R=[];let z=0;for(let M=0;M<=A;M++){let F=z+(this.i(M)&65535)+(C.i(M)&65535),I=(F>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);z=I>>>16,F&=65535,I&=65535,R[M]=I<<16|F}return new u(R,R[R.length-1]&-2147483648?-1:0)};function U(C,A){return C.add(k(A))}i.j=function(C){if(O(this)||O(C))return x;if(V(this))return V(C)?k(this).j(k(C)):k(k(this).j(C));if(V(C))return k(this.j(k(C)));if(this.l(N)<0&&C.l(N)<0)return y(this.m()*C.m());const A=this.g.length+C.g.length,R=[];for(var z=0;z<2*A;z++)R[z]=0;for(z=0;z<this.g.length;z++)for(let M=0;M<C.g.length;M++){const F=this.i(z)>>>16,I=this.i(z)&65535,pe=C.i(M)>>>16,Ee=C.i(M)&65535;R[2*z+2*M]+=I*Ee,Q(R,2*z+2*M),R[2*z+2*M+1]+=F*Ee,Q(R,2*z+2*M+1),R[2*z+2*M+1]+=I*pe,Q(R,2*z+2*M+1),R[2*z+2*M+2]+=F*pe,Q(R,2*z+2*M+2)}for(C=0;C<A;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=A;C<2*A;C++)R[C]=0;return new u(R,0)};function Q(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function W(C,A){this.g=C,this.h=A}function re(C,A){if(O(A))throw Error("division by zero");if(O(C))return new W(x,x);if(V(C))return A=re(k(C),A),new W(k(A.g),k(A.h));if(V(A))return A=re(C,k(A)),new W(k(A.g),A.h);if(C.g.length>30){if(V(C)||V(A))throw Error("slowDivide_ only works with positive integers.");for(var R=E,z=A;z.l(C)<=0;)R=oe(R),z=oe(z);var M=ue(R,1),F=ue(z,1);for(z=ue(z,2),R=ue(R,2);!O(z);){var I=F.add(z);I.l(C)<=0&&(M=M.add(R),F=I),z=ue(z,1),R=ue(R,1)}return A=U(C,M.j(A)),new W(M,A)}for(M=x;C.l(A)>=0;){for(R=Math.max(1,Math.floor(C.m()/A.m())),z=Math.ceil(Math.log(R)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),F=y(R),I=F.j(A);V(I)||I.l(C)>0;)R-=z,F=y(R),I=F.j(A);O(F)&&(F=E),M=M.add(F),C=U(C,I)}return new W(M,C)}i.B=function(C){return re(this,C).h},i.and=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let z=0;z<A;z++)R[z]=this.i(z)&C.i(z);return new u(R,this.h&C.h)},i.or=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let z=0;z<A;z++)R[z]=this.i(z)|C.i(z);return new u(R,this.h|C.h)},i.xor=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let z=0;z<A;z++)R[z]=this.i(z)^C.i(z);return new u(R,this.h^C.h)};function oe(C){const A=C.g.length+1,R=[];for(let z=0;z<A;z++)R[z]=C.i(z)<<1|C.i(z-1)>>>31;return new u(R,C.h)}function ue(C,A){const R=A>>5;A%=32;const z=C.g.length-R,M=[];for(let F=0;F<z;F++)M[F]=A>0?C.i(F+R)>>>A|C.i(F+R+1)<<32-A:C.i(F+R);return new u(M,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Hw=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,pr=u}).apply(typeof wb<"u"?wb:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gw,Jl,Qw,Dh,Np,Kw,Yw,$w;(function(){var i,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function o(h,v){if(v)e:{var w=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in w))break e;w=w[q]}h=h[h.length-1],S=w[h],v=v(S),v!=S&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var w=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&w.push([S,v[S]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,w){return h.call.apply(h.bind,arguments)}function y(h,v,w){return y=g,y.apply(null,arguments)}function b(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function x(h,v){function w(){}w.prototype=v.prototype,h.Z=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(S,q,$){for(var ae=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ae[Ce-2]=arguments[Ce];return v.prototype[q].apply(S,ae)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const v=h.length;if(v>0){const w=Array(v);for(let S=0;S<v;S++)w[S]=h[S];return w}return[]}function O(h,v){for(let S=1;S<arguments.length;S++){const q=arguments[S];var w=typeof q;if(w=w!="object"?w:q?Array.isArray(q)?"array":w:"null",w=="array"||w=="object"&&typeof q.length=="number"){w=h.length||0;const $=q.length||0;h.length=w+$;for(let ae=0;ae<$;ae++)h[w+ae]=q[ae]}else h.push(q)}}class V{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function k(h){u.setTimeout(()=>{throw h},0)}function U(){var h=C;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Q{constructor(){this.h=this.g=null}add(v,w){const S=W.get();S.set(v,w),this.h?this.h.next=S:this.g=S,this.h=S}}var W=new V(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ue=!1,C=new Q,A=()=>{const h=Promise.resolve(void 0);oe=()=>{h.then(R)}};function R(){for(var h;h=U();){try{h.h.call(h.g)}catch(w){k(w)}var v=W;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}ue=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};u.addEventListener("test",w,v),u.removeEventListener("test",w,v)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function pe(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}x(pe,M),pe.prototype.init=function(h,v){const w=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),Y=0;function se(h,v,w,S,q){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!S,this.ha=q,this.key=++Y,this.da=this.fa=!1}function le(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Se(h,v,w){for(const S in h)v.call(w,h[S],S,h)}function je(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function j(h){const v={};for(const w in h)v[w]=h[w];return v}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,v){let w,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(w in S)h[w]=S[w];for(let $=0;$<J.length;$++)w=J[$],Object.prototype.hasOwnProperty.call(S,w)&&(h[w]=S[w])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,v,w,S,q){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const ae=Ae(h,v,S,q);return ae>-1?(v=h[ae],w||(v.fa=!1)):(v=new se(v,this.src,$,!!S,q),v.fa=w,h.push(v)),v};function be(h,v){const w=v.type;if(w in h.g){var S=h.g[w],q=Array.prototype.indexOf.call(S,v,void 0),$;($=q>=0)&&Array.prototype.splice.call(S,q,1),$&&(le(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Ae(h,v,w,S){for(let q=0;q<h.length;++q){const $=h[q];if(!$.da&&$.listener==v&&$.capture==!!w&&$.ha==S)return q}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Ot={};function ot(h,v,w,S,q){if(Array.isArray(v)){for(let $=0;$<v.length;$++)ot(h,v[$],w,S,q);return null}return w=Fo(w),h&&h[Ee]?h.J(v,w,p(S)?!!S.capture:!1,q):Dr(h,v,w,!1,S,q)}function Dr(h,v,w,S,q,$){if(!v)throw Error("Invalid event type");const ae=p(q)?!!q.capture:!!q;let Ce=jr(h);if(Ce||(h[Fe]=Ce=new he(h)),w=Ce.add(v,w,S,ae,$),w.proxy)return w;if(S=Ta(),w.proxy=S,S.src=h,S.listener=w,h.addEventListener)F||(q=ae),q===void 0&&(q=!1),h.addEventListener(v.toString(),S,q);else if(h.attachEvent)h.attachEvent(mi(v.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ta(){function h(w){return v.call(h.src,h.listener,w)}const v=zo;return h}function Sa(h,v,w,S,q){if(Array.isArray(v))for(var $=0;$<v.length;$++)Sa(h,v[$],w,S,q);else S=p(S)?!!S.capture:!!S,w=Fo(w),h&&h[Ee]?(h=h.i,$=String(v).toString(),$ in h.g&&(v=h.g[$],w=Ae(v,w,S,q),w>-1&&(le(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete h.g[$],h.h--)))):h&&(h=jr(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Ae(v,w,S,q)),(w=h>-1?v[h]:null)&&Aa(w))}function Aa(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ee])be(v.i,h);else{var w=h.type,S=h.proxy;v.removeEventListener?v.removeEventListener(w,S,h.capture):v.detachEvent?v.detachEvent(mi(w),S):v.addListener&&v.removeListener&&v.removeListener(S),(w=jr(v))?(be(w,h),w.h==0&&(w.src=null,v[Fe]=null)):le(h)}}}function mi(h){return h in Ot?Ot[h]:Ot[h]="on"+h}function zo(h,v){if(h.da)h=!0;else{v=new pe(v,this);const w=h.listener,S=h.ha||h.src;h.fa&&Aa(h),h=w.call(S,v)}return h}function jr(h){return h=h[Fe],h instanceof he?h:null}var Bo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fo(h){return typeof h=="function"?h:(h[Bo]||(h[Bo]=function(v){return h.handleEvent(v)}),h[Bo])}function bt(){z.call(this),this.i=new he(this),this.M=this,this.G=null}x(bt,z),bt.prototype[Ee]=!0,bt.prototype.removeEventListener=function(h,v,w,S){Sa(this,h,v,w,S)};function Mt(h,v){var w,S=h.G;if(S)for(w=[];S;S=S.G)w.push(S);if(h=h.M,S=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var q=v;v=new M(S,h),ce(v,q)}q=!0;let $,ae;if(w)for(ae=w.length-1;ae>=0;ae--)$=v.g=w[ae],q=Cs($,S,!0,v)&&q;if($=v.g=h,q=Cs($,S,!0,v)&&q,q=Cs($,S,!1,v)&&q,w)for(ae=0;ae<w.length;ae++)$=v.g=w[ae],q=Cs($,S,!1,v)&&q}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const w=h.g[v];for(let S=0;S<w.length;S++)le(w[S]);delete h.g[v],h.h--}}this.G=null},bt.prototype.J=function(h,v,w,S){return this.i.add(String(h),v,!1,w,S)},bt.prototype.K=function(h,v,w,S){return this.i.add(String(h),v,!0,w,S)};function Cs(h,v,w,S){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let q=!0;for(let $=0;$<v.length;++$){const ae=v[$];if(ae&&!ae.da&&ae.capture==w){const Ce=ae.listener,gt=ae.ha||ae.src;ae.fa&&be(h.i,ae),q=Ce.call(gt,S)!==!1&&q}}return q&&!S.defaultPrevented}function qd(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(h,v||0)}function Vc(h){h.g=qd(()=>{h.g=null,h.i&&(h.i=!1,Vc(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class nn extends z{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Vc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(h){z.call(this),this.h=h,this.g={}}x(Or,z);var qo=[];function Ho(h){Se(h.g,function(v,w){this.g.hasOwnProperty(w)&&Aa(v)},h),h.g={}}Or.prototype.N=function(){Or.Z.N.call(this),Ho(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=u.JSON.stringify,Hd=u.JSON.parse,Lc=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Uc(){}function zc(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){M.call(this,"d")}x(Ft,M);function Cn(){M.call(this,"c")}x(Cn,M);var pt={},Bc=null;function Na(){return Bc=Bc||new bt}pt.Ia="serverreachability";function Fc(h){M.call(this,pt.Ia,h)}x(Fc,M);function pi(h){const v=Na();Mt(v,new Fc(v))}pt.STAT_EVENT="statevent";function Mr(h,v){M.call(this,pt.STAT_EVENT,h),this.stat=v}x(Mr,M);function xt(h){const v=Na();Mt(v,new Mr(v,h))}pt.Ja="timingevent";function gi(h,v){M.call(this,pt.Ja,h),this.size=v}x(gi,M);function yi(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function Gd(h,v,w,S,q,$){h.info(function(){if(h.g)if($){var ae="",Ce=$.split("&");for(let Qe=0;Qe<Ce.length;Qe++){var gt=Ce[Qe].split("=");if(gt.length>1){const lt=gt[0];gt=gt[1];const On=lt.split("_");ae=On.length>=2&&On[1]=="type"?ae+(lt+"="+gt+"&"):ae+(lt+"=redacted&")}}}else ae=null;else ae=$;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+v+`
`+w+`
`+ae})}function qc(h,v,w,S,q,$,ae){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+v+`
`+w+`
`+$+" "+ae})}function vi(h,v,w,S){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Qd(h,w)+(S?" "+S:"")})}function Pr(h,v){h.info(function(){return"TIMEOUT: "+v})}Xn.prototype.info=function(){};function Qd(h,v){if(!h.g)return v;if(!v)return null;try{const $=JSON.parse(v);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var w=$[h];if(!(w.length<2)){var S=w[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ae=1;ae<S.length;ae++)S[ae]=""}}}}return Is($)}catch{return v}}var kr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Go={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qo;function Vr(){}x(Vr,Uc),Vr.prototype.g=function(){return new XMLHttpRequest},Qo=new Vr;function Xi(h){return encodeURIComponent(String(h))}function Hc(h){var v=1;h=h.split(":");const w=[];for(;v>0&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function Wn(h,v,w,S){this.j=h,this.i=v,this.l=w,this.S=S||1,this.V=new Or(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var wt={},Lt={};function _i(h,v,w){h.M=1,h.A=Lr(Tt(v)),h.u=w,h.R=!0,Ra(h,null)}function Ra(h,v){h.F=Date.now(),bi(h),h.B=Tt(h.A);var w=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),ja(w.i,"t",S),h.C=0,w=h.j.L,h.h=new Jn,h.g=ru(h.j,w?v:null,!h.u),h.P>0&&(h.O=new nn(y(h.Y,h,h.g),h.P)),v=h.V,w=h.g,S=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(qo[0]=q.toString()),q=qo);for(let $=0;$<q.length;$++){const ae=ot(w,q[$],S||v.handleEvent,!1,v.h||v);if(!ae)break;v.g[ae.key]=ae}v=h.J?j(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),pi(),Gd(h.i,h.v,h.B,h.l,h.S,h.u)}Wn.prototype.ba=function(h){h=h.target;const v=this.O;v&&ti(h)==3?v.j():this.Y(h)},Wn.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=ti(this.g),gt=this.g.ya(),Qe=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||qt(this.g)))){this.K||Ce!=4||gt==7||(gt==8||Qe<=0?pi(3):pi(2)),xi(this);var v=this.g.ca();this.X=v;var w=Kd(this);if(this.o=v==200,qc(this.i,this.v,this.B,this.l,this.S,Ce,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var $=S;break t}}$=null}if(h=$)vi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wi(this,h);else{this.o=!1,this.m=3,xt(12),_n(this),In(this);break e}}if(this.R){h=!0;let lt;for(;!this.K&&this.C<w.length;)if(lt=Qc(this,w),lt==Lt){Ce==4&&(this.m=4,xt(14),h=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==wt){this.m=4,xt(15),vi(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else vi(this.i,this.l,lt,null),wi(this,lt);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||w.length!=0||this.h.h||(this.m=1,xt(16),h=!1),this.o=this.o&&h,!h)vi(this.i,this.l,w,"[Invalid Chunked Response]"),_n(this),In(this);else if(w.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),ol(ae),ae.P=!0,xt(11))}}else vi(this.i,this.l,w,null),wi(this,w);Ce==4&&_n(this),this.o&&!this.K&&(Ce==4?tu(this.j,this):(this.o=!1,bi(this)))}else Ji(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),_n(this),In(this)}}}catch{}finally{}};function Kd(h){if(!Gc(h))return h.g.la();const v=qt(h.g);if(v==="")return"";let w="";const S=v.length,q=ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return _n(h),In(h),"";h.h.i=new u.TextDecoder}for(let $=0;$<S;$++)h.h.h=!0,w+=h.h.i.decode(v[$],{stream:!(q&&$==S-1)});return v.length=0,h.h.g+=w,h.C=0,h.h.g}function Gc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Qc(h,v){var w=h.C,S=v.indexOf(`
`,w);return S==-1?Lt:(w=Number(v.substring(w,S)),isNaN(w)?wt:(S+=1,S+w>v.length?Lt:(v=v.slice(S,S+w),h.C=S+w,v)))}Wn.prototype.cancel=function(){this.K=!0,_n(this)};function bi(h){h.T=Date.now()+h.H,Ca(h,h.H)}function Ca(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=yi(y(h.aa,h),v)}function xi(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Wn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pr(this.i,this.B),this.M!=2&&(pi(),xt(17)),_n(this),this.m=2,In(this)):Ca(this,this.T-h)};function In(h){h.j.I==0||h.K||tu(h.j,h)}function _n(h){xi(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Ho(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function wi(h,v){try{var w=h.j;if(w.I!=0&&(w.g==h||Ti(w.h,h))){if(!h.L&&Ti(w.h,h)&&w.I==3){try{var S=w.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Va(w),Ls(w);else break e;Gr(w),xt(18)}}else w.xa=q[1],0<w.xa-w.K&&q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=yi(y(w.Va,w),6e3));Ei(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ii(w,11)}else if((h.L||w.g==h)&&Va(w),!I(v))for(q=w.Ba.g.parse(v),v=0;v<q.length;v++){let Qe=q[v];const lt=Qe[0];if(!(lt<=w.K))if(w.K=lt,Qe=Qe[1],w.I==2)if(Qe[0]=="c"){w.M=Qe[1],w.ba=Qe[2];const On=Qe[3];On!=null&&(w.ka=On,w.j.info("VER="+w.ka));const Di=Qe[4];Di!=null&&(w.za=Di,w.j.info("SVER="+w.za));const ni=Qe[5];ni!=null&&typeof ni=="number"&&ni>0&&(S=1.5*ni,w.O=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const ii=h.g;if(ii){const Qr=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qr){var $=S.h;$.g||Qr.indexOf("spdy")==-1&&Qr.indexOf("quic")==-1&&Qr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&($o($,$.h),$.h=null))}if(S.G){const La=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(S.wa=La,$e(S.J,S.G,La))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),S=w;var ae=h;if(S.na=su(S,S.L?S.ba:null,S.W),ae.L){Xo(S.h,ae);var Ce=ae,gt=S.O;gt&&(Ce.H=gt),Ce.D&&(xi(Ce),bi(Ce)),S.g=ae}else Zc(S);w.i.length>0&&Ci(w)}else Qe[0]!="stop"&&Qe[0]!="close"||Ii(w,7);else w.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ii(w,7):rl(w):Qe[0]!="noop"&&w.l&&w.l.qa(Qe),w.A=0)}}pi(4)}catch{}}var Et=class{constructor(h,v){this.g=h,this.map=v}};function Ko(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ei(h){return h.h?1:h.g?h.g.size:0}function Ti(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function $o(h,v){h.g?h.g.add(v):h.h=v}function Xo(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Ko.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Wo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.G);return v}return N(h.i)}var Kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ia(h,v){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const S=h[w].indexOf("=");let q,$=null;S>=0?(q=h[w].substring(0,S),$=h[w].substring(S+1)):q=h[w],v(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof bn?(this.l=h.l,Ut(this,h.j),this.o=h.o,this.g=h.g,Ds(this,h.u),this.h=h.h,Jo(this,Wc(h.i)),this.m=h.m):h&&(v=String(h).match(Kc))?(this.l=!1,Ut(this,v[1]||"",!0),this.o=Si(v[2]||""),this.g=Si(v[3]||"",!0),Ds(this,v[4]),this.h=Si(v[5]||"",!0),Jo(this,v[6]||"",!0),this.m=Si(v[7]||"")):(this.l=!1,this.i=new Os(null,this.l))}bn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ur(v,Da,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ur(v,Da,!0),"@"),h.push(Xi(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ur(w,w.charAt(0)=="/"?Zo:Yc,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ur(w,$c)),h.join("")},bn.prototype.resolve=function(h){const v=Tt(this);let w=!!h.j;w?Ut(v,h.j):w=!!h.o,w?v.o=h.o:w=!!h.g,w?v.g=h.g:w=h.u!=null;var S=h.h;if(w)Ds(v,h.u);else if(w=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=v.h.lastIndexOf("/");q!=-1&&(S=v.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const $=[];for(let ae=0;ae<q.length;){const Ce=q[ae++];Ce=="."?S&&ae==q.length&&$.push(""):Ce==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),S&&ae==q.length&&$.push("")):($.push(Ce),S=!0)}S=$.join("/")}else S=q}return w?v.h=S:w=h.i.toString()!=="",w?Jo(v,Wc(h.i)):w=!!h.m,w&&(v.m=h.m),v};function Tt(h){return new bn(h)}function Ut(h,v,w){h.j=w?Si(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ds(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Jo(h,v,w){v instanceof Os?(h.i=v,Oa(h.i,h.l)):(w||(v=Ur(v,js)),h.i=new Os(v,h.l))}function $e(h,v,w){h.i.set(v,w)}function Lr(h){return $e(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Si(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ur(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,ln),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ln(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Da=/[#\/\?@]/g,Yc=/[#\?:]/g,Zo=/[#\?]/g,js=/[#\?@]/g,$c=/#/g;function Os(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function cn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ia(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}i=Os.prototype,i.add=function(h,v){cn(this),this.i=null,h=Ms(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function Xc(h,v){cn(h),v=Ms(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function el(h,v){return cn(h),v=Ms(h,v),h.g.has(v)}i.forEach=function(h,v){cn(this),this.g.forEach(function(w,S){w.forEach(function(q){h.call(v,q,S,this)},this)},this)};function tl(h,v){cn(h);let w=[];if(typeof v=="string")el(h,v)&&(w=w.concat(h.g.get(Ms(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)w=w.concat(h[v]);return w}i.set=function(h,v){return cn(this),this.i=null,h=Ms(this,h),el(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},i.get=function(h,v){return h?(h=tl(this,h),h.length>0?String(h[0]):v):v};function ja(h,v,w){Xc(h,v),w.length>0&&(h.i=null,h.g.set(Ms(h,v),N(w)),h.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var w=v[S];const q=Xi(w);w=tl(this,w);for(let $=0;$<w.length;$++){let ae=q;w[$]!==""&&(ae+="="+Xi(w[$])),h.push(ae)}}return this.i=h.join("&")};function Wc(h){const v=new Os;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Ms(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Oa(h,v){v&&!h.j&&(cn(h),h.i=null,h.g.forEach(function(w,S){const q=S.toLowerCase();S!=q&&(Xc(this,S),ja(this,q,w))},h)),h.j=v}function Zn(h,v){const w=new Xn;if(u.Image){const S=new Image;S.onload=b(Dn,w,"TestLoadImage: loaded",!0,v,S),S.onerror=b(Dn,w,"TestLoadImage: error",!1,v,S),S.onabort=b(Dn,w,"TestLoadImage: abort",!1,v,S),S.ontimeout=b(Dn,w,"TestLoadImage: timeout",!1,v,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else v(!1)}function nl(h,v){const w=new Xn,S=new AbortController,q=setTimeout(()=>{S.abort(),Dn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:S.signal}).then($=>{clearTimeout(q),$.ok?Dn(w,"TestPingServer: ok",!0,v):Dn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Dn(w,"TestPingServer: error",!1,v)})}function Dn(h,v,w,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(w)}catch{}}function Ps(){this.g=new Lc}function Ai(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Ai,Uc),Ai.prototype.g=function(){return new zr(this.i,this.h)};function zr(h,v){bt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(zr,bt),i=zr.prototype,i.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,ei(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ks(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ma(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ma(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ks(this):ei(this),this.readyState==3&&Ma(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,ks(this))},i.Na=function(h){this.g&&(this.response=h,ks(this))},i.ga=function(){this.g&&ks(this)};function ks(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ei(h)}i.setRequestHeader=function(h,v){this.A.append(h,v)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function ei(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function jn(h){let v="";return Se(h,function(w,S){v+=S,v+=":",v+=w,v+=`\r
`}),v}function Br(h,v,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=jn(w),typeof h=="string"?w!=null&&Xi(w):$e(h,v,w))}function Je(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Je,bt);var Ni=/^https?$/i,il=["POST","PUT"];i=Je.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,v,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qo.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch($){Fr(this,$);return}if(h=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)w.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const $ of S.keys())w.set($,S.get($));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find($=>$.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(il,v,void 0)>=0)||S||q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ae]of w)this.g.setRequestHeader($,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Fr(this,$)}};function Fr(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,sl(h),Wi(h)}function sl(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Mt(this,"complete"),Mt(this,"abort"),Wi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),Je.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?qr(this):this.Xa())},i.Xa=function(){qr(this)};function qr(h){if(h.h&&typeof c<"u"){if(h.v&&ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(Mt(h,"readystatechange"),ti(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var S;if(S=$===0){let ae=String(h.D).match(Kc)[1]||null;!ae&&u.self&&u.self.location&&(ae=u.self.location.protocol.slice(0,-1)),S=!Ni.test(ae?ae.toLowerCase():"")}w=S}if(w)Mt(h,"complete"),Mt(h,"success");else{h.o=6;try{var q=ti(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",sl(h)}}finally{Wi(h)}}}}function Wi(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,v||Mt(h,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ti(h){return h.g?h.g.readyState:0}i.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Hd(v)}};function qt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ji(h){const v={};h=(h.g&&ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(I(h[S]))continue;var w=Hc(h[S]);const q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const $=v[q]||[];v[q]=$,$.push(w)}je(v,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function Vs(h){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ri("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ri("baseRetryDelayMs",5e3,h),this.Za=Ri("retryDelaySeedMs",1e4,h),this.Ta=Ri("forwardChannelMaxRetries",2,h),this.va=Ri("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ko(h&&h.concurrentRequestLimit),this.Ba=new Ps,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Vs.prototype,i.ka=8,i.I=1,i.connect=function(h,v,w,S){xt(0),this.W=h,this.H=v||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.J=su(this,null,this.W),Ci(this)};function rl(h){if(Pa(h),h.I==3){var v=h.V++,w=Tt(h.J);if($e(w,"SID",h.M),$e(w,"RID",v),$e(w,"TYPE","terminate"),Hr(h,w),v=new Wn(h,h.j,v),v.M=2,v.A=Lr(Tt(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=v.A,w=!0),w||(v.g=ru(v.j,null),v.g.ea(v.A)),v.F=Date.now(),bi(v)}iu(h)}function Ls(h){h.g&&(ol(h),h.g.cancel(),h.g=null)}function Pa(h){Ls(h),h.v&&(u.clearTimeout(h.v),h.v=null),Va(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Ci(h){if(!Yo(h.h)&&!h.m){h.m=!0;var v=h.Ea;oe||A(),ue||(oe(),ue=!0),C.add(v,h),h.D=0}}function ka(h,v){return Ei(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=yi(y(h.Ea,h,v),nu(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Wn(this,this.j,h);let $=this.o;if(this.U&&($?($=j($),ce($,this.U)):$=this.U),this.u!==null||this.R||(q.J=$,$=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Jc(this,q,v),w=Tt(this.J),$e(w,"RID",h),$e(w,"CVER",22),this.G&&$e(w,"X-HTTP-Session-Id",this.G),Hr(this,w),$&&(this.R?v="headers="+Xi(jn($))+"&"+v:this.u&&Br(w,this.u,$)),$o(this.h,q),this.Ra&&$e(w,"TYPE","init"),this.S?($e(w,"$req",v),$e(w,"SID","null"),q.U=!0,_i(q,w,null)):_i(q,w,v),this.I=2}}else this.I==3&&(h?al(this,h):this.i.length==0||Yo(this.h)||al(this))};function al(h,v){var w;v?w=v.l:w=h.V++;const S=Tt(h.J);$e(S,"SID",h.M),$e(S,"RID",w),$e(S,"AID",h.K),Hr(h,S),h.u&&h.o&&Br(S,h.u,h.o),w=new Wn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Jc(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),$o(h.h,w),_i(w,S,v)}function Hr(h,v){h.H&&Se(h.H,function(w,S){$e(v,S,w)}),h.l&&Se({},function(w,S){$e(v,S,w)})}function Jc(h,v,w){w=Math.min(h.i.length,w);const S=h.l?y(h.l.Ka,h.l,h):null;e:{var q=h.i;let Ce=-1;for(;;){const gt=["count="+w];Ce==-1?w>0?(Ce=q[0].g,gt.push("ofs="+Ce)):Ce=0:gt.push("ofs="+Ce);let Qe=!0;for(let lt=0;lt<w;lt++){var $=q[lt].g;const On=q[lt].map;if($-=Ce,$<0)Ce=Math.max(0,q[lt].g-100),Qe=!1;else try{$="req"+$+"_"||"";try{var ae=On instanceof Map?On:Object.entries(On);for(const[Di,ni]of ae){let ii=ni;p(ni)&&(ii=Is(ni)),gt.push($+Di+"="+encodeURIComponent(ii))}}catch(Di){throw gt.push($+"type="+encodeURIComponent("_badmap")),Di}}catch{S&&S(On)}}if(Qe){ae=gt.join("&");break e}}ae=void 0}return h=h.i.splice(0,w),v.G=h,ae}function Zc(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;oe||A(),ue||(oe(),ue=!0),C.add(v,h),h.A=0}}function Gr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=yi(y(h.Da,h),nu(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=yi(y(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ls(this),eu(this))};function ol(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function eu(h){h.g=new Wn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Tt(h.na);$e(v,"RID","rpc"),$e(v,"SID",h.M),$e(v,"AID",h.K),$e(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&$e(v,"TO",h.ia),$e(v,"TYPE","xmlhttp"),Hr(h,v),h.u&&h.o&&Br(v,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Lr(Tt(v)),w.u=null,w.R=!0,Ra(w,h)}i.Va=function(){this.C!=null&&(this.C=null,Ls(this),Gr(this),xt(19))};function Va(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function tu(h,v){var w=null;if(h.g==v){Va(h),ol(h),h.g=null;var S=2}else if(Ti(h.h,v))w=v.G,Xo(h.h,v),S=1;else return;if(h.I!=0){if(v.o)if(S==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var q=h.D;S=Na(),Mt(S,new gi(S,w)),Ci(h)}else Zc(h);else if(q=v.m,q==3||q==0&&v.X>0||!(S==1&&ka(h,v)||S==2&&Gr(h)))switch(w&&w.length>0&&(v=h.h,v.i=v.i.concat(w)),q){case 1:Ii(h,5);break;case 4:Ii(h,10);break;case 3:Ii(h,6);break;default:Ii(h,2)}}}function nu(h,v){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*v}function Ii(h,v){if(h.j.info("Error code "+v),v==2){var w=y(h.bb,h),S=h.Ua;const q=!S;S=new bn(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ut(S,"https"),Lr(S),q?Zn(S.toString(),w):nl(S.toString(),w)}else xt(2);h.I=0,h.l&&h.l.pa(v),iu(h),Pa(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function iu(h){if(h.I=0,h.ja=[],h.l){const v=Wo(h.h);(v.length!=0||h.i.length!=0)&&(O(h.ja,v),O(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function su(h,v,w){var S=w instanceof bn?Tt(w):new bn(w);if(S.g!="")v&&(S.g=v+"."+S.g),Ds(S,S.u);else{var q=u.location;S=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;const $=new bn(null);S&&Ut($,S),v&&($.g=v),q&&Ds($,q),w&&($.h=w),S=$}return w=h.G,v=h.wa,w&&v&&$e(S,w,v),$e(S,"VER",h.ka),Hr(h,S),S}function ru(h,v,w){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Je(new Ai({ab:w})):new Je(h.ma),v.Fa(h.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function au(){}i=au.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Us(){}Us.prototype.g=function(h,v){return new sn(h,v)};function sn(h,v){bt.call(this),this.g=new Vs(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!I(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Zi(this)}x(sn,bt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){rl(this.g)},sn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Is(h),h=w);v.i.push(new Et(v.Ya++,h)),v.I==3&&Ci(v)},sn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,sn.Z.N.call(this)};function ou(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}x(ou,Ft);function lu(){Cn.call(this),this.status=1}x(lu,Cn);function Zi(h){this.g=h}x(Zi,au),Zi.prototype.ra=function(){Mt(this.g,"a")},Zi.prototype.qa=function(h){Mt(this.g,new ou(h))},Zi.prototype.pa=function(h){Mt(this.g,new lu)},Zi.prototype.oa=function(){Mt(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,$w=function(){return new Us},Yw=function(){return Na()},Kw=pt,Np={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,Dh=kr,Go.COMPLETE="complete",Qw=Go,zc.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Jl=zc,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,Gw=Je}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});const Eb="@firebase/firestore",Tb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new ng("@firebase/firestore");function go(){return ya.logLevel}function fe(i,...e){if(ya.logLevel<=Le.DEBUG){const n=e.map(pg);ya.debug(`Firestore (${Mo}): ${i}`,...n)}}function Ts(i,...e){if(ya.logLevel<=Le.ERROR){const n=e.map(pg);ya.error(`Firestore (${Mo}): ${i}`,...n)}}function To(i,...e){if(ya.logLevel<=Le.WARN){const n=e.map(pg);ya.warn(`Firestore (${Mo}): ${i}`,...n)}}function pg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Xw(i,r,n)}function Xw(i,e,n){let r=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ts(r),new Error(r)}function Ye(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||Xw(e,o,r)}function Re(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Yi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Zt.UNAUTHENTICATED)))}shutdown(){}}class fI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class mI{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new bs,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new bs)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new Ww(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class pI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new pI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const r=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=vI(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ue(i,e){return i<e?-1:i>e?1:0}function Rp(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return ip(o)===ip(c)?Ue(o,c):ip(o)?1:-1}return Ue(i.length,e.length)}const _I=55296,bI=57343;function ip(i){const e=i.charCodeAt(0);return e>=_I&&e<=bI}function So(i,e,n){return i.length===e.length&&i.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="__name__";class ki{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=ki.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ue(e.length,n.length)}static compareSegments(e,n){const r=ki.isNumericId(e),o=ki.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?ki.extractNumericId(e).compare(ki.extractNumericId(n)):Rp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pr.fromString(e.substring(4,e.length-2))}}class it extends ki{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new it(n)}static emptyPath(){return new it([])}}const xI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends ki{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return xI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ab}static keyField(){return new $t([Ab])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new de(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(u=!u,o++):p!=="."||u?(r+=p,o++):(c(),o++)}if(c(),u)throw new de(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(it.fromString(e))}static fromName(e){return new ve(it.fromString(e).popFirst(5))}static empty(){return new ve(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(i,e,n){if(!n)throw new de(te.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function wI(i,e,n,r){if(e===!0&&r===!0)throw new de(te.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Nb(i){if(!ve.isDocumentKey(i))throw new de(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Rb(i){if(ve.isDocumentKey(i))throw new de(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Zw(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function yd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":we(12329,{type:typeof i})}function vn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new de(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yd(i);throw new de(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function EI(i,e){if(e<=0)throw new de(te.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Dc(i,e){if(!Zw(i))throw new de(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const u=i[r];if(o&&typeof u!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new de(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=-62135596800,Ib=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ib);return new at(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cb)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ib}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dc(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Dt("string",at._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new at(0,0))}static max(){return new Te(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function TI(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(r===1e9?new at(n+1,0):new at(n,r));return new vr(o,ve.empty(),e)}function SI(i){return new vr(i.readTime,i.key,mc)}class vr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vr(Te.min(),ve.empty(),mc)}static max(){return new vr(Te.max(),ve.empty(),mc)}}function AI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(i.documentKey,e.documentKey),n!==0?n:Ue(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(i){if(i.code!==te.FAILED_PRECONDITION||i.message!==NI)throw i;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,r)=>{n(e)}))}static reject(e){return new ie(((n,r)=>{r(e)}))}static waitFor(e){return new ie(((n,r)=>{let o=0,c=0,u=!1;e.forEach((p=>{++o,p.next((()=>{++c,u&&c===o&&n()}),(g=>r(g)))})),u=!0,c===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next((o=>o?ie.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new ie(((r,o)=>{const c=e.length,u=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((b=>{u[y]=b,++p,p===c&&r(u)}),(b=>o(b)))}}))}static doWhile(e,n){return new ie(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function CI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=-1;function _d(i){return i==null}function Yh(i){return i===0&&1/i==-1/0}function II(i){return typeof i=="number"&&Number.isInteger(i)&&!Yh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="";function DI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Db(e)),e=jI(i.get(n),e);return Db(e)}function jI(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case eE:n+="";break;default:n+=c}}return n}function Db(i){return i+eE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Cr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function tE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}}class gh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Yt.RED,this.left=o??Yt.EMPTY,this.right=c??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Yt(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Yt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ob(this.data.getIterator())}getIteratorFrom(e){return new Ob(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class Ob{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Vt($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new nE("Invalid base64 string: "+c):c}})(e);return new Xt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const OI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(i){if(Ye(!!i,39018),typeof i=="string"){let e=0;const n=OI.exec(i);if(Ye(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(i.seconds),nanos:_t(i.nanos)}}function _t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function br(i){return typeof i=="string"?Xt.fromBase64String(i):Xt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="server_timestamp",sE="__type__",rE="__previous_value__",aE="__local_write_time__";function vg(i){return(i?.mapValue?.fields||{})[sE]?.stringValue===iE}function bd(i){const e=i.mapValue.fields[rE];return vg(e)?bd(e):e}function pc(i){const e=_r(i.mapValue.fields[aE].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,r,o,c,u,p,g,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const $h="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||$h}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===$h}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="__type__",PI="__max__",yh={mapValue:{}},lE="__vector__",Xh="value";function xr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?vg(i)?4:VI(i)?9007199254740991:kI(i)?10:11:we(28295,{value:i})}function Hi(i,e){if(i===e)return!0;const n=xr(i);if(n!==xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return pc(i).isEqual(pc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=_r(o.timestampValue),p=_r(c.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return br(o.bytesValue).isEqual(br(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return _t(o.geoPointValue.latitude)===_t(c.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return _t(o.integerValue)===_t(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=_t(o.doubleValue),p=_t(c.doubleValue);return u===p?Yh(u)===Yh(p):isNaN(u)&&isNaN(p)}return!1})(i,e);case 9:return So(i.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},p=c.mapValue.fields||{};if(jb(u)!==jb(p))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(p[g]===void 0||!Hi(u[g],p[g])))return!1;return!0})(i,e);default:return we(52216,{left:i})}}function yc(i,e){return(i.values||[]).find((n=>Hi(n,e)))!==void 0}function Ao(i,e){if(i===e)return 0;const n=xr(i),r=xr(e);if(n!==r)return Ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const p=_t(c.integerValue||c.doubleValue),g=_t(u.integerValue||u.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(i,e);case 3:return Mb(i.timestampValue,e.timestampValue);case 4:return Mb(pc(i),pc(e));case 5:return Rp(i.stringValue,e.stringValue);case 6:return(function(c,u){const p=br(c),g=br(u);return p.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const p=c.split("/"),g=u.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Ue(p[y],g[y]);if(b!==0)return b}return Ue(p.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const p=Ue(_t(c.latitude),_t(u.latitude));return p!==0?p:Ue(_t(c.longitude),_t(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Pb(i.arrayValue,e.arrayValue);case 10:return(function(c,u){const p=c.fields||{},g=u.fields||{},y=p[Xh]?.arrayValue,b=g[Xh]?.arrayValue,x=Ue(y?.values?.length||0,b?.values?.length||0);return x!==0?x:Pb(y,b)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===yh.mapValue&&u===yh.mapValue)return 0;if(c===yh.mapValue)return 1;if(u===yh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=u.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let x=0;x<g.length&&x<b.length;++x){const E=Rp(g[x],b[x]);if(E!==0)return E;const N=Ao(p[g[x]],y[b[x]]);if(N!==0)return N}return Ue(g.length,b.length)})(i.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Mb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ue(i,e);const n=_r(i),r=_r(e),o=Ue(n.seconds,r.seconds);return o!==0?o:Ue(n.nanos,r.nanos)}function Pb(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=Ao(n[o],r[o]);if(c)return c}return Ue(n.length,r.length)}function No(i){return Cp(i)}function Cp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=_r(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return br(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ve.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Cp(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const u of r)c?c=!1:o+=",",o+=`${u}:${Cp(n.fields[u])}`;return o+"}"})(i.mapValue):we(61005,{value:i})}function jh(i){switch(xr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bd(i);return e?16+jh(e):16;case 5:return 2*i.stringValue.length;case 6:return br(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+jh(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return Cr(r.fields,((c,u)=>{o+=c.length+jh(u)})),o})(i.mapValue);default:throw we(13486,{value:i})}}function kb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ip(i){return!!i&&"integerValue"in i}function _g(i){return!!i&&"arrayValue"in i}function Vb(i){return!!i&&"nullValue"in i}function Lb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Oh(i){return!!i&&"mapValue"in i}function kI(i){return(i?.mapValue?.fields||{})[oE]?.stringValue===lE}function sc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Cr(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=sc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(i.arrayValue.values[n]);return e}return{...i}}function VI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===PI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=$t.emptyPath(),r={},o=[];e.forEach(((u,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}u?r[p.lastSegment()]=sc(u):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Oh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Cr(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new yn(sc(this.value))}}function cE(i){const e=[];return Cr(i.fields,((n,r)=>{const o=new $t([n]);if(Oh(r)){const c=cE(r.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,r,o,c,u,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=u,this.documentState=p}static newInvalidDocument(e){return new en(e,0,Te.min(),Te.min(),Te.min(),yn.empty(),0)}static newFoundDocument(e,n,r,o){return new en(e,1,n,Te.min(),r,o,0)}static newNoDocument(e,n){return new en(e,2,n,Te.min(),Te.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,Te.min(),Te.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.position=e,this.inclusive=n}}function Ub(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?r=ve.comparator(ve.fromName(u.referenceValue),n.key):r=Ao(u,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function zb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Hi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function LI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{}class It extends uE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zI(e,n,r):n==="array-contains"?new qI(e,r):n==="in"?new HI(e,r):n==="not-in"?new GI(e,r):n==="array-contains-any"?new QI(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new BI(e,r):new FI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ao(n,this.value)):n!==null&&xr(this.value)===xr(n)&&this.matchesComparison(Ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends uE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new di(e,n)}matches(e){return hE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hE(i){return i.op==="and"}function dE(i){return UI(i)&&hE(i)}function UI(i){for(const e of i.filters)if(e instanceof di)return!1;return!0}function Dp(i){if(i instanceof It)return i.field.canonicalString()+i.op.toString()+No(i.value);if(dE(i))return i.filters.map((e=>Dp(e))).join(",");{const e=i.filters.map((n=>Dp(n))).join(",");return`${i.op}(${e})`}}function fE(i,e){return i instanceof It?(function(r,o){return o instanceof It&&r.op===o.op&&r.field.isEqual(o.field)&&Hi(r.value,o.value)})(i,e):i instanceof di?(function(r,o){return o instanceof di&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,u,p)=>c&&fE(u,o.filters[p])),!0):!1})(i,e):void we(19439)}function mE(i){return i instanceof It?(function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`})(i):i instanceof di?(function(n){return n.op.toString()+" {"+n.getFilters().map(mE).join(" ,")+"}"})(i):"Filter"}class zI extends It{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class BI extends It{constructor(e,n){super(e,"in",n),this.keys=pE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class FI extends It{constructor(e,n){super(e,"not-in",n),this.keys=pE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pE(i,e){return(e.arrayValue?.values||[]).map((n=>ve.fromName(n.referenceValue)))}class qI extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _g(n)&&yc(n.arrayValue,this.value)}}class HI extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class GI extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yc(this.value.arrayValue,n)}}class QI extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_g(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>yc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n=null,r=[],o=[],c=null,u=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=u,this.endAt=p,this.Te=null}}function Bb(i,e=null,n=[],r=[],o=null,c=null,u=null){return new KI(i,e,n,r,o,c,u)}function bg(i){const e=Re(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Dp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>No(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>No(r))).join(",")),e.Te=n}return e.Te}function xg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!LI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!fE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!zb(i.startAt,e.startAt)&&zb(i.endAt,e.endAt)}function jp(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n=null,r=[],o=[],c=null,u="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=u,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YI(i,e,n,r,o,c,u,p){return new Vo(i,e,n,r,o,c,u,p)}function xd(i){return new Vo(i)}function Fb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function gE(i){return i.collectionGroup!==null}function rc(i){const e=Re(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new Vt($t.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new vc(c,r))})),n.has($t.keyField().canonicalString())||e.Ie.push(new vc($t.keyField(),r))}return e.Ie}function zi(i){const e=Re(i);return e.Ee||(e.Ee=$I(e,rc(i))),e.Ee}function $I(i,e){if(i.limitType==="F")return Bb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new vc(o.field,c)}));const n=i.endAt?new Wh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Wh(i.startAt.position,i.startAt.inclusive):null;return Bb(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Op(i,e){const n=i.filters.concat([e]);return new Vo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Jh(i,e,n){return new Vo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function wd(i,e){return xg(zi(i),zi(e))&&i.limitType===e.limitType}function yE(i){return`${bg(zi(i))}|lt:${i.limitType}`}function yo(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>mE(o))).join(", ")}]`),_d(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>No(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>No(o))).join(",")),`Target(${r})`})(zi(i))}; limitType=${i.limitType})`}function Ed(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):ve.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of rc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(u,p,g){const y=Ub(u,p,g);return u.inclusive?y<=0:y<0})(r.startAt,rc(r),o)||r.endAt&&!(function(u,p,g){const y=Ub(u,p,g);return u.inclusive?y>=0:y>0})(r.endAt,rc(r),o))})(i,e)}function XI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function vE(i){return(e,n)=>{let r=!1;for(const o of rc(i)){const c=WI(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function WI(i,e,n){const r=i.field.isKeyField()?ve.comparator(e.key,n.key):(function(c,u,p){const g=u.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Ao(g,y):we(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cr(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return tE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new ht(ve.comparator);function Ss(){return JI}const _E=new ht(ve.comparator);function Zl(...i){let e=_E;for(const n of i)e=e.insert(n.key,n);return e}function bE(i){let e=_E;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ua(){return ac()}function xE(){return ac()}function ac(){return new wa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const ZI=new ht(ve.comparator),eD=new Vt(ve.comparator);function ze(...i){let e=eD;for(const n of i)e=e.add(n);return e}const tD=new Vt(Ue);function nD(){return tD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function wE(i){return{integerValue:""+i}}function iD(i,e){return II(e)?wE(e):wg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(){this._=void 0}}function sD(i,e,n){return i instanceof _c?(function(o,c){const u={fields:{[sE]:{stringValue:iE},[aE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&vg(c)&&(c=bd(c)),c&&(u.fields[rE]=c),{mapValue:u}})(n,e):i instanceof bc?TE(i,e):i instanceof xc?SE(i,e):(function(o,c){const u=EE(o,c),p=qb(u)+qb(o.Ae);return Ip(u)&&Ip(o.Ae)?wE(p):wg(o.serializer,p)})(i,e)}function rD(i,e,n){return i instanceof bc?TE(i,e):i instanceof xc?SE(i,e):n}function EE(i,e){return i instanceof Zh?(function(r){return Ip(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class _c extends Td{}class bc extends Td{constructor(e){super(),this.elements=e}}function TE(i,e){const n=AE(e);for(const r of i.elements)n.some((o=>Hi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class xc extends Td{constructor(e){super(),this.elements=e}}function SE(i,e){let n=AE(e);for(const r of i.elements)n=n.filter((o=>!Hi(o,r)));return{arrayValue:{values:n}}}class Zh extends Td{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qb(i){return _t(i.integerValue||i.doubleValue)}function AE(i){return _g(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.field=e,this.transform=n}}function oD(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof bc&&o instanceof bc||r instanceof xc&&o instanceof xc?So(r.elements,o.elements,Hi):r instanceof Zh&&o instanceof Zh?Hi(r.Ae,o.Ae):r instanceof _c&&o instanceof _c})(i.transform,e.transform)}class lD{constructor(e,n){this.version=e,this.transformResults=n}}class Hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Sd{}function NE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Eg(i.key,Hn.none()):new jc(i.key,i.data,Hn.none());{const n=i.data,r=yn.empty();let o=new Vt($t.comparator);for(let c of e.fields)if(!o.has(c)){let u=n.field(c);u===null&&c.length>1&&(c=c.popLast(),u=n.field(c)),u===null?r.delete(c):r.set(c,u),o=o.add(c)}return new Ir(i.key,r,new Rn(o.toArray()),Hn.none())}}function cD(i,e,n){i instanceof jc?(function(o,c,u){const p=o.value.clone(),g=Gb(o.fieldTransforms,c,u.transformResults);p.setAll(g),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(i,e,n):i instanceof Ir?(function(o,c,u){if(!Mh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const p=Gb(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(RE(o)),g.setAll(p),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,n):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function oc(i,e,n,r){return i instanceof jc?(function(c,u,p,g){if(!Mh(c.precondition,u))return p;const y=c.value.clone(),b=Qb(c.fieldTransforms,g,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(i,e,n,r):i instanceof Ir?(function(c,u,p,g){if(!Mh(c.precondition,u))return p;const y=Qb(c.fieldTransforms,g,u),b=u.data;return b.setAll(RE(c)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((x=>x.field)))})(i,e,n,r):(function(c,u,p){return Mh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(i,e,n)}function uD(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=EE(r.transform,o||null);c!=null&&(n===null&&(n=yn.empty()),n.set(r.field,c))}return n||null}function Hb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&So(r,o,((c,u)=>oD(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class jc extends Sd{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ir extends Sd{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function RE(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function Gb(i,e,n){const r=new Map;Ye(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],u=c.transform,p=e.data.field(c.field);r.set(c.field,rD(u,p,n[o]))}return r}function Qb(i,e,n){const r=new Map;for(const o of i){const c=o.transform,u=n.data.field(o.field);r.set(o.field,sD(c,u,e))}return r}class Eg extends Sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hD extends Sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&cD(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xE();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let p=this.applyToLocalView(u,c.mutatedFields);p=n.has(o.key)?null:p;const g=NE(u,p);g!==null&&r.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Te.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,((n,r)=>Hb(n,r)))&&So(this.baseMutations,e.baseMutations,((n,r)=>Hb(n,r)))}}class Tg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return ZI})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,r[u].version);return new Tg(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,qe;function pD(i){switch(i){case te.OK:return we(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return we(15467,{code:i})}}function CE(i){if(i===void 0)return Ts("GRPC error has no .code"),te.UNKNOWN;switch(i){case Ct.OK:return te.OK;case Ct.CANCELLED:return te.CANCELLED;case Ct.UNKNOWN:return te.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return te.INTERNAL;case Ct.UNAVAILABLE:return te.UNAVAILABLE;case Ct.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ct.NOT_FOUND:return te.NOT_FOUND;case Ct.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ct.ABORTED:return te.ABORTED;case Ct.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ct.DATA_LOSS:return te.DATA_LOSS;default:return we(39323,{code:i})}}(qe=Ct||(Ct={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new pr([4294967295,4294967295],0);function Kb(i){const e=gD().encode(i),n=new Hw;return n.update(e),new Uint8Array(n.digest())}function Yb(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new pr([n,r],0),new pr([o,c],0)]}class Sg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ec(`Invalid padding: ${n}`);if(r<0)throw new ec(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ec(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=pr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(pr.fromNumber(r)));return o.compare(yD)===1&&(o=new pr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Kb(e),[r,o]=Yb(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);if(!this.we(u))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Sg(c,o,n);return r.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const n=Kb(e),[r,o]=Yb(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ad(Te.min(),o,new ht(Ue),Ss(),ze())}}class Oc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oc(r,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class IE{constructor(e,n){this.targetId=e,this.Ce=n}}class DE{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class $b{constructor(){this.ve=0,this.Fe=Xb(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),r=ze();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:we(38017,{changeType:c})}})),new Oc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Xb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ss(),this.Je=vh(),this.He=vh(),this.Ye=new ht(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(jp(c))if(r===0){const u=new ve(c.path);this.et(n,u,en.newNoDocument(u,Te.min()))}else Ye(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const p=this.ut(e),g=p?this.ct(p,e,u):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let u,p;try{u=br(r).toUint8Array()}catch(g){if(g instanceof nE)return To("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Sg(u,o,c)}catch(g){return To(g instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,u)=>{const p=this.ot(u);if(p){if(c.current&&jp(p.target)){const g=new ve(p.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,en.newNoDocument(g,e))}c.Be&&(n.set(u,c.ke()),c.qe())}}));let r=ze();this.He.forEach(((c,u)=>{let p=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Ad(e,n,this.Ye,this.je,r);return this.je=Ss(),this.Je=vh(),this.He=vh(),this.Ye=new ht(Ue),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new $b,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vt(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vt(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $b),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vh(){return new ht(ve.comparator)}function Xb(){return new ht(ve.comparator)}const _D={asc:"ASCENDING",desc:"DESCENDING"},bD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xD={and:"AND",or:"OR"};class wD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mp(i,e){return i.useProto3Json||_d(e)?e:{value:e}}function ed(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function ED(i,e){return ed(i,e.toTimestamp())}function Bi(i){return Ye(!!i,49232),Te.fromTimestamp((function(n){const r=_r(n);return new at(r.seconds,r.nanos)})(i))}function Ag(i,e){return Pp(i,e).canonicalString()}function Pp(i,e){const n=(function(o){return new it(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function OE(i){const e=it.fromString(i);return Ye(LE(e),10190,{key:e.toString()}),e}function kp(i,e){return Ag(i.databaseId,e.path)}function sp(i,e){const n=OE(e);if(n.get(1)!==i.databaseId.projectId)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ve(PE(n))}function ME(i,e){return Ag(i.databaseId,e)}function TD(i){const e=OE(i);return e.length===4?it.emptyPath():PE(e)}function Vp(i){return new it(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function PE(i){return Ye(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Wb(i,e,n){return{name:kp(i,e),fields:n.value.mapValue.fields}}function SD(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(Ye(b===void 0||typeof b=="string",58123),Xt.fromBase64String(b||"")):(Ye(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Xt.fromUint8Array(b||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const b=y.code===void 0?te.UNKNOWN:CE(y.code);return new de(b,y.message||"")})(u);n=new DE(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=sp(i,r.document.name),c=Bi(r.document.updateTime),u=r.document.createTime?Bi(r.document.createTime):Te.min(),p=new yn({mapValue:{fields:r.document.fields}}),g=en.newFoundDocument(o,c,u,p),y=r.targetIds||[],b=r.removedTargetIds||[];n=new Ph(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=sp(i,r.document),c=r.readTime?Bi(r.readTime):Te.min(),u=en.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Ph([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=sp(i,r.document),c=r.removedTargetIds||[];n=new Ph([],c,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,u=new mD(o,c),p=r.targetId;n=new IE(p,u)}}return n}function AD(i,e){let n;if(e instanceof jc)n={update:Wb(i,e.key,e.value)};else if(e instanceof Eg)n={delete:kp(i,e.key)};else if(e instanceof Ir)n={update:Wb(i,e.key,e.data),updateMask:PD(e.fieldMask)};else{if(!(e instanceof hD))return we(16599,{Vt:e.type});n={verify:kp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const p=u.transform;if(p instanceof _c)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof bc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof xc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zh)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw we(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:ED(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(i,e.precondition)),n}function ND(i,e){return i&&i.length>0?(Ye(e!==void 0,14353),i.map((n=>(function(o,c){let u=o.updateTime?Bi(o.updateTime):Bi(c);return u.isEqual(Te.min())&&(u=Bi(c)),new lD(u,o.transformResults||[])})(n,e)))):[]}function RD(i,e){return{documents:[ME(i,e.path)]}}function CD(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ME(i,o);const c=(function(y){if(y.length!==0)return VE(di.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const u=(function(y){if(y.length!==0)return y.map((b=>(function(E){return{field:vo(E.field),direction:jD(E.dir)}})(b)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const p=Mp(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function ID(i){let e=TD(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ye(r===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(x){const E=kE(x);return E instanceof di&&dE(E)?E.getFilters():[E]})(n.where));let u=[];n.orderBy&&(u=(function(x){return x.map((E=>(function(O){return new vc(_o(O.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(E)))})(n.orderBy));let p=null;n.limit&&(p=(function(x){let E;return E=typeof x=="object"?x.value:x,_d(E)?null:E})(n.limit));let g=null;n.startAt&&(g=(function(x){const E=!!x.before,N=x.values||[];return new Wh(N,E)})(n.startAt));let y=null;return n.endAt&&(y=(function(x){const E=!x.before,N=x.values||[];return new Wh(N,E)})(n.endAt)),YI(e,o,u,c,p,"F",g,y)}function DD(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kE(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_o(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=_o(n.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=_o(n.unaryFilter.field);return It.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=_o(n.unaryFilter.field);return It.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(i):i.fieldFilter!==void 0?(function(n){return It.create(_o(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return di.create(n.compositeFilter.filters.map((r=>kE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(i):we(30097,{filter:i})}function jD(i){return _D[i]}function OD(i){return bD[i]}function MD(i){return xD[i]}function vo(i){return{fieldPath:i.canonicalString()}}function _o(i){return $t.fromServerFormat(i.fieldPath)}function VE(i){return i instanceof It?(function(n){if(n.op==="=="){if(Lb(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NAN"}};if(Vb(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lb(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NAN"}};if(Vb(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(n.field),op:OD(n.op),value:n.value}}})(i):i instanceof di?(function(n){const r=n.getFilters().map((o=>VE(o)));return r.length===1?r[0]:{compositeFilter:{op:MD(n.op),filters:r}}})(i):we(54877,{filter:i})}function PD(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r,o,c=Te.min(),u=Te.min(),p=Xt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.yt=e}}function VD(i){const e=ID({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.Cn=new UD}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(vr.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(vr.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class UD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Vt(it.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Vt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UE=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(UE,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ro(0)}static cr(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="LruGarbageCollector",zD=1048576;function ex([i,e],[n,r]){const o=Ue(i,n);return o===0?Ue(e,r):o}class BD{constructor(e){this.Ir=e,this.buffer=new Vt(ex),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ex(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(Zb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?fe(Zb,"Ignoring IndexedDB error during garbage collection: ",n):await Po(n)}await this.Vr(3e5)}))}}class qD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(vd.ce);const r=new BD(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Jb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,u,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,u=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(r=x,p=Date.now(),this.removeTargets(e,r,n)))).next((x=>(c=x,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(y=Date.now(),go()<=Le.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${o} in `+(p-u)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x}))))}}function HD(i,e){return new qD(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.changes=new wa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&oc(r.mutation,o,Rn.empty(),at.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ze()){const o=ua();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let u=Zl();return c.forEach(((p,g)=>{u=u.insert(p,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=ua();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ze())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,p)=>{n.set(u,p)}))}))}computeViews(e,n,r,o){let c=Ss();const u=ac(),p=(function(){return ac()})();return n.forEach(((g,y)=>{const b=r.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof Ir)?c=c.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),oc(b.mutation,y,b.mutation.getFieldMask(),at.now())):u.set(y.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,b)=>u.set(y,b))),n.forEach(((y,b)=>p.set(y,new QD(b,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=ac();let o=new ht(((u,p)=>u-p)),c=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const p of u)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=r.get(g)||Rn.empty();b=p.applyToLocalView(y,b),r.set(g,b);const x=(o.get(p.batchId)||ze()).add(g);o=o.insert(p.batchId,x)}))})).next((()=>{const u=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,x=xE();b.forEach((E=>{if(!c.has(E)){const N=NE(n.get(E),r.get(E));N!==null&&x.set(E,N),c=c.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,x))}return ie.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):ie.resolve(ua());let p=mc,g=c;return u.next((y=>ie.forEach(y,((b,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),c.get(b)?ie.resolve():this.remoteDocumentCache.getEntry(e,b).next((E=>{g=g.insert(b,E)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,ze()))).next((b=>({batchId:p,changes:bE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((r=>{let o=Zl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let u=Zl();return this.indexManager.getCollectionParents(e,c).next((p=>ie.forEach(p,(g=>{const y=(function(x,E){return new Vo(E,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((b=>{b.forEach(((x,E)=>{u=u.insert(x,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((u=>{c.forEach(((g,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,en.newInvalidDocument(b)))}));let p=Zl();return u.forEach(((g,y)=>{const b=c.get(g);b!==void 0&&oc(b.mutation,y,Rn.empty(),at.now()),Ed(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Bi(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:VD(o.bundledQuery),readTime:Bi(o.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.overlays=new ht(ve.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ua();return ie.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),ie.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const o=ua(),c=n.length+1,u=new ve(n.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new ht(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let b=c.get(y.largestBatchId);b===null&&(b=ua(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=ua(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=o)););return ie.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new fD(n,r));let c=this.qr.get(n);c===void 0&&(c=ze(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.Qr=new Vt(Bt.$r),this.Ur=new Vt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Bt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ve(new it([])),r=new Bt(n,e),o=new Bt(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new it([])),r=new Bt(n,e),o=new Bt(n,e+1);let c=ze();return this.Ur.forEachInRange([r,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const n=new Bt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Bt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new dD(c,n,r,o);this.mutationQueue.push(u);for(const p of o)this.Zr=this.Zr.add(new Bt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return ie.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?yg:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),o=new Bt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(u=>{const p=this.Xr(u.Yr);c.push(p)})),ie.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt(Ue);return n.forEach((o=>{const c=new Bt(o,0),u=new Bt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(p=>{r=r.add(p.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;ve.isDocumentKey(c)||(c=c.child(""));const u=new Bt(new ve(c),0);let p=new Vt(Ue);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),u),ie.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(n.mutations,(o=>{const c=new Bt(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Bt(n,0),o=this.Zr.firstAfterOrEqual(r);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.ri=e,this.docs=(function(){return new ht(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=Ss();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():en.newInvalidDocument(o))})),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=Ss();const u=n.path,p=new ve(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||AI(SI(b),r)<=0||(o.has(b.key)||Ed(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return ie.resolve(c)}getAllFromCollectionGroup(e,n,r,o){we(9500)}ii(e,n){return ie.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new ZD(this)}getSize(e){return ie.resolve(this.size)}}class ZD extends GD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.persistence=e,this.si=new wa((n=>bg(n)),xg),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Ng,this.targetCount=0,this.ai=Ro.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((u,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ie.waitFor(c).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),ie.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.ui={},this.overlays={},this.ci=new vd(0),this.li=!1,this.li=!0,this.hi=new XD,this.referenceDelegate=e(this),this.Pi=new ej(this),this.indexManager=new LD,this.remoteDocumentCache=(function(o){return new JD(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new kD(n),this.Ii=new YD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $D,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new WD(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe("MemoryPersistence","Starting transaction:",e);const o=new tj(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class tj extends RI{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.Ri=new Ng,this.Vi=null}static mi(e){return new Rg(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const o=ve.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class td{constructor(e,n){this.persistence=e,this.pi=new wa((r=>DI(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=HD(this,n)}static mi(e,n){return new td(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?ie.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,n).next((p=>{p||(r++,c.removeEntry(u,Te.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jh(e.data.value)),n}br(e,n,r){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ie.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=ze(),o=ze();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Cg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jN()?8:CI(tn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new nj;return this.Ss(e,n,u).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,u,p.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(go()<=Le.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(go()<=Le.DEBUG&&fe("QueryEngine","Query:",yo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(go()<=Le.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(n))):ie.resolve())}ys(e,n){if(Fb(n))return ie.resolve(null);let r=zi(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Jh(n,null,"F"),r=zi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=ze(...c);return this.ps.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,u,g.readTime)?this.ys(e,Jh(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,r,o){return Fb(n)||o.isEqual(Te.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((c=>{const u=this.Ds(n,c);return this.Cs(n,u,r,o)?ie.resolve(null):(go()<=Le.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(n)),this.vs(e,u,n,TI(o,mc)).next((p=>p)))}))}Ds(e,n){let r=new Vt(vE(e));return n.forEach(((o,c)=>{Ed(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return go()<=Le.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",yo(n)),this.ps.getDocumentsMatchingQuery(e,n,vr.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="LocalStore",sj=3e8;class rj{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ht(Ue),this.xs=new wa((c=>bg(c)),xg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function aj(i,e,n,r){return new rj(i,e,n,r)}async function BE(i,e){const n=Re(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],p=[];let g=ze();for(const y of o){u.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of c){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function oj(i,e){const n=Re(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const x=y.batch,E=x.keys();let N=ie.resolve();return E.forEach((O=>{N=N.next((()=>b.getEntry(g,O))).next((V=>{const k=y.docVersions.get(O);Ye(k!==null,48541),V.version.compareTo(k)<0&&(x.applyToRemoteDocument(V,y),V.isValidDocument()&&(V.setReadTime(y.commitVersion),b.addEntry(V)))}))})),N.next((()=>p.mutationQueue.removeMutationBatch(g,x)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=ze();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function FE(i){const e=Re(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function lj(i,e){const n=Re(i),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((b,x)=>{const E=o.get(x);if(!E)return;p.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(c,b.addedDocuments,x))));let N=E.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?N=N.withResumeToken(Xt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,r)),o=o.insert(x,N),(function(V,k,U){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=sj?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(E,N,b)&&p.push(n.Pi.updateTargetData(c,N))}));let g=Ss(),y=ze();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),p.push(cj(c,u,e.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!r.isEqual(Te.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next((x=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(b)}return ie.waitFor(p).next((()=>u.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function cj(i,e,n){let r=ze(),o=ze();return n.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let u=Ss();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(p,g.readTime),u=u.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(p,g)):fe(Ig,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function uj(i,e){const n=Re(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=yg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hj(i,e){const n=Re(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,ie.resolve(o)):n.Pi.allocateTargetId(r).next((u=>(o=new dr(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Lp(i,e,n){const r=Re(i),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!ko(u))throw u;fe(Ig,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function tx(i,e,n){const r=Re(i);let o=Te.min(),c=ze();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,b){const x=Re(g),E=x.xs.get(b);return E!==void 0?ie.resolve(x.Ms.get(E)):x.Pi.getTargetData(y,b)})(r,u,zi(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,p.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,n?o:Te.min(),n?c:ze()))).next((p=>(dj(r,XI(e),p),{documents:p,Qs:c})))))}function dj(i,e,n){let r=i.Os.get(e)||Te.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class nx{constructor(){this.activeTargetIds=nD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fj{constructor(){this.Mo=new nx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="ConnectivityMonitor";class sx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(ix,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(ix,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function Up(){return _h===null?_h=(function(){return 268435456+Math.round(2147483648*Math.random())})():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="RestConnection",pj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===$h?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const u=Up(),p=this.zo(e,n.toUriEncodedString());fe(rp,`Sending RPC '${e}' ${u}:`,p,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(p),b=ba(y);return this.Jo(e,p,g,r,b).then((x=>(fe(rp,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw To(rp,`RPC '${e}' ${u} failed with error: `,x,"url: ",p,"request:",r),x}))}Ho(e,n,r,o,c,u){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=pj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class vj extends gj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const u=Up();return new Promise(((p,g)=>{const y=new Gw;y.setWithCredentials(!0),y.listenOnce(Qw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Dh.NO_ERROR:const x=y.getResponseJson();fe(Jt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),p(x);break;case Dh.TIMEOUT:fe(Jt,`RPC '${e}' ${u} timed out`),g(new de(te.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const E=y.getStatus();if(fe(Jt,`RPC '${e}' ${u} failed with status:`,E,"response text:",y.getResponseText()),E>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const O=N?.error;if(O&&O.status&&O.message){const V=(function(U){const Q=U.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(Q)>=0?Q:te.UNKNOWN})(O.status);g(new de(V,O.message))}else g(new de(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new de(te.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{fe(Jt,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(o);fe(Jt,`RPC '${e}' ${u} sending request:`,o),y.send(n,"POST",b,r,15)}))}T_(e,n,r){const o=Up(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=$w(),p=Yw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const b=c.join("");fe(Jt,`Creating RPC '${e}' stream ${o}: ${b}`,g);const x=u.createWebChannel(b,g);this.I_(x);let E=!1,N=!1;const O=new yj({Yo:k=>{N?fe(Jt,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(E||(fe(Jt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),E=!0),fe(Jt,`RPC '${e}' stream ${o} sending:`,k),x.send(k))},Zo:()=>x.close()}),V=(k,U,Q)=>{k.listen(U,(W=>{try{Q(W)}catch(re){setTimeout((()=>{throw re}),0)}}))};return V(x,Jl.EventType.OPEN,(()=>{N||(fe(Jt,`RPC '${e}' stream ${o} transport opened.`),O.o_())})),V(x,Jl.EventType.CLOSE,(()=>{N||(N=!0,fe(Jt,`RPC '${e}' stream ${o} transport closed`),O.a_(),this.E_(x))})),V(x,Jl.EventType.ERROR,(k=>{N||(N=!0,To(Jt,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),O.a_(new de(te.UNAVAILABLE,"The operation could not be completed")))})),V(x,Jl.EventType.MESSAGE,(k=>{if(!N){const U=k.data[0];Ye(!!U,16349);const Q=U,W=Q?.error||Q[0]?.error;if(W){fe(Jt,`RPC '${e}' stream ${o} received error:`,W);const re=W.status;let oe=(function(A){const R=Ct[A];if(R!==void 0)return CE(R)})(re),ue=W.message;oe===void 0&&(oe=te.INTERNAL,ue="Unknown error status: "+re+" with message "+W.message),N=!0,O.a_(new de(oe,ue)),x.close()}else fe(Jt,`RPC '${e}' stream ${o} received:`,U),O.u_(U)}})),V(p,Kw.STAT_EVENT,(k=>{k.stat===Np.PROXY?fe(Jt,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===Np.NOPROXY&&fe(Jt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ap(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(i){return new wD(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="PersistentStream";class HE{constructor(e,n,r,o,c,u,p,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Ts(n.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new de(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(rx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(rx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _j extends HE{constructor(e,n,r,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,u),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=SD(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Te.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Te.min():u.readTime?Bi(u.readTime):Te.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Vp(this.serializer),n.addTarget=(function(c,u){let p;const g=u.target;if(p=jp(g)?{documents:RD(c,g)}:{query:CD(c,g).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=jE(c,u.resumeToken);const y=Mp(c,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Te.min())>0){p.readTime=ed(c,u.snapshotVersion.toTimestamp());const y=Mp(c,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=DD(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Vp(this.serializer),n.removeTarget=e,this.q_(n)}}class bj extends HE{constructor(e,n,r,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ND(e.writeResults,e.commitTime),r=Bi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Vp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>AD(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{}class wj extends xj{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Pp(n,r),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(te.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Ho(e,Pp(n,r),o,u,p,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ej{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ts(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class Tj{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Ea(this)&&(fe(va,"Restarting streams for network reachability change."),await(async function(g){const y=Re(g);y.Ea.add(4),await Mc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Rd(y)})(this))}))})),this.Ra=new Ej(r,o)}}async function Rd(i){if(Ea(i))for(const e of i.da)await e(!0)}async function Mc(i){for(const e of i.da)await e(!1)}function GE(i,e){const n=Re(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mg(n)?Og(n):Lo(n).O_()&&jg(n,e))}function Dg(i,e){const n=Re(i),r=Lo(n);n.Ia.delete(e),r.O_()&&QE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ea(n)&&n.Ra.set("Unknown"))}function jg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(i).Y_(e)}function QE(i,e){i.Va.Ue(e),Lo(i).Z_(e)}function Og(i){i.Va=new vD({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Lo(i).start(),i.Ra.ua()}function Mg(i){return Ea(i)&&!Lo(i).x_()&&i.Ia.size>0}function Ea(i){return Re(i).Ea.size===0}function KE(i){i.Va=void 0}async function Sj(i){i.Ra.set("Online")}async function Aj(i){i.Ia.forEach(((e,n)=>{jg(i,e)}))}async function Nj(i,e){KE(i),Mg(i)?(i.Ra.ha(e),Og(i)):i.Ra.set("Unknown")}async function Rj(i,e,n){if(i.Ra.set("Online"),e instanceof DE&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,u),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){fe(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nd(i,r)}else if(e instanceof Ph?i.Va.Ze(e):e instanceof IE?i.Va.st(e):i.Va.tt(e),!n.isEqual(Te.min()))try{const r=await FE(i.localStore);n.compareTo(r)>=0&&await(function(c,u){const p=c.Va.Tt(u);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(g.resumeToken,u))}})),p.targetMismatches.forEach(((g,y)=>{const b=c.Ia.get(g);if(!b)return;c.Ia.set(g,b.withResumeToken(Xt.EMPTY_BYTE_STRING,b.snapshotVersion)),QE(c,g);const x=new dr(b.target,g,y,b.sequenceNumber);jg(c,x)})),c.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(r){fe(va,"Failed to raise snapshot:",r),await nd(i,r)}}async function nd(i,e,n){if(!ko(e))throw e;i.Ea.add(1),await Mc(i),i.Ra.set("Offline"),n||(n=()=>FE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{fe(va,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Rd(i)}))}function YE(i,e){return e().catch((n=>nd(i,n,e)))}async function Cd(i){const e=Re(i),n=wr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yg;for(;Cj(e);)try{const o=await uj(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,Ij(e,o)}catch(o){await nd(e,o)}$E(e)&&XE(e)}function Cj(i){return Ea(i)&&i.Ta.length<10}function Ij(i,e){i.Ta.push(e);const n=wr(i);n.O_()&&n.X_&&n.ea(e.mutations)}function $E(i){return Ea(i)&&!wr(i).x_()&&i.Ta.length>0}function XE(i){wr(i).start()}async function Dj(i){wr(i).ra()}async function jj(i){const e=wr(i);for(const n of i.Ta)e.ea(n.mutations)}async function Oj(i,e,n){const r=i.Ta.shift(),o=Tg.from(r,e,n);await YE(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Cd(i)}async function Mj(i,e){e&&wr(i).X_&&await(async function(r,o){if((function(u){return pD(u)&&u!==te.ABORTED})(o.code)){const c=r.Ta.shift();wr(r).B_(),await YE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Cd(r)}})(i,e),$E(i)&&XE(i)}async function ax(i,e){const n=Re(i);n.asyncQueue.verifyOperationInProgress(),fe(va,"RemoteStore received new credentials");const r=Ea(n);n.Ea.add(3),await Mc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Rd(n)}async function Pj(i,e){const n=Re(i);e?(n.Ea.delete(2),await Rd(n)):e||(n.Ea.add(2),await Mc(n),n.Ra.set("Unknown"))}function Lo(i){return i.ma||(i.ma=(function(n,r,o){const c=Re(n);return c.sa(),new _j(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:Sj.bind(null,i),t_:Aj.bind(null,i),r_:Nj.bind(null,i),H_:Rj.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Mg(i)?Og(i):i.Ra.set("Unknown")):(await i.ma.stop(),KE(i))}))),i.ma}function wr(i){return i.fa||(i.fa=(function(n,r,o){const c=Re(n);return c.sa(),new bj(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Dj.bind(null,i),r_:Mj.bind(null,i),ta:jj.bind(null,i),na:Oj.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Cd(i)):(await i.fa.stop(),i.Ta.length>0&&(fe(va,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const u=Date.now()+r,p=new Pg(e,n,u,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(i,e){if(Ts("AsyncQueue",`${e}: ${i}`),ko(i))return new de(te.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=Zl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.ga=new ht(ve.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Co{constructor(e,n,r,o,c,u,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const u=[];return n.forEach((p=>{u.push({type:0,doc:p})})),new Co(e,n,Eo.emptySet(n),u,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Vj{constructor(){this.queries=lx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Re(n),c=o.queries;o.queries=lx(),c.forEach(((u,p)=>{for(const g of p.Sa)g.onError(r)}))})(this,new de(te.ABORTED,"Firestore shutting down"))}}function lx(){return new wa((i=>yE(i)),wd)}async function Vg(i,e){const n=Re(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new kj,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const p=kg(u,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Ug(n)}async function Lg(i,e){const n=Re(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Lj(i,e){const n=Re(i);let r=!1;for(const o of e){const c=o.query,u=n.queries.get(c);if(u){for(const p of u.Sa)p.Fa(o)&&(r=!0);u.wa=o}}r&&Ug(n)}function Uj(i,e,n){const r=Re(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function Ug(i){i.Ca.forEach((e=>{e.next()}))}var zp,cx;(cx=zp||(zp={})).Ma="default",cx.Cache="cache";class zg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.key=e}}class JE{constructor(e){this.key=e}}class zj{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=vE(e),this.tu=new Eo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ox,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,u=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,x)=>{const E=o.get(b),N=Ed(this.query,x)?x:null,O=!!E&&this.mutatedKeys.has(E.key),V=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let k=!1;E&&N?E.data.isEqual(N.data)?O!==V&&(r.track({type:3,doc:N}),k=!0):this.su(E,N)||(r.track({type:2,doc:N}),k=!0,(g&&this.eu(N,g)>0||y&&this.eu(N,y)<0)&&(p=!0)):!E&&N?(r.track({type:0,doc:N}),k=!0):E&&!N&&(r.track({type:1,doc:E}),k=!0,(g||y)&&(p=!0)),k&&(N?(u=u.add(N),c=V?c.add(b):c.delete(b)):(u=u.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),c=c.delete(b.key),r.track({type:1,doc:b})}return{tu:u,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,x)=>(function(N,O){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:k})}};return V(N)-V(O)})(b.type,x.type)||this.eu(b.doc,x.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,u.length!==0||y?{snapshot:new Co(this.query,e.tu,c,u,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ox,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new JE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new WE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bg="SyncEngine";class Bj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Fj{constructor(e){this.key=e,this.hu=!1}}class qj{constructor(e,n,r,o,c,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new wa((p=>yE(p)),wd),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ve.comparator),this.Au=new Map,this.Ru=new Ng,this.Vu={},this.mu=new Map,this.fu=Ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Hj(i,e,n=!0){const r=sT(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await ZE(r,e,n,!0),o}async function Gj(i,e){const n=sT(i);await ZE(n,e,!0,!1)}async function ZE(i,e,n,r){const o=await hj(i.localStore,zi(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await Qj(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&n&&GE(i.remoteStore,o),p}async function Qj(i,e,n,r,o){i.pu=(x,E,N)=>(async function(V,k,U,Q){let W=k.view.ru(U);W.Cs&&(W=await tx(V.localStore,k.query,!1).then((({documents:C})=>k.view.ru(C,W))));const re=Q&&Q.targetChanges.get(k.targetId),oe=Q&&Q.targetMismatches.get(k.targetId)!=null,ue=k.view.applyChanges(W,V.isPrimaryClient,re,oe);return hx(V,k.targetId,ue.au),ue.snapshot})(i,x,E,N);const c=await tx(i.localStore,e,!0),u=new zj(e,c.Qs),p=u.ru(c.documents),g=Oc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),y=u.applyChanges(p,i.isPrimaryClient,g);hx(i,n,y.au);const b=new Bj(e,n,u);return i.Tu.set(e,b),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function Kj(i,e,n){const r=Re(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((u=>!wd(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Lp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Dg(r.remoteStore,o.targetId),Bp(r,o.targetId)})).catch(Po)):(Bp(r,o.targetId),await Lp(r.localStore,o.targetId,!0))}async function Yj(i,e){const n=Re(i),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dg(n.remoteStore,r.targetId))}async function $j(i,e,n){const r=nO(i);try{const o=await(function(u,p){const g=Re(u),y=at.now(),b=p.reduce(((N,O)=>N.add(O.key)),ze());let x,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let O=Ss(),V=ze();return g.Ns.getEntries(N,b).next((k=>{O=k,O.forEach(((U,Q)=>{Q.isValidDocument()||(V=V.add(U))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,O))).next((k=>{x=k;const U=[];for(const Q of p){const W=uD(Q,x.get(Q.key).overlayedDocument);W!=null&&U.push(new Ir(Q.key,W,cE(W.value.mapValue),Hn.exists(!0)))}return g.mutationQueue.addMutationBatch(N,y,U,p)})).next((k=>{E=k;const U=k.applyToLocalDocumentSet(x,V);return g.documentOverlayCache.saveOverlays(N,k.batchId,U)}))})).then((()=>({batchId:E.batchId,changes:bE(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,p,g){let y=u.Vu[u.currentUser.toKey()];y||(y=new ht(Ue)),y=y.insert(p,g),u.Vu[u.currentUser.toKey()]=y})(r,o.batchId,n),await Pc(r,o.changes),await Cd(r.remoteStore)}catch(o){const c=kg(o,"Failed to persist write");n.reject(c)}}async function eT(i,e){const n=Re(i);try{const r=await lj(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=n.Au.get(c);u&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Ye(u.hu,14607):o.removedDocuments.size>0&&(Ye(u.hu,42227),u.hu=!1))})),await Pc(n,r,e)}catch(r){await Po(r)}}function ux(i,e,n){const r=Re(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,u)=>{const p=u.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(u,p){const g=Re(u);g.onlineState=p;let y=!1;g.queries.forEach(((b,x)=>{for(const E of x.Sa)E.va(p)&&(y=!0)})),y&&Ug(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Xj(i,e,n){const r=Re(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let u=new ht(ve.comparator);u=u.insert(c,en.newNoDocument(c,Te.min()));const p=ze().add(c),g=new Ad(Te.min(),new Map,new ht(Ue),u,p);await eT(r,g),r.du=r.du.remove(c),r.Au.delete(e),Fg(r)}else await Lp(r.localStore,e,!1).then((()=>Bp(r,e,n))).catch(Po)}async function Wj(i,e){const n=Re(i),r=e.batch.batchId;try{const o=await oj(n.localStore,e);nT(n,r,null),tT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pc(n,o)}catch(o){await Po(o)}}async function Jj(i,e,n){const r=Re(i);try{const o=await(function(u,p){const g=Re(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((x=>(Ye(x!==null,37113),b=x.keys(),g.mutationQueue.removeMutationBatch(y,x)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);nT(r,e,n),tT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pc(r,o)}catch(o){await Po(o)}}function tT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function nT(i,e,n){const r=Re(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Bp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||iT(i,r)}))}function iT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Dg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Fg(i))}function hx(i,e,n){for(const r of n)r instanceof WE?(i.Ru.addReference(r.key,e),Zj(i,r)):r instanceof JE?(fe(Bg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||iT(i,r.key)):we(19791,{wu:r})}function Zj(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(fe(Bg,"New document in limbo: "+n),i.Eu.add(r),Fg(i))}function Fg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ve(it.fromString(e)),r=i.fu.next();i.Au.set(r,new Fj(n)),i.du=i.du.insert(n,r),GE(i.remoteStore,new dr(zi(xd(n.path)),r,"TargetPurposeLimboResolution",vd.ce))}}async function Pc(i,e,n){const r=Re(i),o=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{u.push(r.pu(g,e,n).then((y=>{if((y||n)&&r.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){o.push(y);const b=Cg.As(g.targetId,y);c.push(b)}})))})),await Promise.all(u),r.Pu.H_(o),await(async function(g,y){const b=Re(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>ie.forEach(y,(E=>ie.forEach(E.Es,(N=>b.persistence.referenceDelegate.addReference(x,E.targetId,N))).next((()=>ie.forEach(E.ds,(N=>b.persistence.referenceDelegate.removeReference(x,E.targetId,N)))))))))}catch(x){if(!ko(x))throw x;fe(Ig,"Failed to update sequence numbers: "+x)}for(const x of y){const E=x.targetId;if(!x.fromCache){const N=b.Ms.get(E),O=N.snapshotVersion,V=N.withLastLimboFreeSnapshotVersion(O);b.Ms=b.Ms.insert(E,V)}}})(r.localStore,c))}async function eO(i,e){const n=Re(i);if(!n.currentUser.isEqual(e)){fe(Bg,"User change. New user:",e.toKey());const r=await BE(n.localStore,e);n.currentUser=e,(function(c,u){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new de(te.CANCELLED,u))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pc(n,r.Ls)}}function tO(i,e){const n=Re(i),r=n.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let o=ze();const c=n.Iu.get(e);if(!c)return o;for(const u of c){const p=n.Tu.get(u);o=o.unionWith(p.view.nu)}return o}}function sT(i){const e=Re(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=eT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xj.bind(null,e),e.Pu.H_=Lj.bind(null,e.eventManager),e.Pu.yu=Uj.bind(null,e.eventManager),e}function nO(i){const e=Re(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jj.bind(null,e),e}class id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aj(this.persistence,new ij,e.initialUser,this.serializer)}Cu(e){return new zE(Rg.mi,this.serializer)}Du(e){return new fj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}id.provider={build:()=>new id};class iO extends id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof td,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new FD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new zE((r=>td.mi(r,n)),this.serializer)}}class Fp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ux(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eO.bind(null,this.syncEngine),await Pj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Vj})()}createDatastore(e){const n=Nd(e.databaseInfo.databaseId),r=(function(c){return new vj(c)})(e.databaseInfo);return(function(c,u,p,g){return new wj(c,u,p,g)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,u,p){return new Tj(r,o,c,u,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>ux(this.syncEngine,n,0)),(function(){return sx.v()?new sx:new mj})())}createSyncEngine(e,n){return(function(o,c,u,p,g,y,b){const x=new qj(o,c,u,p,g,y);return b&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Re(n);fe(va,"RemoteStore shutting down."),r.Ea.add(5),await Mc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Fp.provider={build:()=>new Fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="FirestoreClient";class sO{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Zt.UNAUTHENTICATED,this.clientId=gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{fe(Er,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(fe(Er,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function op(i,e){i.asyncQueue.verifyOperationInProgress(),fe(Er,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await BE(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function dx(i,e){i.asyncQueue.verifyOperationInProgress();const n=await rO(i);fe(Er,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>ax(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>ax(e.remoteStore,o))),i._onlineComponents=e}async function rO(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){fe(Er,"Using user provided OfflineComponentProvider");try{await op(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await op(i,new id)}}else fe(Er,"Using default OfflineComponentProvider"),await op(i,new iO(void 0));return i._offlineComponents}async function rT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(fe(Er,"Using user provided OnlineComponentProvider"),await dx(i,i._uninitializedComponentsProvider._online)):(fe(Er,"Using default OnlineComponentProvider"),await dx(i,new Fp))),i._onlineComponents}function aO(i){return rT(i).then((e=>e.syncEngine))}async function sd(i){const e=await rT(i),n=e.eventManager;return n.onListen=Hj.bind(null,e.syncEngine),n.onUnlisten=Kj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Gj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yj.bind(null,e.syncEngine),n}function oO(i,e,n={}){const r=new bs;return i.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,g,y){const b=new qg({next:E=>{b.Nu(),u.enqueueAndForget((()=>Lg(c,x)));const N=E.docs.has(p);!N&&E.fromCache?y.reject(new de(te.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&E.fromCache&&g&&g.source==="server"?y.reject(new de(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),x=new zg(xd(p.path),b,{includeMetadataChanges:!0,qa:!0});return Vg(c,x)})(await sd(i),i.asyncQueue,e,n,r))),r.promise}function lO(i,e,n={}){const r=new bs;return i.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,g,y){const b=new qg({next:E=>{b.Nu(),u.enqueueAndForget((()=>Lg(c,x))),E.fromCache&&g.source==="server"?y.reject(new de(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),x=new zg(p,b,{includeMetadataChanges:!0,qa:!0});return Vg(c,x)})(await sd(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firestore.googleapis.com",mx=!0;class px{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oT,this.ssl=mx}else this.host=e.host,this.ssl=e.ssl??mx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zD)throw new de(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new px({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new px(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dI;switch(r.type){case"firstParty":return new gI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=fx.get(n);r&&(fe("ComponentProvider","Removing Datastore"),fx.delete(n),r.terminate())})(this),Promise.resolve()}}function cO(i,e,n,r={}){i=vn(i,Id);const o=ba(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;o&&(eg(`https://${p}`),tg("Firestore",!0)),c.host!==oT&&c.host!==p&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:r};if(!fa(g,u)&&(i._setSettings(g),r.mockUserToken)){let y,b;if(typeof r.mockUserToken=="string")y=r.mockUserToken,b=Zt.MOCK_USER;else{y=rw(r.mockUserToken,i._app?.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new de(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Zt(x)}i._authCredentials=new fI(new Ww(y,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Dc(n,mt._jsonSchema))return new mt(e,r||null,new ve(it.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Dt("string",mt._jsonSchemaVersion),referencePath:Dt("string")};class gr extends Rs{constructor(e,n,r){super(e,n,xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new ve(e))}withConverter(e){return new gr(this.firestore,e,this._path)}}function Gi(i,e,...n){if(i=jt(i),Jw("collection","path",e),i instanceof Id){const r=it.fromString(e,...n);return Rb(r),new gr(i,null,r)}{if(!(i instanceof mt||i instanceof gr))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(it.fromString(e,...n));return Rb(r),new gr(i.firestore,null,r)}}function Vi(i,e,...n){if(i=jt(i),arguments.length===1&&(e=gg.newId()),Jw("doc","path",e),i instanceof Id){const r=it.fromString(e,...n);return Nb(r),new mt(i,null,new ve(r))}{if(!(i instanceof mt||i instanceof gr))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(it.fromString(e,...n));return Nb(r),new mt(i.firestore,i instanceof gr?i.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="AsyncQueue";class yx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qE(this,"async_queue_retry"),this._c=()=>{const r=ap();r&&fe(gx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ap();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ap();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;fe(gx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ts("INTERNAL UNHANDLED ERROR: ",vx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Pg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:vx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(i){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class As extends Id{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new yx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yx(e),this._firestoreClient=void 0,await e}}}function uO(i,e){const n=typeof i=="object"?i:sg(),r=typeof i=="string"?i:$h,o=fd(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=nw("firestore");c&&cO(o,...c)}return o}function Dd(i){if(i._terminated)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||hO(i),i._firestoreClient}function hO(i){const e=i._freezeSettings(),n=(function(o,c,u,p){return new MI(o,c,u,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,aT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new sO(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Xt.fromBase64String(e))}catch(n){throw new de(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dc(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Dt("string",qn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(Dc(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:Dt("string",Fi._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dc(e,qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new qi(e.vectorValues);throw new de(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qi._jsonSchemaVersion="firestore/vectorValue/1.0",qi._jsonSchema={type:Dt("string",qi._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=/^__.*__$/;class fO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ir(e,this.data,this.fieldMask,n,this.fieldTransforms):new jc(e,this.data,n,this.fieldTransforms)}}class lT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ir(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:i})}}class Hg{constructor(e,n,r,o,c,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(cT(this.Ac)&&dO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nd(e)}Cc(e,n,r,o=!1){return new Hg({Ac:e,methodName:n,Dc:r,path:$t.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Md(i){const e=i._freezeSettings(),n=Nd(i._databaseId);return new mO(i._databaseId,!!e.ignoreUndefinedProperties,n)}function uT(i,e,n,r,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Qg("Data must be an object, but it was:",u,r);const p=hT(r,u);let g,y;if(c.merge)g=new Rn(u.fieldMask),y=u.fieldTransforms;else if(c.mergeFields){const b=[];for(const x of c.mergeFields){const E=qp(e,x,n);if(!u.contains(E))throw new de(te.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);fT(b,E)||b.push(E)}g=new Rn(b),y=u.fieldTransforms.filter((x=>g.covers(x.field)))}else g=null,y=u.fieldTransforms;return new fO(new yn(p),g,y)}class Pd extends Od{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pd}}class Gg extends Od{_toFieldTransform(e){return new aD(e.path,new _c)}isEqual(e){return e instanceof Gg}}function pO(i,e,n,r){const o=i.Cc(1,e,n);Qg("Data must be an object, but it was:",o,r);const c=[],u=yn.empty();Cr(r,((g,y)=>{const b=Kg(e,g,n);y=jt(y);const x=o.yc(b);if(y instanceof Pd)c.push(b);else{const E=kc(y,x);E!=null&&(c.push(b),u.set(b,E))}}));const p=new Rn(c);return new lT(u,p,o.fieldTransforms)}function gO(i,e,n,r,o,c){const u=i.Cc(1,e,n),p=[qp(e,r,n)],g=[o];if(c.length%2!=0)throw new de(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<c.length;E+=2)p.push(qp(e,c[E])),g.push(c[E+1]);const y=[],b=yn.empty();for(let E=p.length-1;E>=0;--E)if(!fT(y,p[E])){const N=p[E];let O=g[E];O=jt(O);const V=u.yc(N);if(O instanceof Pd)y.push(N);else{const k=kc(O,V);k!=null&&(y.push(N),b.set(N,k))}}const x=new Rn(y);return new lT(b,x,u.fieldTransforms)}function yO(i,e,n,r=!1){return kc(n,i.Cc(r?4:3,e))}function kc(i,e){if(dT(i=jt(i)))return Qg("Unsupported field value:",e,i),hT(i,e);if(i instanceof Od)return(function(r,o){if(!cT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let u=0;for(const p of r){let g=kc(p,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iD(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=at.fromDate(r);return{timestampValue:ed(o.serializer,c)}}if(r instanceof at){const c=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ed(o.serializer,c)}}if(r instanceof Fi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qn)return{bytesValue:jE(o.serializer,r._byteString)};if(r instanceof mt){const c=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ag(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof qi)return(function(u,p){return{mapValue:{fields:{[oE]:{stringValue:lE},[Xh]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return wg(p.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${yd(r)}`)})(i,e)}function hT(i,e){const n={};return tE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cr(i,((r,o)=>{const c=kc(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function dT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof at||i instanceof Fi||i instanceof qn||i instanceof mt||i instanceof Od||i instanceof qi)}function Qg(i,e,n){if(!dT(n)||!Zw(n)){const r=yd(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function qp(i,e,n){if((e=jt(e))instanceof jd)return e._internalPath;if(typeof e=="string")return Kg(i,e);throw rd("Field path arguments must be of type string or ",i,!1,void 0,n)}const vO=new RegExp("[~\\*/\\[\\]]");function Kg(i,e,n){if(e.search(vO)>=0)throw rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new jd(...e.split("."))._internalPath}catch{throw rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function rd(i,e,n,r,o){const c=r&&!r.isEmpty(),u=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${r}`),u&&(g+=` in document ${o}`),g+=")"),new de(te.INVALID_ARGUMENT,p+i+g)}function fT(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _O(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _O extends mT{data(){return super.data()}}function kd(i,e){return typeof e=="string"?Kg(i,e):e instanceof jd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new de(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yg{}class $g extends Yg{}function Tr(i,e,...n){let r=[];e instanceof Yg&&r.push(e),r=r.concat(n),(function(c){const u=c.filter((g=>g instanceof Xg)).length,p=c.filter((g=>g instanceof Vd)).length;if(u>1||u>0&&p>0)throw new de(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Vd extends $g{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vd(e,n,r)}_apply(e){const n=this._parse(e);return vT(e._query,n),new Rs(e.firestore,e.converter,Op(e._query,n))}_parse(e){const n=Md(e.firestore);return(function(c,u,p,g,y,b,x){let E;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new de(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){xx(x,b);const O=[];for(const V of x)O.push(bx(g,c,V));E={arrayValue:{values:O}}}else E=bx(g,c,x)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||xx(x,b),E=yO(p,u,x,b==="in"||b==="not-in");return It.create(y,b,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gn(i,e,n){const r=e,o=kd("where",i);return Vd._create(o,r,n)}class Xg extends Yg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:di.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let u=o;const p=c.getFlattenedFilters();for(const g of p)vT(u,g),u=Op(u,g)})(e._query,n),new Rs(e.firestore,e.converter,Op(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wg extends $g{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wg(e,n)}_apply(e){const n=(function(o,c,u){if(o.startAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(c,u)})(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,(function(o,c){const u=o.explicitOrderBy.concat([c]);return new Vo(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function gT(i,e="asc"){const n=e,r=kd("orderBy",i);return Wg._create(r,n)}class Jg extends $g{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jg(e,n,r)}_apply(e){return new Rs(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function yT(i){return EI("limit",i),Jg._create("limit",i,"F")}function bx(i,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new de(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gE(e)&&n.indexOf("/")!==-1)throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!ve.isDocumentKey(r))throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kb(i,new ve(r))}if(n instanceof mt)return kb(i,n._key);throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(n)}.`)}function xx(i,e){if(!Array.isArray(i)||i.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vT(i,e){const n=(function(o,c){for(const u of o)for(const p of u.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bO{convertValue(e,n="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Cr(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[Xh].arrayValue?.values?.map((r=>_t(r.doubleValue)));return new qi(n)}convertGeoPoint(e){return new Fi(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=_r(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Ye(LE(r),9688,{name:e});const o=new gc(r.get(1),r.get(3)),c=new ve(r.popFirst(5));return o.isEqual(n)||Ts(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class tc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends mT{constructor(e,n,r,o,c,u){super(e,n,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(kd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:Dt("string",ha._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class kh extends ha{data(e={}){return super.data(e)}}class da{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new tc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new kh(this._firestore,this._userDataWriter,r.key,r,new tc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((p=>{const g=new kh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new kh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),b=u.indexOf(p.doc.key)),{type:xO(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xO(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(i){i=vn(i,mt);const e=vn(i.firestore,As);return oO(Dd(e),i._key).then((n=>wT(e,i,n)))}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:Dt("string",da._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Zg extends bO{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function _a(i){i=vn(i,Rs);const e=vn(i.firestore,As),n=Dd(e),r=new Zg(e);return pT(i._query),lO(n,i._query).then((o=>new da(e,r,i,o)))}function bh(i,e,n){i=vn(i,mt);const r=vn(i.firestore,As),o=_T(i.converter,e);return Ld(r,[uT(Md(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Hn.none())])}function wO(i,e,n,...r){i=vn(i,mt);const o=vn(i.firestore,As),c=Md(o);let u;return u=typeof(e=jt(e))=="string"||e instanceof jd?gO(c,"updateDoc",i._key,e,n,r):pO(c,"updateDoc",i._key,e),Ld(o,[u.toMutation(i._key,Hn.exists(!0))])}function bT(i){return Ld(vn(i.firestore,As),[new Eg(i._key,Hn.none())])}function xT(i,e){const n=vn(i.firestore,As),r=Vi(i),o=_T(i.converter,e);return Ld(n,[uT(Md(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Hn.exists(!1))]).then((()=>r))}function EO(i,...e){i=jt(i);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_x(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_x(e[r])){const g=e[r];e[r]=g.next?.bind(g),e[r+1]=g.error?.bind(g),e[r+2]=g.complete?.bind(g)}let c,u,p;if(i instanceof mt)u=vn(i.firestore,As),p=xd(i._key.path),c={next:g=>{e[r]&&e[r](wT(u,i,g))},error:e[r+1],complete:e[r+2]};else{const g=vn(i,Rs);u=vn(g.firestore,As),p=g._query;const y=new Zg(u);c={next:b=>{e[r]&&e[r](new da(u,y,g,b))},error:e[r+1],complete:e[r+2]},pT(i._query)}return(function(y,b,x,E){const N=new qg(E),O=new zg(b,N,x);return y.asyncQueue.enqueueAndForget((async()=>Vg(await sd(y),O))),()=>{N.Nu(),y.asyncQueue.enqueueAndForget((async()=>Lg(await sd(y),O)))}})(Dd(u),p,o,c)}function Ld(i,e){return(function(r,o){const c=new bs;return r.asyncQueue.enqueueAndForget((async()=>$j(await aO(r),o,c))),c.promise})(Dd(i),e)}function wT(i,e,n){const r=n.docs.get(e._key),o=new Zg(i);return new ha(i,o,e._key,r,new tc(n.hasPendingWrites,n.fromCache),e.converter)}function Fn(){return new Gg("serverTimestamp")}(function(e,n=!0){(function(o){Mo=o})(xa),ma(new yr("firestore",((r,{instanceIdentifier:o,options:c})=>{const u=r.getProvider("app").getImmediate(),p=new As(new mI(r.getProvider("auth-internal")),new yI(u,r.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new de(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(y.options.projectId,b)})(u,o),u);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Li(Eb,Tb,e),Li(Eb,Tb,"esm2020")})();var TO="firebase",SO="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(TO,SO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="firebasestorage.googleapis.com",AO="storageBucket",NO=120*1e3,RO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Yi{constructor(e,n,r=0){super(lp(e),`Firebase Storage: ${n} (${lp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$i.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qi;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qi||(Qi={}));function lp(i){return"storage/"+i}function CO(){const i="An unknown error occurred, please check the error payload for server response.";return new $i(Qi.UNKNOWN,i)}function IO(){return new $i(Qi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DO(){return new $i(Qi.CANCELED,"User canceled the upload/download.")}function jO(i){return new $i(Qi.INVALID_URL,"Invalid URL '"+i+"'.")}function OO(i){return new $i(Qi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Ex(i){return new $i(Qi.INVALID_ARGUMENT,i)}function TT(){return new $i(Qi.APP_DELETED,"The Firebase app was deleted.")}function MO(i){return new $i(Qi.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ui.makeFromUrl(e,n)}catch{return new ui(e,"")}if(r.path==="")return r;throw OO(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const u="(/(.*))?$",p=new RegExp("^gs://"+o+u,"i"),g={bucket:1,path:3};function y(re){re.path_=decodeURIComponent(re.path)}const b="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",N=new RegExp(`^https?://${x}/${b}/b/${o}/o${E}`,"i"),O={bucket:1,path:3},V=n===ET?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",U=new RegExp(`^https?://${V}/${o}/${k}`,"i"),W=[{regex:p,indices:g,postModify:c},{regex:N,indices:O,postModify:y},{regex:U,indices:{bucket:1,path:2},postModify:y}];for(let re=0;re<W.length;re++){const oe=W[re],ue=oe.regex.exec(e);if(ue){const C=ue[oe.indices.bucket];let A=ue[oe.indices.path];A||(A=""),r=new ui(C,A),oe.postModify(r);break}}if(r==null)throw jO(e);return r}}class PO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(i,e,n){let r=1,o=null,c=null,u=!1,p=0;function g(){return p===2}let y=!1;function b(...k){y||(y=!0,e.apply(null,k))}function x(k){o=setTimeout(()=>{o=null,i(N,g())},k)}function E(){c&&clearTimeout(c)}function N(k,...U){if(y){E();return}if(k){E(),b.call(null,k,...U);return}if(g()||u){E(),b.call(null,k,...U);return}r<64&&(r*=2);let W;p===1?(p=2,W=0):W=(r+Math.random())*1e3,x(W)}let O=!1;function V(k){O||(O=!0,E(),!y&&(o!==null?(k||(p=2),clearTimeout(o),x(0)):k||(p=1)))}return x(0),c=setTimeout(()=>{u=!0,V(!0)},n),V}function VO(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(i){return i!==void 0}function Tx(i,e,n,r){if(r<e)throw Ex(`Invalid value for '${i}'. Expected ${e} or greater.`);if(r>n)throw Ex(`Invalid value for '${i}'. Expected ${n} or less.`)}function UO(i){const e=encodeURIComponent;let n="?";for(const r in i)if(i.hasOwnProperty(r)){const o=e(r)+"="+e(i[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var ad;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(ad||(ad={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n,r,o,c,u,p,g,y,b,x,E=!0,N=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=x,this.retry=E,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,V)=>{this.resolve_=O,this.reject_=V,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new xh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const p=c.getErrorCode()===ad.NO_ERROR,g=c.getStatus();if(!p||zO(g,this.additionalRetryCodes_)&&this.retry){const b=c.getErrorCode()===ad.ABORT;r(!1,new xh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new xh(y,c))})},n=(r,o)=>{const c=this.resolve_,u=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());LO(g)?c(g):c()}catch(g){u(g)}else if(p!==null){const g=CO();g.serverResponse=p.getErrorText(),this.errorCallback_?u(this.errorCallback_(p,g)):u(g)}else if(o.canceled){const g=this.appDelete_?TT():DO();u(g)}else{const g=IO();u(g)}};this.canceled_?n(!1,new xh(!1,null,!0)):this.backoffId_=kO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function FO(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function qO(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HO(i,e){e&&(i["X-Firebase-GMPID"]=e)}function GO(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function QO(i,e,n,r,o,c,u=!0,p=!1){const g=UO(i.urlParams),y=i.url+g,b=Object.assign({},i.headers);return HO(b,e),FO(b,n),qO(b,c),GO(b,r),new BO(y,i.method,b,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,u,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function YO(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this._service=e,n instanceof ui?this._location=n:this._location=ui.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new od(e,n)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YO(this._location.path)}get storage(){return this._service}get parent(){const e=KO(this._location.path);if(e===null)return null;const n=new ui(this._location.bucket,e);return new od(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw MO(e)}}function Sx(i,e){const n=e?.[AO];return n==null?null:ui.makeFromBucketSpec(n,i)}function $O(i,e,n,r={}){i.host=`${e}:${n}`;const o=ba(e);o&&(eg(`https://${i.host}/b`),tg("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(i._overrideAuthToken=typeof c=="string"?c:rw(c,i.app.options.projectId))}class XO{constructor(e,n,r,o,c,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=ET,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NO,this._maxUploadRetryTime=RO,this._requests=new Set,o!=null?this._bucket=ui.makeFromBucketSpec(o,this._host):this._bucket=Sx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ui.makeFromBucketSpec(this._url,e):this._bucket=Sx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new od(this,e)}_makeRequest(e,n,r,o,c=!0){if(this._deleted)return new PO(TT());{const u=QO(e,this._appId,r,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const Ax="@firebase/storage",Nx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="storage";function WO(i=sg(),e){i=jt(i);const r=fd(i,ST).getImmediate({identifier:e}),o=nw("storage");return o&&JO(r,...o),r}function JO(i,e,n,r={}){$O(i,e,n,r)}function ZO(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new XO(n,r,o,e,xa)}function e3(){ma(new yr(ST,ZO,"PUBLIC").setMultipleInstances(!0)),Li(Ax,Nx,""),Li(Ax,Nx,"esm2020")}e3();const t3={apiKey:"AIzaSyCfC8DCLdjuWVEy4_KM3CvVMZu9ScuMBIY",authDomain:"bowlingstatstracker.firebaseapp.com",projectId:"bowlingstatstracker",storageBucket:"bowlingstatstracker.firebasestorage.app",messagingSenderId:"766461963217",appId:"1:766461963217:web:26d31b5469e2328a4b0ef0"},ey=lw(t3),Kl=uI(ey),kt=uO(ey);WO(ey);const AT=P.createContext(void 0);function Yn(){const i=P.useContext(AT);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i}function n3({children:i}){const[e,n]=P.useState(null),[r,o]=P.useState(null),[c,u]=P.useState(!0);P.useEffect(()=>J2(Kl,async N=>{if(n(N),N){const O=await wx(Vi(kt,"users",N.uid));O.exists()&&o(O.data())}else o(null);u(!1)}),[]);const x={currentUser:e,userData:r,loading:c,signIn:async(E,N)=>{await $2(Kl,E,N)},signUp:async(E,N,O,V,k)=>{const{user:U}=await Y2(Kl,E,N),Q={uid:U.uid,email:U.email,displayName:O,role:V,programId:k,createdAt:new Date,updatedAt:new Date};await bh(Vi(kt,"users",U.uid),{...Q,createdAt:Fn(),updatedAt:Fn()}),V==="player"&&await bh(Vi(kt,"players",U.uid),{uid:U.uid,name:O,email:U.email,programId:k,teamIds:[],averageScore:0,gamesPlayed:0,createdAt:Fn(),updatedAt:Fn()}),o(Q)},signInWithGoogle:async()=>{const E=new ps,{user:N}=await _C(Kl,E);if(!(await wx(Vi(kt,"users",N.uid))).exists()){const V={uid:N.uid,email:N.email,displayName:N.displayName||N.email.split("@")[0],role:"player",programId:"willard-hs",createdAt:new Date,updatedAt:new Date};await bh(Vi(kt,"users",N.uid),{...V,createdAt:Fn(),updatedAt:Fn()}),await bh(Vi(kt,"players",N.uid),{uid:N.uid,name:N.displayName||N.email.split("@")[0],email:N.email,programId:"willard-hs",teamIds:[],averageScore:0,gamesPlayed:0,createdAt:Fn(),updatedAt:Fn()}),o(V)}},logout:async()=>{await Z2(Kl)}};return f.jsx(AT.Provider,{value:x,children:i})}function oi({children:i,allowedRoles:e}){const{currentUser:n,userData:r,loading:o}=Yn();return o?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):n?e&&r&&!e.includes(r.role)?f.jsx(hp,{to:"/dashboard",replace:!0}):f.jsx(f.Fragment,{children:i}):f.jsx(hp,{to:"/login",replace:!0})}function i3(){const[i,e]=P.useState(""),[n,r]=P.useState(""),[o,c]=P.useState(""),[u,p]=P.useState(!1),{signIn:g,signInWithGoogle:y}=Yn(),b=Ec(),x=async N=>{N.preventDefault();try{c(""),p(!0),await g(i,n),b("/dashboard")}catch(O){c("Failed to sign in. Please check your credentials."),console.error(O)}finally{p(!1)}},E=async()=>{try{c(""),p(!0),await y(),b("/dashboard")}catch(N){c("Failed to sign in with Google."),console.error(N)}finally{p(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[f.jsx("div",{children:f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Sign in to WHS Bowling"})}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[o&&f.jsx("div",{className:"bg-red-500/20 border border-red-400/50 text-red-100 px-4 py-3 rounded backdrop-blur-sm",children:o}),f.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),f.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:i,onChange:N=>e(N.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white/30 bg-white/5 placeholder-gray-300 text-white rounded-t-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent focus:z-10 sm:text-sm backdrop-blur-sm",placeholder:"Email address"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),f.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:n,onChange:N=>r(N.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white/30 bg-white/5 placeholder-gray-300 text-white rounded-b-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent focus:z-10 sm:text-sm backdrop-blur-sm",placeholder:"Password"})]})]}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg transition-all",children:u?"Signing in...":"Sign in"})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-white/20"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-transparent text-gray-300",children:"Or continue with"})})]}),f.jsx("div",{children:f.jsxs("button",{type:"button",onClick:E,disabled:u,className:"w-full flex justify-center py-3 px-4 border border-white/30 rounded-lg shadow-sm text-sm font-medium text-white bg-white/10 hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 backdrop-blur-sm transition-all",children:[f.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})}),f.jsx("div",{className:"text-center",children:f.jsx(Ve,{to:"/signup",className:"text-purple-300 hover:text-purple-200 transition-colors",children:"Don't have an account? Sign up"})})]})]})})}const s3=[{id:"willard-hs",name:"Willard High School"}];function r3(){const[i,e]=P.useState(""),[n,r]=P.useState(""),[o,c]=P.useState(""),[u,p]=P.useState("player"),[g,y]=P.useState("willard-hs"),[b,x]=P.useState(""),[E,N]=P.useState(!1),{signUp:O}=Yn(),V=Ec(),k=async U=>{if(U.preventDefault(),n.length<6){x("Password must be at least 6 characters");return}try{x(""),N(!0),await O(i,n,o,u,g),V("/dashboard")}catch(Q){Q.code==="auth/email-already-in-use"?x("Email already in use"):x("Failed to create account"),console.error(Q)}finally{N(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[f.jsx("div",{children:f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Create your account"})}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:k,children:[b&&f.jsx("div",{className:"bg-red-500/20 border border-red-400/50 text-red-100 px-4 py-3 rounded backdrop-blur-sm",children:b}),f.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-200",children:"Full Name"}),f.jsx("input",{id:"displayName",name:"displayName",type:"text",required:!0,value:o,onChange:U=>c(U.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-white/30 bg-white/5 placeholder-gray-300 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent sm:text-sm backdrop-blur-sm",placeholder:"John Doe"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-200",children:"Email address"}),f.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:i,onChange:U=>e(U.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-white/30 bg-white/5 placeholder-gray-300 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent sm:text-sm backdrop-blur-sm",placeholder:"you@example.com"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-200",children:"Password"}),f.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:n,onChange:U=>r(U.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-white/30 bg-white/5 placeholder-gray-300 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent sm:text-sm backdrop-blur-sm",placeholder:"Min. 6 characters"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-200",children:"I am a..."}),f.jsxs("select",{id:"role",name:"role",value:u,onChange:U=>p(U.target.value),className:"mt-1 block w-full px-3 py-2 border border-white/30 bg-white/5 text-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent sm:text-sm backdrop-blur-sm",children:[f.jsx("option",{value:"player",className:"bg-gray-800",children:"Player"}),f.jsx("option",{value:"coach",className:"bg-gray-800",children:"Coach"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"school",className:"block text-sm font-medium text-gray-200",children:"School"}),f.jsx("select",{id:"school",name:"school",value:g,onChange:U=>y(U.target.value),className:"mt-1 block w-full px-3 py-2 border border-white/30 bg-white/5 text-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent sm:text-sm backdrop-blur-sm",children:s3.map(U=>f.jsx("option",{value:U.id,className:"bg-gray-800",children:U.name},U.id))})]})]}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:E,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg transition-all",children:E?"Creating account...":"Sign up"})}),f.jsx("div",{className:"text-center",children:f.jsx(Ve,{to:"/login",className:"text-purple-300 hover:text-purple-200 transition-colors",children:"Already have an account? Sign in"})})]})]})})}const a3=[[7,10],[4,6],[5,7],[5,10],[4,7,10],[6,7,10],[4,6,7],[4,6,10],[4,7,9],[5,6],[2,7],[3,10],[4,6,7,9,10],[4,6,7,10],[4,7,9,10],[6,7,9,10]],o3=[[1,2,4,10],[1,3,6,7],[1,2,10],[1,3,7]];function NT(i){if(i.length<2||i.includes(1))return!1;const e=[...i].sort((n,r)=>n-r);return a3.some(n=>n.length===e.length&&n.every((r,o)=>r===e[o]))}function RT(i){const e=[...i].sort((n,r)=>n-r);return o3.some(n=>n.length===e.length&&n.every((r,o)=>r===e[o]))}function l3(i){if(i.length===0)return"Strike";if(i.length===10)return"Gutter";const e=[...i].sort((r,o)=>r-o);if(e.length===1)return`${e[0]}-pin`;const n=e.join("-");return n==="7-10"?"7-10 Split":n==="4-6"?"4-6 Split":n==="4-6-7-10"?"Big Four":NT(e)?`${n} Split`:RT(e)?`${n} Washout`:n}function c3(i,e){const n=i.filter(r=>!e.includes(r));return n.includes(1)&&(n.includes(2)||n.includes(3))}function Rx(i,e){return{pins:[...i].sort((n,r)=>n-r),count:i.length,isSplit:NT(i),isWashout:RT(i),isConverted:e,leaveType:l3(i)}}function u3(i,e){const n=i[e];if(n.frameNumber===10)return n.balls.reduce((p,g)=>p+g.pinsKnockedDown,0);const o=n.balls[0]?.pinsKnockedDown||0,c=n.balls[1]?.pinsKnockedDown||0,u=o+c;if(n.isStrike){const p=i[e+1];if(!p)return null;const g=p.balls[0]?.pinsKnockedDown;if(g===void 0)return null;const y=p.balls[1]?.pinsKnockedDown;if(p.isStrike&&p.frameNumber!==10){const b=i[e+2];if(!b)return null;const x=b.balls[0]?.pinsKnockedDown;return x===void 0?null:10+g+x}return y===void 0?null:10+g+y}if(n.isSpare){const p=i[e+1];if(!p)return null;const g=p.balls[0]?.pinsKnockedDown;return g===void 0?null:10+g}return u}function CT(i){const e=[];let n=0;for(let r=0;r<i.length;r++){const o=u3(i,r);if(o===null){e.push(null);continue}n+=o,e.push(n)}return e}function h3(i,e){const n=[];if(e===10){for(const c of i.balls)if(c.isFoul)n.push("F");else if(c.isGutter)n.push("G");else if(c.pinsKnockedDown===10)n.push("X");else if(c.pinsKnockedDown===0)n.push("-");else{const u=i.balls[n.length-1];u&&u.pinsKnockedDown+c.pinsKnockedDown===10?n.push("/"):n.push(c.pinsKnockedDown)}return n}const r=i.balls[0],o=i.balls[1];if(!r)return[];if(r.isFoul)n.push("F");else if(r.isGutter||r.pinsKnockedDown===0)n.push("-");else{if(i.isStrike)return n.push("X"),n;n.push(r.pinsKnockedDown)}return o&&(o.isFoul?n.push("F"):i.isSpare?n.push("/"):o.isGutter||o.pinsKnockedDown===0?n.push("-"):n.push(o.pinsKnockedDown)),n}const po=[1,2,3,4,5,6,7,8,9,10];function Ud(i,e){const n=i.length;if(n===0)return{playerId:"",totalGames:0,averageScore:0,highGame:0,strikePercentage:0,sparePercentage:0,singlePinSparePercentage:0,multiPinSparePercentage:0,splitLeavesPercentage:0,splitConversionPercentage:0,openFramesPercentage:0,gutterCount:0,foulCount:0,firstBallAverage:0,pocketHitPercentage:0,carryRate:0,doublePercentage:0,triplePercentage:0,commonLeaves:[]};const o=i.reduce((j,J)=>j+J.totalScore,0)/n,c=Math.max(...i.map(j=>j.totalScore));let u=0,p=0,g=0,y=0,b=0,x=0,E=0,N=0,O=0,V=0,k=0,U=0,Q=0;const W=new Map,re=e.filter(j=>j.frameNumber<=9),oe=re.length;for(const j of re){if(j.isStrike)u++;else if(j.isSpare){p++;const he=j.leaveAfterBall1;he&&(he.count===1?g++:y++,he.isSplit&&x++)}else E++;const J=j.balls[0];if(J&&(V+=J.pinsKnockedDown,k++,J.isGutter&&N++,J.isFoul&&O++,c3(J.pinsetBefore,J.pinsetAfter)&&(U++,j.isStrike&&Q++),!j.isStrike&&j.leaveAfterBall1)){const he=j.leaveAfterBall1,be=he.pins.join("-"),Ae=W.get(be)||{count:0,conversions:0};W.set(be,{count:Ae.count+1,conversions:Ae.conversions+(he.isConverted?1:0)}),he.isSplit&&b++}const ce=j.balls[1];ce&&(ce.isGutter&&N++,ce.isFoul&&O++)}const ue=oe>0?u/oe*100:0,C=oe>0?p/oe*100:0,A=p>0?g/p*100:0,R=p>0?y/p*100:0,z=oe>0?b/oe*100:0,M=b>0?x/b*100:0,F=oe>0?E/oe*100:0,I=k>0?V/k:0,pe=k>0?U/k*100:0,Ee=U>0?Q/U*100:0;let Y=0,se=0;for(let j=0;j<re.length-1;j++)re[j].isStrike&&re[j+1].isStrike&&(Y++,j<re.length-2&&re[j+2].isStrike&&se++);const le=oe>0?Y/oe*100:0,Se=oe>0?se/oe*100:0,je=Array.from(W.entries()).map(([j,J])=>({pinset:j.split("-").map(Number),count:J.count,conversionRate:J.count>0?J.conversions/J.count*100:0})).sort((j,J)=>J.count-j.count).slice(0,10);return{playerId:i[0]?.playerId||"",totalGames:n,averageScore:Math.round(o*10)/10,highGame:c,strikePercentage:Math.round(ue*10)/10,sparePercentage:Math.round(C*10)/10,singlePinSparePercentage:Math.round(A*10)/10,multiPinSparePercentage:Math.round(R*10)/10,splitLeavesPercentage:Math.round(z*10)/10,splitConversionPercentage:Math.round(M*10)/10,openFramesPercentage:Math.round(F*10)/10,gutterCount:N,foulCount:O,firstBallAverage:Math.round(I*10)/10,pocketHitPercentage:Math.round(pe*10)/10,carryRate:Math.round(Ee*10)/10,doublePercentage:Math.round(le*10)/10,triplePercentage:Math.round(Se*10)/10,commonLeaves:je}}function d3(i,e=30){const[n,r]=P.useState({stats:null,games:[],loading:!0,error:null});return P.useEffect(()=>{if(!i){r({stats:null,games:[],loading:!1,error:"No player ID"});return}(async()=>{try{r(x=>({...x,loading:!0,error:null}));const c=Tr(Gi(kt,"games"),Gn("playerId","==",i),Gn("isComplete","==",!0),gT("createdAt","desc"),yT(e)),u=await _a(c),p=[],g=[];for(const x of u.docs){const E=x.data(),N={id:x.id,...E};p.push(N);const O=E.createdAt,V=O?.toDate?O.toDate():new Date(O);g.push({id:x.id,date:V,score:E.totalScore,mode:E.mode})}const y=[];for(const x of p)if(x.frameIds&&x.frameIds.length>0){const E=Tr(Gi(kt,"frames"),Gn("gameId","==",x.id));(await _a(E)).forEach(O=>{y.push({id:O.id,...O.data()})})}const b=Ud(p,y);r({stats:b,games:g,loading:!1,error:null})}catch(c){console.error("Error fetching dashboard data:",c),r(u=>({...u,loading:!1,error:"Failed to load dashboard data"}))}})()},[i,e]),n}async function f3(i,e=30){try{const n=Tr(Gi(kt,"games"),Gn("playerId","==",i),Gn("isComplete","==",!0),gT("createdAt","desc"),yT(e)),r=await _a(n),o=[];for(const u of r.docs){const p=u.data();o.push({id:u.id,...p})}const c=[];for(const u of o)if(u.frameIds&&u.frameIds.length>0){const p=Tr(Gi(kt,"frames"),Gn("gameId","==",u.id));(await _a(p)).forEach(y=>{c.push({id:y.id,...y.data()})})}return Ud(o,c)}catch(n){return console.error("Error fetching player stats for comparison:",n),null}}function m3(i,e){const[n,r]=P.useState([]),[o,c]=P.useState(!0);return P.useEffect(()=>{if(!i){r([]),c(!1);return}(async()=>{try{c(!0);const p=Tr(Gi(kt,"users"),Gn("programId","==",i)),g=await _a(p),y=[];g.forEach(b=>{const x=b.data();b.id!==e&&y.push({id:b.id,name:x.displayName||x.email,role:x.role})}),y.sort((b,x)=>b.role==="coach"&&x.role!=="coach"?-1:b.role!=="coach"&&x.role==="coach"?1:b.name.localeCompare(x.name)),r(y)}catch(p){console.error("Error fetching available players:",p),r([])}finally{c(!1)}})()},[i,e]),{players:n,loading:o}}function wh({label:i,value:e,color:n="blue"}){const r={blue:"from-blue-500/20 to-blue-600/20 border-blue-400/30",green:"from-green-500/20 to-green-600/20 border-green-400/30",purple:"from-purple-500/20 to-purple-600/20 border-purple-400/30",indigo:"from-indigo-500/20 to-indigo-600/20 border-indigo-400/30"};return f.jsxs("div",{className:`bg-gradient-to-br ${r[n]} backdrop-blur-lg rounded-xl p-4 border`,children:[f.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-200 mb-1",children:i}),f.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-white",children:e})]})}function p3({games:i,limit:e=30}){const n=P.useMemo(()=>{const o=i.slice(0,e).reverse();if(o.length===0)return{points:[],maxScore:300,minScore:0};const c=o.map(E=>E.score),u=Math.max(...c,100),p=Math.min(...c,0),g=380,y=180,b=g/Math.max(o.length-1,1);return{points:o.map((E,N)=>{const O=10+N*b,k=190-(E.score-p)/(u-p||1)*y;return{x:O,y:k,score:E.score,date:E.date,gameId:E.gameId}}),maxScore:u,minScore:p}},[i,e]);if(n.points.length===0)return f.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:"No games recorded yet"});const r=n.points.map((o,c)=>`${c===0?"M":"L"} ${o.x} ${o.y}`).join(" ");return f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-gray-400 pr-2",children:[f.jsx("span",{children:n.maxScore}),f.jsx("span",{children:Math.round((n.maxScore+n.minScore)/2)}),f.jsx("span",{children:n.minScore})]}),f.jsxs("div",{className:"ml-8",children:[f.jsxs("svg",{viewBox:"0 0 400 200",className:"w-full h-64",children:[f.jsx("line",{x1:"10",y1:"10",x2:"390",y2:"10",stroke:"currentColor",strokeOpacity:"0.1"}),f.jsx("line",{x1:"10",y1:"100",x2:"390",y2:"100",stroke:"currentColor",strokeOpacity:"0.1"}),f.jsx("line",{x1:"10",y1:"190",x2:"390",y2:"190",stroke:"currentColor",strokeOpacity:"0.1"}),f.jsx("path",{d:r,fill:"none",stroke:"rgb(147, 197, 253)",strokeWidth:"2",strokeLinejoin:"round"}),n.points.map((o,c)=>f.jsxs("g",{children:[f.jsx("circle",{cx:o.x,cy:o.y,r:"4",fill:"rgb(59, 130, 246)",className:"hover:r-6 transition-all cursor-pointer"}),c===n.points.length-1&&f.jsxs("g",{children:[f.jsx("rect",{x:o.x-25,y:o.y-35,width:"50",height:"24",rx:"6",fill:"rgb(59, 130, 246)",opacity:"0.9"}),f.jsx("text",{x:o.x,y:o.y-18,textAnchor:"middle",fill:"white",fontSize:"14",fontWeight:"bold",children:o.score})]})]},o.gameId))]}),f.jsxs("div",{className:"text-xs text-gray-400 text-center mt-2",children:["Last ",e," games"]})]})]})}const Eh=43200,Cx=1440,Ix=Symbol.for("constructDateFrom");function ty(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&Ix in i?i[Ix](e):i instanceof Date?new i.constructor(e):new Date(e)}function Sr(i,e){return ty(i,i)}let g3={};function y3(){return g3}function Dx(i){const e=Sr(i),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+i-+n}function ny(i,...e){const n=ty.bind(null,i||e.find(r=>typeof r=="object"));return e.map(n)}function Vh(i,e){const n=+Sr(i)-+Sr(e);return n<0?-1:n>0?1:n}function v3(i){return ty(i,Date.now())}function _3(i,e,n){const[r,o]=ny(n?.in,i,e),c=r.getFullYear()-o.getFullYear(),u=r.getMonth()-o.getMonth();return c*12+u}function b3(i){return e=>{const r=(i?Math[i]:Math.trunc)(e);return r===0?0:r}}function x3(i,e){return+Sr(i)-+Sr(e)}function w3(i,e){const n=Sr(i);return n.setHours(23,59,59,999),n}function E3(i,e){const n=Sr(i),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function T3(i,e){const n=Sr(i);return+w3(n)==+E3(n)}function S3(i,e,n){const[r,o,c]=ny(n?.in,i,i,e),u=Vh(o,c),p=Math.abs(_3(o,c));if(p<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-u*p);let g=Vh(o,c)===-u;T3(r)&&p===1&&Vh(r,c)===1&&(g=!1);const y=u*(p-+g);return y===0?0:y}function A3(i,e,n){const r=x3(i,e)/1e3;return b3(n?.roundingMethod)(r)}const N3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},R3=(i,e,n)=>{let r;const o=N3[i];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function cp(i){return(e={})=>{const n=e.width?String(e.width):i.defaultWidth;return i.formats[n]||i.formats[i.defaultWidth]}}const C3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},I3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},D3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},j3={date:cp({formats:C3,defaultWidth:"full"}),time:cp({formats:I3,defaultWidth:"full"}),dateTime:cp({formats:D3,defaultWidth:"full"})},O3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},M3=(i,e,n,r)=>O3[i];function Yl(i){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let o;if(r==="formatting"&&i.formattingValues){const u=i.defaultFormattingWidth||i.defaultWidth,p=n?.width?String(n.width):u;o=i.formattingValues[p]||i.formattingValues[u]}else{const u=i.defaultWidth,p=n?.width?String(n.width):i.defaultWidth;o=i.values[p]||i.values[u]}const c=i.argumentCallback?i.argumentCallback(e):e;return o[c]}}const P3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},k3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},V3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},L3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},U3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},z3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},B3=(i,e)=>{const n=Number(i),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},F3={ordinalNumber:B3,era:Yl({values:P3,defaultWidth:"wide"}),quarter:Yl({values:k3,defaultWidth:"wide",argumentCallback:i=>i-1}),month:Yl({values:V3,defaultWidth:"wide"}),day:Yl({values:L3,defaultWidth:"wide"}),dayPeriod:Yl({values:U3,defaultWidth:"wide",formattingValues:z3,defaultFormattingWidth:"wide"})};function $l(i){return(e,n={})=>{const r=n.width,o=r&&i.matchPatterns[r]||i.matchPatterns[i.defaultMatchWidth],c=e.match(o);if(!c)return null;const u=c[0],p=r&&i.parsePatterns[r]||i.parsePatterns[i.defaultParseWidth],g=Array.isArray(p)?H3(p,x=>x.test(u)):q3(p,x=>x.test(u));let y;y=i.valueCallback?i.valueCallback(g):g,y=n.valueCallback?n.valueCallback(y):y;const b=e.slice(u.length);return{value:y,rest:b}}}function q3(i,e){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&e(i[n]))return n}function H3(i,e){for(let n=0;n<i.length;n++)if(e(i[n]))return n}function G3(i){return(e,n={})=>{const r=e.match(i.matchPattern);if(!r)return null;const o=r[0],c=e.match(i.parsePattern);if(!c)return null;let u=i.valueCallback?i.valueCallback(c[0]):c[0];u=n.valueCallback?n.valueCallback(u):u;const p=e.slice(o.length);return{value:u,rest:p}}}const Q3=/^(\d+)(th|st|nd|rd)?/i,K3=/\d+/i,Y3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$3={any:[/^b/i,/^(a|c)/i]},X3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},W3={any:[/1/i,/2/i,/3/i,/4/i]},J3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Z3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},e4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},t4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},n4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},i4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},s4={ordinalNumber:G3({matchPattern:Q3,parsePattern:K3,valueCallback:i=>parseInt(i,10)}),era:$l({matchPatterns:Y3,defaultMatchWidth:"wide",parsePatterns:$3,defaultParseWidth:"any"}),quarter:$l({matchPatterns:X3,defaultMatchWidth:"wide",parsePatterns:W3,defaultParseWidth:"any",valueCallback:i=>i+1}),month:$l({matchPatterns:J3,defaultMatchWidth:"wide",parsePatterns:Z3,defaultParseWidth:"any"}),day:$l({matchPatterns:e4,defaultMatchWidth:"wide",parsePatterns:t4,defaultParseWidth:"any"}),dayPeriod:$l({matchPatterns:n4,defaultMatchWidth:"any",parsePatterns:i4,defaultParseWidth:"any"})},r4={code:"en-US",formatDistance:R3,formatLong:j3,formatRelative:M3,localize:F3,match:s4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function a4(i,e,n){const r=y3(),o=n?.locale??r.locale??r4,c=2520,u=Vh(i,e);if(isNaN(u))throw new RangeError("Invalid time value");const p=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:u}),[g,y]=ny(n?.in,...u>0?[e,i]:[i,e]),b=A3(y,g),x=(Dx(y)-Dx(g))/1e3,E=Math.round((b-x)/60);let N;if(E<2)return n?.includeSeconds?b<5?o.formatDistance("lessThanXSeconds",5,p):b<10?o.formatDistance("lessThanXSeconds",10,p):b<20?o.formatDistance("lessThanXSeconds",20,p):b<40?o.formatDistance("halfAMinute",0,p):b<60?o.formatDistance("lessThanXMinutes",1,p):o.formatDistance("xMinutes",1,p):E===0?o.formatDistance("lessThanXMinutes",1,p):o.formatDistance("xMinutes",E,p);if(E<45)return o.formatDistance("xMinutes",E,p);if(E<90)return o.formatDistance("aboutXHours",1,p);if(E<Cx){const O=Math.round(E/60);return o.formatDistance("aboutXHours",O,p)}else{if(E<c)return o.formatDistance("xDays",1,p);if(E<Eh){const O=Math.round(E/Cx);return o.formatDistance("xDays",O,p)}else if(E<Eh*2)return N=Math.round(E/Eh),o.formatDistance("aboutXMonths",N,p)}if(N=S3(y,g),N<12){const O=Math.round(E/Eh);return o.formatDistance("xMonths",O,p)}else{const O=N%12,V=Math.trunc(N/12);return O<3?o.formatDistance("aboutXYears",V,p):O<9?o.formatDistance("overXYears",V,p):o.formatDistance("almostXYears",V+1,p)}}function o4(i,e){return a4(i,v3(i),e)}function l4({games:i,limit:e=10}){const n=i.slice(0,e);if(n.length===0)return f.jsx("div",{className:"text-center py-8 text-gray-400",children:"No games recorded yet. Start bowling to see your history!"});const r=c=>({league:"League","practice-full":"Practice","practice-spares":"Spares","match-traditional":"Match","match-baker":"Baker"})[c]||c,o=c=>({league:"bg-purple-500/20 text-purple-200","practice-full":"bg-blue-500/20 text-blue-200","practice-spares":"bg-green-500/20 text-green-200","match-traditional":"bg-orange-500/20 text-orange-200","match-baker":"bg-indigo-500/20 text-indigo-200"})[c]||"bg-gray-500/20 text-gray-200";return f.jsx("div",{className:"space-y-2",children:n.map(c=>f.jsxs("div",{className:"flex items-center justify-between bg-white/5 backdrop-blur-sm rounded-lg p-3 hover:bg-white/10 transition-colors border border-white/10",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[f.jsx("div",{className:"text-2xl font-bold text-white min-w-[3rem]",children:c.score}),f.jsx("div",{className:"flex-1",children:f.jsx("div",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${o(c.mode)}`,children:r(c.mode)})})]}),f.jsx("div",{className:"text-xs text-gray-400",children:o4(c.date,{addSuffix:!0})})]},c.id))})}function c4({currentPlayerStats:i,availablePlayers:e,onComparePlayer:n}){const[r,o]=P.useState(""),[c,u]=P.useState(null),[p,g]=P.useState(!1),y=async x=>{if(!x){u(null),o("");return}g(!0),o(x);try{const E=await n(x);u(E)}catch(E){console.error("Error fetching comparison stats:",E)}finally{g(!1)}},b=({label:x,myValue:E,theirValue:N,format:O=V=>V.toString()})=>{const V=O(E),k=N!==void 0?O(N):"-",U=N!==void 0&&E>N,Q=N!==void 0&&E<N;return f.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300",children:x}),f.jsxs("div",{className:"flex gap-6",children:[f.jsx("div",{className:`font-semibold ${U?"text-green-400":Q?"text-red-400":"text-white"}`,children:V}),N!==void 0&&f.jsx("div",{className:"text-gray-400 min-w-[3rem] text-right",children:k})]})]})};return f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Compare"}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Compare with"}),f.jsxs("select",{value:r,onChange:x=>y(x.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p,children:[f.jsx("option",{value:"",children:"Select a player..."}),e.map(x=>f.jsxs("option",{value:x.id,className:"bg-gray-900",children:[x.name," ",x.role==="coach"?"(Coach)":""]},x.id))]})]}),p&&f.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading comparison..."}),c&&!p&&f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex justify-between mb-4 text-xs text-gray-400",children:[f.jsx("span",{children:"Stat"}),f.jsxs("div",{className:"flex gap-6",children:[f.jsx("span",{children:"You"}),f.jsx("span",{className:"min-w-[3rem] text-right",children:e.find(x=>x.id===r)?.name})]})]}),f.jsx(b,{label:"Average",myValue:i.averageScore,theirValue:c.averageScore,format:x=>x.toFixed(1)}),f.jsx(b,{label:"High Game",myValue:i.highGame,theirValue:c.highGame}),f.jsx(b,{label:"Strike %",myValue:i.strikePercentage,theirValue:c.strikePercentage,format:x=>`${x.toFixed(1)}%`}),f.jsx(b,{label:"Spare %",myValue:i.sparePercentage,theirValue:c.sparePercentage,format:x=>`${x.toFixed(1)}%`}),f.jsx(b,{label:"1st Ball Avg",myValue:i.firstBallAverage,theirValue:c.firstBallAverage,format:x=>x.toFixed(2)}),f.jsx(b,{label:"Clean %",myValue:100-i.openFramesPercentage,theirValue:100-c.openFramesPercentage,format:x=>`${x.toFixed(1)}%`})]}),!c&&!p&&r&&f.jsx("div",{className:"text-center py-8 text-gray-400",children:"No stats available for comparison"})]})}function u4(){const{userData:i,logout:e}=Yn(),n=i?.role==="coach",[r,o]=P.useState(30),{stats:c,games:u,loading:p,error:g}=d3(i?.uid,r==="all"?1e3:r),{players:y}=m3(i?.programId,i?.uid),b=async E=>await f3(E,r==="all"?1e3:r),x=({value:E,label:N})=>f.jsx("button",{onClick:()=>o(E),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${r===E?"bg-blue-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:N});return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[f.jsx("header",{className:"bg-white/10 backdrop-blur-lg shadow-xl border-b border-white/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-white",children:"WHS Bowling"}),f.jsx("p",{className:"text-sm text-gray-200",children:i?.displayName})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("span",{className:"text-xs text-gray-300 bg-white/10 px-3 py-1 rounded-full",children:i?.role}),f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white hover:text-gray-200 bg-white/10 hover:bg-white/20 rounded-lg transition-all backdrop-blur-sm",children:"Logout"})]})]})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Stats"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(x,{value:30,label:"Last 30"}),f.jsx(x,{value:60,label:"Last 60"}),f.jsx(x,{value:90,label:"Last 90"}),f.jsx(x,{value:"all",label:"All Time"})]})]}),p&&f.jsx("div",{className:"text-center py-12 text-gray-300",children:"Loading your stats..."}),g&&f.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 text-red-200",children:g}),c&&!p&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[f.jsx(wh,{label:"Average",value:c.averageScore.toFixed(1),color:"blue"}),f.jsx(wh,{label:"High Score",value:c.highGame,color:"green"}),f.jsx(wh,{label:"1st Ball Avg",value:c.firstBallAverage.toFixed(2),color:"purple"}),f.jsx(wh,{label:"Clean %",value:`${(100-c.openFramesPercentage).toFixed(1)}%`,color:"indigo"})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-xl font-bold text-white",children:"Score"}),f.jsxs("span",{className:"text-sm text-gray-300",children:["Last ",r==="all"?u.length:r," games"]})]}),f.jsx(p3,{games:u.map(E=>({...E,gameId:E.id})),limit:r==="all"?u.length:r})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[y.length>0&&f.jsx(c4,{currentPlayerStats:c,availablePlayers:y,onComparePlayer:b}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-xl font-bold text-white",children:"Recent Games"}),f.jsx(Ve,{to:"/stats",className:"text-sm text-blue-300 hover:text-blue-200 transition-colors",children:"View all "})]}),f.jsx(l4,{games:u,limit:10})]})]})]}),!p&&!g&&u.length===0&&f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-12 border border-white/20 text-center",children:[f.jsx("div",{className:"text-4xl mb-4",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No games yet"}),f.jsx("p",{className:"text-gray-300 mb-6",children:"Start bowling to see your stats and progress!"}),f.jsx(Ve,{to:"/league",className:"inline-block bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Start a League Game"})]})]}),f.jsxs("div",{className:"mt-12",children:[f.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[f.jsxs(Ve,{to:"/practice/spares",className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:bg-white/20 hover:shadow-2xl transition-all border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Practice - Spares Only"}),f.jsx("p",{className:"text-gray-300",children:"Work on specific spare drills and conversions"})]}),f.jsxs(Ve,{to:"/practice/full",className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:bg-white/20 hover:shadow-2xl transition-all border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Practice - Full Game"}),f.jsx("p",{className:"text-gray-300",children:"Bowl a complete 10-frame game"})]}),f.jsxs(Ve,{to:"/match/traditional",className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:bg-white/20 hover:shadow-2xl transition-all border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Match - Traditional"}),f.jsx("p",{className:"text-gray-300",children:"5-person team, each bowls full games"})]}),f.jsxs(Ve,{to:"/match/baker",className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:bg-white/20 hover:shadow-2xl transition-all border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Match - Baker"}),f.jsx("p",{className:"text-gray-300",children:"5 players alternate frames"})]}),f.jsxs(Ve,{to:"/league",className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:bg-white/20 hover:shadow-2xl transition-all border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"League"}),f.jsx("p",{className:"text-gray-300",children:"3-game series for league play"})]}),f.jsxs(Ve,{to:"/stats",className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:bg-white/20 hover:shadow-2xl transition-all border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"My Stats"}),f.jsx("p",{className:"text-gray-300",children:"View detailed performance and analytics"})]}),n&&f.jsxs(f.Fragment,{children:[f.jsxs(Ve,{to:"/coach/admin",className:"bg-gradient-to-br from-indigo-500/20 to-purple-500/20 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:from-indigo-500/30 hover:to-purple-500/30 hover:shadow-2xl transition-all border-2 border-indigo-300/50",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Coach Admin"}),f.jsx("p",{className:"text-gray-200",children:"Manage players, stats, and team settings"})]}),f.jsxs(Ve,{to:"/coach/roster",className:"bg-gradient-to-br from-indigo-500/20 to-purple-500/20 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:from-indigo-500/30 hover:to-purple-500/30 hover:shadow-2xl transition-all border-2 border-indigo-300/50",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Manage Roster"}),f.jsx("p",{className:"text-gray-200",children:"Add/remove players and create teams"})]}),f.jsxs(Ve,{to:"/coach/notes",className:"bg-gradient-to-br from-indigo-500/20 to-purple-500/20 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:from-indigo-500/30 hover:to-purple-500/30 hover:shadow-2xl transition-all border-2 border-indigo-300/50",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Coach Notes"}),f.jsx("p",{className:"text-gray-200",children:"View and manage player notes"})]}),f.jsxs(Ve,{to:"/coach/team-stats",className:"bg-gradient-to-br from-indigo-500/20 to-purple-500/20 backdrop-blur-lg rounded-2xl shadow-xl p-6 hover:from-indigo-500/30 hover:to-purple-500/30 hover:shadow-2xl transition-all border-2 border-indigo-300/50",children:[f.jsx("div",{className:"text-3xl mb-3",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Team Stats"}),f.jsx("p",{className:"text-gray-200",children:"View team analytics and comparisons"})]})]})]})]})]})]})}function IT({pinsStanding:i,onPinTap:e,disabled:n=!1}){const[r,o]=P.useState(new Set),c=y=>{if(n||!i.includes(y))return;const b=new Set(r);b.has(y)?b.delete(y):b.add(y),o(b),e(y)},u=y=>i.includes(y),p=y=>r.has(y),g=y=>{const b=u(y),x=p(y);return b?x?"bg-yellow-400 text-gray-900 border-4 border-yellow-600 shadow-lg scale-110":"bg-white text-gray-900 border-2 border-gray-400 hover:bg-blue-50 hover:border-blue-500 hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed opacity-50"};return f.jsxs("div",{className:"w-full max-w-md mx-auto",children:[f.jsx("div",{className:"bg-gradient-to-b from-amber-100 via-amber-50 to-amber-100 rounded-2xl p-8 shadow-xl border-4 border-amber-200",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center gap-3",children:[7,8,9,10].map(y=>f.jsx("button",{onClick:()=>c(y),disabled:n||!u(y),className:`w-16 h-16 rounded-full font-bold text-xl transition-all shadow-md ${g(y)}`,children:y},y))}),f.jsxs("div",{className:"flex justify-center gap-3",children:[f.jsx("div",{className:"w-8"})," ",[4,5,6].map(y=>f.jsx("button",{onClick:()=>c(y),disabled:n||!u(y),className:`w-16 h-16 rounded-full font-bold text-xl transition-all shadow-md ${g(y)}`,children:y},y))]}),f.jsxs("div",{className:"flex justify-center gap-3",children:[f.jsx("div",{className:"w-16"})," ",[2,3].map(y=>f.jsx("button",{onClick:()=>c(y),disabled:n||!u(y),className:`w-16 h-16 rounded-full font-bold text-xl transition-all shadow-md ${g(y)}`,children:y},y))]}),f.jsxs("div",{className:"flex justify-center",children:[f.jsx("div",{className:"w-24"})," ",f.jsx("button",{onClick:()=>c(1),disabled:n||!u(1),className:`w-16 h-16 rounded-full font-bold text-xl transition-all shadow-md ${g(1)}`,children:"1"})]})]})}),f.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 bg-white rounded-full border-2 border-gray-400"}),f.jsx("span",{children:"Available"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 bg-yellow-400 rounded-full border-4 border-yellow-600"}),f.jsx("span",{children:"Selected (LEFT)"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full opacity-50"}),f.jsx("span",{children:"Down"})]})]})]})}function h4({onStrike:i,onSpare:e,onMiss:n,onUndo:r,onSubmit:o,canUndo:c,canSubmit:u,disabled:p=!1}){const g=y=>`px-4 py-3 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800",secondary:"bg-gray-600 text-white hover:bg-gray-700 active:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800",success:"bg-green-600 text-white hover:bg-green-700 active:bg-green-800"}[y]}`;return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[f.jsx("button",{onClick:i,disabled:p,className:g("success"),children:"X Strike"}),f.jsx("button",{onClick:e,disabled:p,className:g("primary"),children:"/ Spare"}),f.jsx("button",{onClick:n,disabled:p,className:g("secondary"),children:"- Miss"})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:r,disabled:!c||p,className:"flex-1 px-4 py-2 bg-yellow-500 text-white rounded-lg font-medium hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:" Undo"}),f.jsx("button",{onClick:o,disabled:!u||p,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Ball"})]})]})}function d4({frames:i,currentFrame:e}){const n=CT(i),r=(c,u)=>{const p=h3(c,u);return u===10?f.jsx("div",{className:"flex gap-0.5",children:[0,1,2].map(g=>f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center border border-gray-300 text-xs sm:text-sm font-semibold",children:p[g]!==void 0?o(p[g]):""},g))}):f.jsxs("div",{className:"flex gap-0.5",children:[f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center border border-gray-300 text-xs sm:text-sm font-semibold",children:p[0]!==void 0?o(p[0]):""}),f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center border border-gray-300 text-xs sm:text-sm font-semibold",children:p[1]!==void 0?o(p[1]):""})]})},o=c=>typeof c=="number"?c.toString():c;return f.jsx("div",{className:"bg-white shadow-md rounded-lg p-2 sm:p-4 overflow-x-auto",children:f.jsx("div",{className:"min-w-max",children:f.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5,6,7,8,9,10].map(c=>{const u=i.find(y=>y.frameNumber===c),p=c===e,g=u?n[c-1]:null;return f.jsxs("div",{className:`flex-1 border-2 rounded ${p?"border-blue-500 bg-blue-50":"border-gray-300"} min-w-[60px] sm:min-w-[80px]`,children:[f.jsx("div",{className:"text-center text-xs font-semibold text-gray-600 border-b border-gray-300 py-0.5",children:c}),f.jsx("div",{className:"flex justify-center p-1",children:u?r(u,c):f.jsx("div",{className:"flex gap-0.5",children:c===10?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border border-gray-200"}),f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border border-gray-200"}),f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border border-gray-200"})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border border-gray-200"}),f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border border-gray-200"})]})})}),f.jsx("div",{className:"text-center text-sm sm:text-lg font-bold border-t border-gray-300 py-1",children:g??""})]},c)})})})})}function zd({gameId:i,playerId:e,onGameComplete:n}){const[r,o]=P.useState([]),[c,u]=P.useState(1),[p,g]=P.useState(1),[y,b]=P.useState(po),[x,E]=P.useState([]),[N,O]=P.useState([]),[V,k]=P.useState(!1);P.useEffect(()=>{if(r.length===0){const pe={id:`${i}-frame-1`,gameId:i,frameNumber:1,playerId:e,balls:[],score:0,runningTotal:0,isStrike:!1,isSpare:!1,createdAt:new Date,updatedAt:new Date};o([pe])}},[]);const U=pe=>{x.includes(pe)?E(x.filter(Ee=>Ee!==pe)):E([...x,pe])},Q=(pe,Ee=!1,Y=!1)=>{const se=[...y];let le;return Ee||Y?le=se:le=[...x].sort((Se,je)=>Se-je),{ballNumber:p,pinsKnockedDown:Ee?0:pe,pinsetBefore:se,pinsetAfter:le,isFoul:Ee,isGutter:Y,timestamp:new Date}},W=pe=>{const Ee=c-1,Y=[...r],se={...Y[Ee]};if(se.balls.push(pe),O([...N,pe]),b(pe.pinsetAfter),c<=9&&p===1&&pe.pinsKnockedDown===10){se.isStrike=!0,se.leaveAfterBall1=Rx([],!1),Y[Ee]=se,o(Y),oe();return}if(p===1&&(se.leaveAfterBall1=Rx(pe.pinsetAfter,!1)),c<=9&&p===2&&(se.balls[0]?.pinsKnockedDown||0)+pe.pinsKnockedDown===10&&(se.isSpare=!0,se.leaveAfterBall1&&(se.leaveAfterBall1.isConverted=!0)),c===10){const le=se.balls[0],Se=se.balls[1];le&&le.pinsKnockedDown===10&&(se.isStrike=!0),le&&Se&&le.pinsKnockedDown<10&&le.pinsKnockedDown+Se.pinsKnockedDown===10&&(se.isSpare=!0)}Y[Ee]=se,o(Y),c===10?re(pe,se):p===2?oe():(g(2),E([]))},re=(pe,Ee)=>{const Y=Ee.balls.length;if(Y===1)Ee.balls[0].pinsKnockedDown===10?(b(po),E([]),g(2)):(g(2),E([]));else if(Y===2){const se=Ee.balls[0],le=Ee.balls[1];se.pinsKnockedDown===10||se.pinsKnockedDown+le.pinsKnockedDown===10?(g(3),se.pinsKnockedDown===10?le.pinsKnockedDown===10&&b(po):se.pinsKnockedDown+le.pinsKnockedDown===10&&b(po),E([])):ue()}else Y===3&&ue()},oe=()=>{if(c===10){ue();return}const pe=c+1,Ee={id:`${i}-frame-${pe}`,gameId:i,frameNumber:pe,playerId:e,balls:[],score:0,runningTotal:0,isStrike:!1,isSpare:!1,createdAt:new Date,updatedAt:new Date};o([...r,Ee]),u(pe),g(1),b(po),E([])},ue=()=>{const pe=CT(r),Ee=pe[pe.length-1]||0;n(r,Ee)},C=()=>{const pe=Q(10,!1,!1);E([]),setTimeout(()=>W(pe),200)},A=()=>{const pe=y.length,Ee=Q(pe,!1,!1);E([]),setTimeout(()=>W(Ee),200)},R=()=>{const pe=Q(0,!1,!1);E([...y]),W(pe)},z=()=>{const pe=y.length-x.length,Ee=Q(pe,!1,!1);W(Ee)},M=()=>{if(N.length===0)return;const pe=N[N.length-1],Ee=N.slice(0,-1);O(Ee);const Y=r.findIndex(je=>je.balls.includes(pe));if(Y===-1)return;const se=[...r],le={...se[Y]};le.balls=le.balls.filter(je=>je!==pe),le.balls.length===0&&(le.isStrike=!1,le.isSpare=!1,le.leaveAfterBall1=void 0),se[Y]=le,o(se);const Se=le.balls[le.balls.length-1];Se?(b(Se.pinsetAfter),g(le.balls.length+1)):(b(po),g(1)),E([])},F=N.length>0,I=x.length>0;return f.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-6",children:[f.jsx(d4,{frames:r,currentFrame:c}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:()=>k(!V),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:V?" Hide Help":"? Show Help"})}),V&&f.jsxs("div",{className:"bg-purple-50 border-2 border-purple-500 rounded-lg p-6 space-y-4",children:[f.jsx("h3",{className:"text-xl font-bold text-purple-900",children:"How to Score"}),f.jsxs("div",{className:"space-y-3 text-sm text-purple-900",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:" Selecting Pins:"}),f.jsxs("p",{children:["After your first ball, ",f.jsx("strong",{children:"select the pins you LEFT STANDING"})," (not what you knocked down)."]}),f.jsx("p",{children:"For example: If you left the 1-2-4-7 pins standing, click those pins to highlight them in yellow."})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:" Quick Buttons:"}),f.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"X Strike:"})," You knocked down all 10 pins on your first ball"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"/ Spare:"})," You knocked down all remaining pins on your second ball"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"- Miss:"})," You didn't knock down any pins on this ball"]})]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:" USBC Scoring Rules:"}),f.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Strike:"})," 10 pins + your next 2 throws (shown as X)"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Spare:"})," 10 pins + your next 1 throw (shown as /)"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Open Frame:"})," Just the pin count (miss shown as -)"]})]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:" Steps for Each Ball:"}),f.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[f.jsx("li",{children:"Bowl your ball"}),f.jsx("li",{children:`If it's ball 1: Select the pins LEFT standing, then click "Submit Ball"`}),f.jsx("li",{children:"If you got a strike, spare, or miss: Use the quick buttons instead"}),f.jsx("li",{children:"Repeat for ball 2"})]})]})]})]}),f.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4",children:f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-semibold text-blue-900",children:["Frame ",c," - Ball ",p]}),f.jsxs("p",{className:"text-sm text-blue-700",children:[x.length," pins left standing  ",y.length," pins available"]})]})})}),f.jsx(IT,{pinsStanding:y,onPinTap:U}),f.jsx(h4,{onStrike:C,onSpare:A,onMiss:R,onUndo:M,onSubmit:z,canUndo:F,canSubmit:I})]})}function f4(){const[i,e]=P.useState(1),[n,r]=P.useState(!1),[o,c]=P.useState(0),u=(g,y)=>{console.log("Game complete!",{frames:g,score:y}),c(y),r(!0)},p=()=>{e(i+1),r(!1),c(0)};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("h1",{className:"text-4xl font-bold text-white text-center mb-8",children:["League Mode - Game ",i]}),n?f.jsxs("div",{className:"bg-white rounded-lg p-8 text-center",children:[f.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"Game Complete!"}),f.jsx("p",{className:"text-6xl font-bold text-gray-800 mb-8",children:o}),f.jsxs("button",{onClick:p,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:["Start Game ",i+1]})]}):f.jsx(zd,{gameId:`league-game-${i}`,playerId:"current-user-id",mode:"league",onGameComplete:u})]})})}function Bd(i,...e){const[n,r]=P.useState([]),[o,c]=P.useState(!0),[u,p]=P.useState(null);return P.useEffect(()=>{c(!0),p(null);const g=Gi(kt,i),y=Tr(g,...e),b=EO(y,x=>{const E=x.docs.map(N=>({id:N.id,...N.data()}));r(E),c(!1)},x=>{console.error(`Error fetching ${i}:`,x),p(x),c(!1)});return()=>b()},[i,JSON.stringify(e)]),{data:n,loading:o,error:u}}function Uo(i){const e=i?[Gn("programId","==",i)]:[];return Bd("players",...e)}function Fd(i){const e=i?[Gn("programId","==",i)]:[];return Bd("teams",...e)}function iy(i){return Bd("games",...[])}function m4(i){const e=i?[Gn("playerId","==",i)]:[];return Bd("coachNotes",...e)}function p4(){const{userData:i,logout:e}=Yn(),{data:n,loading:r,error:o}=Uo(i?.programId),{data:c}=iy(),[u,p]=P.useState(null),[g,y]=P.useState([]),[b,x]=P.useState(!1),E=n.find(V=>V.id===u),N=P.useMemo(()=>u?c.filter(V=>V.playerId===u):[],[c,u]);P.useEffect(()=>{if(N.length===0){y([]);return}(async()=>{x(!0);try{const k=N.map(Q=>Q.id),U=[];for(let Q=0;Q<k.length;Q+=10){const W=k.slice(Q,Q+10),re=Tr(Gi(kt,"frames"),Gn("gameId","in",W)),ue=(await _a(re)).docs.map(C=>({id:C.id,...C.data()}));U.push(...ue)}y(U)}catch(k){console.error("Error loading frames:",k)}finally{x(!1)}})()},[N]);const O=P.useMemo(()=>!u||N.length===0?null:Ud(N,g),[u,N,g]);return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[f.jsx("header",{className:"bg-white/10 backdrop-blur-lg shadow-xl border-b border-white/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Ve,{to:"/dashboard",className:"text-white hover:text-gray-200",children:" Back to Dashboard"}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"Coach Admin"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"text-sm text-gray-200",children:[i?.displayName," (",i?.role,")"]}),f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white hover:text-gray-200 bg-white/10 hover:bg-white/20 rounded-lg transition-all backdrop-blur-sm",children:"Logout"})]})]})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[f.jsxs(Ve,{to:"/coach/roster",className:"bg-gradient-to-br from-indigo-500/20 to-purple-500/20 backdrop-blur-lg rounded-xl shadow-lg p-4 hover:from-indigo-500/30 hover:to-purple-500/30 transition-all border border-indigo-300/30 flex items-center gap-3",children:[f.jsx("div",{className:"text-2xl",children:""}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-white",children:"Manage Roster"}),f.jsx("p",{className:"text-sm text-gray-300",children:"Create teams & manage players"})]})]}),f.jsxs(Ve,{to:"/coach/team-stats",className:"bg-gradient-to-br from-indigo-500/20 to-purple-500/20 backdrop-blur-lg rounded-xl shadow-lg p-4 hover:from-indigo-500/30 hover:to-purple-500/30 transition-all border border-indigo-300/30 flex items-center gap-3",children:[f.jsx("div",{className:"text-2xl",children:""}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-white",children:"Team Stats"}),f.jsx("p",{className:"text-sm text-gray-300",children:"View team analytics"})]})]}),f.jsxs(Ve,{to:"/coach/notes",className:"bg-gradient-to-br from-indigo-500/20 to-purple-500/20 backdrop-blur-lg rounded-xl shadow-lg p-4 hover:from-indigo-500/30 hover:to-purple-500/30 transition-all border border-indigo-300/30 flex items-center gap-3",children:[f.jsx("div",{className:"text-2xl",children:""}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-white",children:"Coach Notes"}),f.jsx("p",{className:"text-sm text-gray-300",children:"Manage player notes"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-2",children:""}),f.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Total Players"}),f.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:n.length})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-2",children:""}),f.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Total Games"}),f.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:n.reduce((V,k)=>V+(k.gamesPlayed||0),0)})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-2",children:""}),f.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Team Average"}),f.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:n.length>0?Math.round(n.reduce((V,k)=>V+(k.averageScore||0),0)/n.length):0})]})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20",children:[f.jsx("div",{className:"px-6 py-4 border-b border-white/20",children:f.jsx("h2",{className:"text-xl font-semibold text-white",children:"All Players"})}),r&&f.jsx("div",{className:"p-8 text-center text-gray-300",children:"Loading players..."}),o&&f.jsxs("div",{className:"p-8 text-center text-red-300",children:["Error loading players: ",o.message]}),!r&&!o&&n.length===0&&f.jsx("div",{className:"p-8 text-center text-gray-300",children:"No players found. Players will appear here when they sign up for your program."}),!r&&!o&&n.length>0&&f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-white/20",children:[f.jsx("thead",{className:"bg-white/5",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Games Played"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Average"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-white/10",children:n.map(V=>f.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:V.name}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:V.email}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:V.gamesPlayed||0}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:V.averageScore?V.averageScore.toFixed(1):"N/A"}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-3",children:[f.jsx("button",{onClick:()=>p(V.id),className:"text-blue-300 hover:text-blue-200 transition-colors",children:"View Stats"}),f.jsx(Ve,{to:`/coach/notes?playerId=${V.id}`,className:"text-purple-300 hover:text-purple-200 transition-colors",children:"Notes"})]})]},V.id))})]})})]}),u&&E&&f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-gradient-to-br from-purple-900/95 via-blue-900/95 to-indigo-900/95 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/30 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"sticky top-0 bg-white/10 backdrop-blur-lg px-6 py-4 border-b border-white/20 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:E.name}),f.jsx("p",{className:"text-sm text-gray-300",children:E.email})]}),f.jsx("button",{onClick:()=>p(null),className:"text-white hover:text-gray-300 text-2xl w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 transition-all",children:""})]}),f.jsxs("div",{className:"p-6",children:[b&&f.jsx("div",{className:"text-center py-12 text-gray-300",children:"Loading player statistics..."}),!b&&N.length===0&&f.jsxs("div",{className:"bg-white/10 rounded-xl p-12 text-center",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Games Played Yet"}),f.jsx("p",{className:"text-gray-300",children:"This player hasn't bowled any games yet."})]}),!b&&O&&N.length>0&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Overview"}),f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Total Games"}),f.jsx("div",{className:"text-2xl font-bold text-white",children:O.totalGames})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Average"}),f.jsx("div",{className:"text-2xl font-bold text-white",children:O.averageScore.toFixed(1)})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"High Game"}),f.jsx("div",{className:"text-2xl font-bold text-white",children:O.highGame})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Performance"}),f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Strike %"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.strikePercentage.toFixed(1),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Spare %"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.sparePercentage.toFixed(1),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Open Frames %"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.openFramesPercentage.toFixed(1),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"1st Ball Avg"}),f.jsx("div",{className:"text-xl font-bold text-white",children:O.firstBallAverage.toFixed(1)})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Pocket Hit %"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.pocketHitPercentage.toFixed(1),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Carry Rate"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.carryRate.toFixed(1),"%"]})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Spare Analysis"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Single Pin Spare %"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.singlePinSparePercentage.toFixed(1),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Multi Pin Spare %"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.multiPinSparePercentage.toFixed(1),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Split Leaves %"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.splitLeavesPercentage.toFixed(1),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Split Conversion %"}),f.jsxs("div",{className:"text-xl font-bold text-white",children:[O.splitConversionPercentage.toFixed(1),"%"]})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Recent Games"}),f.jsx("div",{className:"bg-white/5 rounded-lg border border-white/10 overflow-hidden",children:f.jsx("div",{className:"max-h-48 overflow-y-auto",children:N.slice(0,10).map((V,k)=>f.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-white/10 last:border-0 hover:bg-white/5 transition-colors",children:[f.jsxs("span",{className:"text-sm text-gray-300",children:["Game ",N.length-k]}),f.jsx("span",{className:"text-lg font-semibold text-white",children:V.totalScore})]},V.id))})})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(Ve,{to:`/coach/notes?playerId=${u}`,className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all text-center font-medium",onClick:()=>p(null),children:"View Notes"}),f.jsx("button",{onClick:()=>p(null),className:"flex-1 px-4 py-3 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-all font-medium",children:"Close"})]})]})]})]})})]})]})}function g4(){const{userData:i,logout:e}=Yn(),{data:n}=Uo(i?.programId),{data:r}=Fd(i?.programId),[o,c]=P.useState(!1),[u,p]=P.useState(""),[g,y]=P.useState([]),[b,x]=P.useState(!1),[E,N]=P.useState(""),O=async U=>{if(U.preventDefault(),!(!i?.programId||!i?.uid)){if(g.length>5){N("Maximum 5 players per team");return}try{x(!0),N("");const Q={name:u,programId:i.programId,coachId:i.uid,playerIds:g,createdAt:Fn(),updatedAt:Fn()};await xT(Gi(kt,"teams"),Q),p(""),y([]),c(!1)}catch(Q){console.error("Error creating team:",Q),N("Failed to create team")}finally{x(!1)}}},V=async U=>{if(confirm("Are you sure you want to delete this team?"))try{await bT(Vi(kt,"teams",U))}catch(Q){console.error("Error deleting team:",Q),alert("Failed to delete team")}},k=U=>{y(Q=>Q.includes(U)?Q.filter(W=>W!==U):[...Q,U])};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[f.jsx("header",{className:"bg-white/10 backdrop-blur-lg shadow-xl border-b border-white/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Ve,{to:"/coach/admin",className:"text-white hover:text-gray-200",children:" Back to Admin"}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"Roster Management"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"text-sm text-gray-200",children:[i?.displayName," (",i?.role,")"]}),f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white hover:text-gray-200 bg-white/10 hover:bg-white/20 rounded-lg transition-all backdrop-blur-sm",children:"Logout"})]})]})}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20",children:[f.jsxs("div",{className:"px-6 py-4 border-b border-white/20 flex justify-between items-center",children:[f.jsx("h2",{className:"text-xl font-semibold text-white",children:"Teams"}),f.jsx("button",{onClick:()=>c(!o),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all",children:o?"Cancel":"+ Create Team"})]}),f.jsxs("div",{className:"p-6 space-y-4",children:[o&&f.jsxs("form",{onSubmit:O,className:"bg-white/5 rounded-lg p-4 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Team Name"}),f.jsx("input",{type:"text",required:!0,value:u,onChange:U=>p(U.target.value),className:"w-full px-3 py-2 border border-white/30 bg-white/5 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 backdrop-blur-sm",placeholder:"e.g., Varsity Team"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Select Players (max 5)"}),f.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:n.map(U=>f.jsxs("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-white/5 p-2 rounded",children:[f.jsx("input",{type:"checkbox",checked:g.includes(U.id),onChange:()=>k(U.id),className:"rounded"}),f.jsx("span",{children:U.name})]},U.id))})]}),E&&f.jsx("div",{className:"text-red-300 text-sm",children:E}),f.jsx("button",{type:"submit",disabled:b||!u||g.length===0,className:"w-full px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:from-green-700 hover:to-teal-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Creating...":"Create Team"})]}),r.length===0?f.jsx("div",{className:"text-center text-gray-300 py-8",children:'No teams created yet. Click "Create Team" to get started.'}):f.jsx("div",{className:"space-y-4",children:r.map(U=>f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-white",children:U.name}),f.jsxs("p",{className:"text-sm text-gray-300",children:[U.playerIds.length," player",U.playerIds.length!==1?"s":""]})]}),f.jsx("button",{onClick:()=>V(U.id),className:"text-red-300 hover:text-red-200 text-sm",children:"Delete"})]}),f.jsx("div",{className:"space-y-1",children:U.playerIds.map(Q=>{const W=n.find(re=>re.id===Q);return W?f.jsxs("div",{className:"text-sm text-gray-300",children:[" ",W.name]},Q):null})})]},U.id))})]})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20",children:[f.jsx("div",{className:"px-6 py-4 border-b border-white/20",children:f.jsx("h2",{className:"text-xl font-semibold text-white",children:"All Players"})}),f.jsx("div",{className:"p-6",children:n.length===0?f.jsx("div",{className:"text-center text-gray-300 py-8",children:"No players in your program yet."}):f.jsx("div",{className:"space-y-2",children:n.map(U=>f.jsxs("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-3 border border-white/10",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-white font-medium",children:U.name}),f.jsx("div",{className:"text-sm text-gray-300",children:U.email})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-white font-medium",children:U.averageScore?U.averageScore.toFixed(1):"N/A"}),f.jsxs("div",{className:"text-sm text-gray-300",children:[U.gamesPlayed||0," games"]})]})]},U.id))})})]})]})})]})}function y4(){const{userData:i,logout:e}=Yn(),{data:n}=Fd(i?.programId),{data:r}=Uo(i?.programId),{data:o}=iy(),[c,u]=P.useState(""),p=n.find(x=>x.id===c),g=p?r.filter(x=>p.playerIds.includes(x.id)):[],y=g.reduce((x,E)=>{const N=o.filter(k=>k.playerId===E.id),O=N.reduce((k,U)=>k+U.totalScore,0),V=N.reduce((k,U)=>Math.max(k,U.totalScore),0);return{totalGames:x.totalGames+N.length,totalScore:x.totalScore+O,highGame:Math.max(x.highGame,V)}},{totalGames:0,totalScore:0,highGame:0}),b=y.totalGames>0?y.totalScore/y.totalGames:0;return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[f.jsx("header",{className:"bg-white/10 backdrop-blur-lg shadow-xl border-b border-white/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Ve,{to:"/coach/admin",className:"text-white hover:text-gray-200",children:" Back to Admin"}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"Team Stats"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"text-sm text-gray-200",children:[i?.displayName," (",i?.role,")"]}),f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white hover:text-gray-200 bg-white/10 hover:bg-white/20 rounded-lg transition-all backdrop-blur-sm",children:"Logout"})]})]})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6 mb-8",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Select Team"}),f.jsxs("select",{value:c,onChange:x=>u(x.target.value),className:"w-full md:w-64 px-3 py-2 border border-white/30 bg-white/5 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 backdrop-blur-sm",children:[f.jsx("option",{value:"",className:"bg-gray-800",children:"-- Select a team --"}),n.map(x=>f.jsx("option",{value:x.id,className:"bg-gray-800",children:x.name},x.id))]})]}),p?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-2",children:""}),f.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Team Members"}),f.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:g.length})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-2",children:""}),f.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Total Games"}),f.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:y.totalGames})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-2",children:""}),f.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Team Average"}),f.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:b.toFixed(1)})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 border border-white/20",children:[f.jsx("div",{className:"text-3xl mb-2",children:""}),f.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Highest Game"}),f.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:y.highGame})]})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20",children:[f.jsx("div",{className:"px-6 py-4 border-b border-white/20",children:f.jsx("h2",{className:"text-xl font-semibold text-white",children:"Player Statistics"})}),g.length===0?f.jsx("div",{className:"p-8 text-center text-gray-300",children:"No players on this team yet."}):f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-white/20",children:[f.jsx("thead",{className:"bg-white/5",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Player"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Games"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Average"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"High Game"})]})}),f.jsx("tbody",{className:"divide-y divide-white/10",children:g.map(x=>{const E=o.filter(V=>V.playerId===x.id),N=x.averageScore||0,O=E.reduce((V,k)=>Math.max(V,k.totalScore),0);return f.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:x.name}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:x.gamesPlayed||0}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:N.toFixed(1)}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:O||"N/A"})]},x.id)})})]})})]})]}):f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-12 text-center",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"Select a Team to View Stats"}),f.jsx("p",{className:"text-gray-300",children:"Choose a team from the dropdown above to see detailed statistics and player performance."})]})]})]})}function v4(){const{userData:i,logout:e}=Yn(),{data:n}=Uo(i?.programId),[r]=PA(),o=r.get("playerId")||"",[c,u]=P.useState(o),{data:p}=m4(c),[g,y]=P.useState(!1),[b,x]=P.useState(""),[E,N]=P.useState(""),[O,V]=P.useState(!0),[k,U]=P.useState(null),[Q,W]=P.useState(!1);P.useEffect(()=>{u(o)},[o]);const re=async A=>{if(A.preventDefault(),!(!c||!i?.uid))try{W(!0);const R=E.split(",").map(M=>M.trim()).filter(M=>M.length>0),z={coachId:i.uid,playerId:c,content:b,tags:R,isPrivate:O,updatedAt:Fn()};k?await wO(Vi(kt,"coachNotes",k),z):await xT(Gi(kt,"coachNotes"),{...z,createdAt:Fn()}),x(""),N(""),V(!0),y(!1),U(null)}catch(R){console.error("Error saving note:",R),alert("Failed to save note")}finally{W(!1)}},oe=A=>{x(A.content),N(A.tags.join(", ")),V(A.isPrivate),U(A.id),y(!0)},ue=async A=>{if(confirm("Are you sure you want to delete this note?"))try{await bT(Vi(kt,"coachNotes",A))}catch(R){console.error("Error deleting note:",R),alert("Failed to delete note")}},C=n.find(A=>A.id===c);return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[f.jsx("header",{className:"bg-white/10 backdrop-blur-lg shadow-xl border-b border-white/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Ve,{to:"/coach/admin",className:"text-white hover:text-gray-200",children:" Back to Admin"}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"Coach Notes"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"text-sm text-gray-200",children:[i?.displayName," (",i?.role,")"]}),f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white hover:text-gray-200 bg-white/10 hover:bg-white/20 rounded-lg transition-all backdrop-blur-sm",children:"Logout"})]})]})}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6",children:[f.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Select Player"}),f.jsx("div",{className:"space-y-2",children:n.map(A=>f.jsxs("button",{onClick:()=>{u(A.id),y(!1),U(null)},className:`w-full text-left p-3 rounded-lg transition-all ${c===A.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":"bg-white/5 text-gray-200 hover:bg-white/10"}`,children:[f.jsx("div",{className:"font-medium",children:A.name}),f.jsx("div",{className:"text-sm opacity-75",children:A.email})]},A.id))})]})}),f.jsx("div",{className:"lg:col-span-2",children:C?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6 mb-6",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-semibold text-white",children:C.name}),f.jsxs("p",{className:"text-gray-300",children:[C.gamesPlayed||0," games  Avg:"," ",C.averageScore?.toFixed(1)||"N/A"]})]}),f.jsx("button",{onClick:()=>{y(!g),U(null),x(""),N(""),V(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all",children:g?"Cancel":"+ Add Note"})]})}),g&&f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6 mb-6",children:[f.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:k?"Edit Note":"Add New Note"}),f.jsxs("form",{onSubmit:re,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Note Content"}),f.jsx("textarea",{required:!0,value:b,onChange:A=>x(A.target.value),rows:6,className:"w-full px-3 py-2 border border-white/30 bg-white/5 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 backdrop-blur-sm",placeholder:"Enter your coaching notes here..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Tags (comma-separated)"}),f.jsx("input",{type:"text",value:E,onChange:A=>N(A.target.value),className:"w-full px-3 py-2 border border-white/30 bg-white/5 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 backdrop-blur-sm",placeholder:"e.g., 10-pin, release, speed"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",id:"isPrivate",checked:O,onChange:A=>V(A.target.checked),className:"rounded"}),f.jsx("label",{htmlFor:"isPrivate",className:"text-sm text-gray-200",children:"Private note (only visible to coaches)"})]}),f.jsx("button",{type:"submit",disabled:Q,className:"w-full px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:from-green-700 hover:to-teal-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:Q?"Saving...":k?"Update Note":"Save Note"})]})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20",children:[f.jsx("div",{className:"px-6 py-4 border-b border-white/20",children:f.jsxs("h3",{className:"text-xl font-semibold text-white",children:["All Notes (",p.length,")"]})}),f.jsx("div",{className:"p-6 space-y-4",children:p.length===0?f.jsx("div",{className:"text-center text-gray-300 py-8",children:'No notes yet. Click "Add Note" to create one.'}):p.map(A=>f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"text-white whitespace-pre-wrap",children:A.content})}),f.jsxs("div",{className:"flex gap-2 ml-4",children:[f.jsx("button",{onClick:()=>oe(A),className:"text-blue-300 hover:text-blue-200 text-sm",children:"Edit"}),f.jsx("button",{onClick:()=>ue(A.id),className:"text-red-300 hover:text-red-200 text-sm",children:"Delete"})]})]}),A.tags.length>0&&f.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:A.tags.map(R=>f.jsx("span",{className:"px-2 py-1 bg-purple-500/30 text-purple-200 rounded text-xs",children:R},R))}),f.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[A.isPrivate&&f.jsx("span",{children:" Private"}),f.jsx("span",{children:A.createdAt instanceof Date?A.createdAt.toLocaleDateString():"Recently added"})]})]},A.id))})]})]}):f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-12 text-center",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"Select a Player"}),f.jsx("p",{className:"text-gray-300",children:"Choose a player from the list to view and manage their notes."})]})})]})})]})}function _4(){const{userData:i,logout:e}=Yn(),{data:n,loading:r}=iy(),[o,c]=P.useState([]),[u,p]=P.useState(!1),g=P.useMemo(()=>i?.uid?n.filter(x=>x.playerId===i.uid):[],[n,i?.uid]);P.useMemo(async()=>{if(g.length===0){c([]);return}p(!0);try{const x=g.map(V=>V.id),E=Tr(Gi(kt,"frames"),Gn("gameId","in",x.slice(0,10))),O=(await _a(E)).docs.map(V=>({id:V.id,...V.data()}));c(O)}catch(x){console.error("Error loading frames:",x)}finally{p(!1)}},[g]);const y=P.useMemo(()=>i?.uid?Ud(g,o):null,[g,o,i?.uid]),b=r||u;return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[f.jsx("header",{className:"bg-white/10 backdrop-blur-lg shadow-xl border-b border-white/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Ve,{to:"/dashboard",className:"text-white hover:text-gray-200",children:" Back"}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Stats"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"text-sm text-gray-200",children:[i?.displayName," (",i?.role,")"]}),f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white hover:text-gray-200 bg-white/10 hover:bg-white/20 rounded-lg transition-all backdrop-blur-sm",children:"Logout"})]})]})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b&&f.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-12 text-center",children:f.jsx("div",{className:"text-white text-lg",children:"Loading your statistics..."})}),!b&&g.length===0&&f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-12 text-center",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"No Games Played Yet"}),f.jsx("p",{className:"text-gray-300 mb-6",children:"Start bowling to see your statistics and track your progress!"}),f.jsx(Ve,{to:"/league",className:"inline-block px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all",children:"Start a Game"})]}),!b&&y&&g.length>0&&f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:i?.displayName}),f.jsxs("p",{className:"text-gray-300",children:[y.totalGames," games played"]})]}),f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Average"}),f.jsx("div",{className:"text-2xl font-bold text-white",children:y.averageScore.toFixed(1)})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"High Game"}),f.jsx("div",{className:"text-2xl font-bold text-white",children:y.highGame})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Strike %"}),f.jsxs("div",{className:"text-2xl font-bold text-white",children:[y.strikePercentage.toFixed(1),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Spare %"}),f.jsxs("div",{className:"text-2xl font-bold text-white",children:[y.sparePercentage.toFixed(1),"%"]})]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-white/10 mb-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Performance Metrics"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"First Ball Average"}),f.jsx("div",{className:"text-xl font-semibold text-white",children:y.firstBallAverage.toFixed(1)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Pocket Hit %"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.pocketHitPercentage.toFixed(1),"%"]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Carry Rate"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.carryRate.toFixed(1),"%"]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Open Frames %"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.openFramesPercentage.toFixed(1),"%"]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Double %"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.doublePercentage.toFixed(1),"%"]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Triple %"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.triplePercentage.toFixed(1),"%"]})]})]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-white/10 mb-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Spare Analysis"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Single Pin Spare %"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.singlePinSparePercentage.toFixed(1),"%"]}),f.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Of all spares made"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Multi Pin Spare %"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.multiPinSparePercentage.toFixed(1),"%"]}),f.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Of all spares made"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Split Leaves %"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.splitLeavesPercentage.toFixed(1),"%"]}),f.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Of all frames"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Split Conversion %"}),f.jsxs("div",{className:"text-xl font-semibold text-white",children:[y.splitConversionPercentage.toFixed(1),"%"]}),f.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Splits converted to spares"})]})]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-white/10",children:[f.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Errors & Fouls"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Total Gutters"}),f.jsx("div",{className:"text-xl font-semibold text-red-300",children:y.gutterCount})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-300",children:"Total Fouls"}),f.jsx("div",{className:"text-xl font-semibold text-orange-300",children:y.foulCount})]})]})]})]})})]})]})}const Th=[{id:"10-pin",name:"10 Pin",pins:[10],difficulty:"easy"},{id:"7-pin",name:"7 Pin",pins:[7],difficulty:"easy"},{id:"4-pin",name:"4 Pin",pins:[4],difficulty:"easy"},{id:"6-pin",name:"6 Pin",pins:[6],difficulty:"easy"},{id:"3-6-10",name:"3-6-10 Washout",pins:[3,6,10],difficulty:"medium"},{id:"2-7",name:"2-7 Bucket",pins:[2,7],difficulty:"medium"},{id:"3-10",name:"3-10 Split",pins:[3,10],difficulty:"hard"},{id:"7-10",name:"7-10 Split",pins:[7,10],difficulty:"hard"},{id:"4-6-7-10",name:"Big Four",pins:[4,6,7,10],difficulty:"hard"}];function b4(){const[i,e]=P.useState(Th[0]),[n,r]=P.useState(0),[o,c]=P.useState(0),[u,p]=P.useState(Th[0].pins),[g,y]=P.useState(!1),[b,x]=P.useState(null),E=U=>{p(Q=>Q.includes(U)?Q.filter(W=>W!==U):[...Q,U])},N=()=>{const U=i.pins.every(Q=>!u.includes(Q));r(n+1),U?(c(o+1),x("success")):x("miss"),y(!0),setTimeout(()=>{p(i.pins),y(!1),x(null)},2e3)},O=()=>{r(0),c(0),p(i.pins),y(!1),x(null)},V=U=>{const Q=Th.find(W=>W.id===U);Q&&(e(Q),p(Q.pins),O())},k=n>0?(o/n*100).toFixed(1):"0.0";return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsx(Ve,{to:"/dashboard",className:"text-white hover:text-gray-200 transition-colors",children:" Back to Dashboard"}),f.jsx("h1",{className:"text-4xl font-bold text-white text-center flex-1",children:"Practice - Spares Only"}),f.jsx("div",{className:"w-32"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6",children:[f.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Select Spare Drill"}),f.jsx("div",{className:"space-y-2",children:Th.map(U=>f.jsxs("button",{onClick:()=>V(U.id),className:`w-full text-left p-3 rounded-lg transition-all ${i.id===U.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":"bg-white/5 text-gray-200 hover:bg-white/10"}`,children:[f.jsx("div",{className:"font-medium",children:U.name}),f.jsx("div",{className:"text-sm opacity-75 capitalize",children:U.difficulty})]},U.id))})]}),f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-4 text-center",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Attempts"}),f.jsx("div",{className:"text-3xl font-bold text-white",children:n})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-4 text-center",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Conversions"}),f.jsx("div",{className:"text-3xl font-bold text-green-300",children:o})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-4 text-center",children:[f.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"Rate"}),f.jsxs("div",{className:"text-3xl font-bold text-blue-300",children:[k,"%"]})]})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:i.name}),f.jsxs("p",{className:"text-gray-300 capitalize",children:["Difficulty: ",i.difficulty]})]}),g&&f.jsx("div",{className:`mb-4 p-4 rounded-lg text-center text-xl font-bold ${b==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:b==="success"?" Converted!":" Missed"}),f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx(IT,{pinsStanding:u,onPinTap:E})}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:N,disabled:g,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Attempt"}),f.jsx("button",{onClick:O,className:"px-6 py-3 bg-white/10 text-white rounded-lg font-semibold hover:bg-white/20 transition-all border border-white/20",children:"Reset Stats"})]}),f.jsx("div",{className:"mt-4 text-center text-sm text-gray-300",children:"Click the pins to mark them as knocked down, then submit your attempt."})]})]})]})]})})}function x4(){const{userData:i}=Yn(),[e,n]=P.useState(!1),[r,o]=P.useState(0),c=(p,g)=>{console.log("Practice game complete!",{frames:p,score:g}),o(g),n(!0)},u=()=>{n(!1),o(0)};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsx(Ve,{to:"/dashboard",className:"text-white hover:text-gray-200 transition-colors",children:" Back to Dashboard"}),f.jsx("h1",{className:"text-4xl font-bold text-white text-center flex-1",children:"Practice - Full Game"}),f.jsx("div",{className:"w-32"})," "]}),e?f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-8 text-center",children:[f.jsx("h2",{className:"text-3xl font-bold text-green-300 mb-4",children:"Practice Complete!"}),f.jsx("p",{className:"text-6xl font-bold text-white mb-8",children:r}),f.jsxs("div",{className:"flex gap-4 justify-center",children:[f.jsx("button",{onClick:u,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all",children:"Practice Again"}),f.jsx(Ve,{to:"/stats",className:"px-6 py-3 bg-white/10 text-white rounded-lg font-semibold hover:bg-white/20 transition-all border border-white/20",children:"View Stats"})]})]}):f.jsx(zd,{gameId:`practice-full-${Date.now()}`,playerId:i?.uid||"guest",mode:"practice-full",onGameComplete:c})]})})}function w4(){const{userData:i}=Yn(),{data:e}=Fd(i?.programId),{data:n}=Uo(i?.programId),[r,o]=P.useState(""),[c,u]=P.useState(null),[p,g]=P.useState([]),[y,b]=P.useState(0),[x,E]=P.useState({}),[N,O]=P.useState(!1),[V,k]=P.useState(!1);P.useEffect(()=>{if(r){const ue=e.find(C=>C.id===r);if(ue){u(ue);const C=n.filter(A=>ue.playerIds.includes(A.id));g(C)}}},[r,e,n]);const U=(ue,C)=>{const A=p[y];E(R=>({...R,[A.id]:C})),y<p.length-1?(b(y+1),k(!1)):O(!0)},Q=()=>{k(!0)},W=()=>{b(0),E({}),O(!1),k(!1)},re=Object.values(x).reduce((ue,C)=>ue+C,0);if(!r)return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsx(Ve,{to:"/dashboard",className:"text-white hover:text-gray-200 transition-colors",children:" Back to Dashboard"}),f.jsx("h1",{className:"text-4xl font-bold text-white text-center flex-1",children:"Traditional Match"}),f.jsx("div",{className:"w-32"})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-8",children:[f.jsx("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Select Team"}),e.length===0?f.jsxs("div",{className:"text-center text-gray-300 py-8",children:[f.jsx("p",{className:"mb-4",children:"No teams available."}),f.jsx("p",{className:"text-sm",children:"Ask your coach to create a team or create one yourself if you're a coach."})]}):f.jsx("div",{className:"space-y-3",children:e.map(ue=>f.jsx("button",{onClick:()=>o(ue.id),className:"w-full text-left p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-all border border-white/10",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-lg font-semibold text-white",children:ue.name}),f.jsxs("div",{className:"text-sm text-gray-300",children:[ue.playerIds.length," player",ue.playerIds.length!==1?"s":""]})]}),f.jsx("div",{className:"text-purple-300",children:"Select "})]})},ue.id))})]})]})});if(N)return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-8",children:"Match Complete!"}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:c?.name}),f.jsx("div",{className:"text-5xl font-bold text-white mt-4",children:re}),f.jsx("div",{className:"text-gray-300 mt-2",children:"Total Team Score"})]}),f.jsx("div",{className:"space-y-3 mb-8",children:p.map(ue=>f.jsxs("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-4 border border-white/10",children:[f.jsx("span",{className:"text-white font-medium",children:ue.name}),f.jsx("span",{className:"text-2xl font-bold text-white",children:x[ue.id]||0})]},ue.id))}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:W,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all",children:"New Match"}),f.jsx(Ve,{to:"/dashboard",className:"flex-1 px-6 py-3 bg-white/10 text-white rounded-lg font-semibold hover:bg-white/20 transition-all border border-white/20 text-center",children:"Back to Dashboard"})]})]})]})});const oe=p[y];return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsx(Ve,{to:"/dashboard",className:"text-white hover:text-gray-200 transition-colors",children:" Back"}),f.jsxs("h1",{className:"text-4xl font-bold text-white text-center flex-1",children:["Traditional Match - ",c?.name]}),f.jsx("div",{className:"w-32"})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6 mb-6",children:[f.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Team Progress"}),f.jsx("div",{className:"grid grid-cols-5 gap-4",children:p.map((ue,C)=>f.jsxs("div",{className:`p-3 rounded-lg text-center ${C===y?"bg-gradient-to-r from-purple-600 to-blue-600":C<y?"bg-green-600/30":"bg-white/5"}`,children:[f.jsx("div",{className:"text-sm text-white mb-1",children:ue.name}),f.jsx("div",{className:"text-2xl font-bold text-white",children:x[ue.id]||"-"})]},ue.id))}),f.jsxs("div",{className:"mt-4 text-center text-white",children:["Total Score: ",re]})]}),V?f.jsx(zd,{gameId:`traditional-${r}-${oe.id}-${Date.now()}`,playerId:oe.id,mode:"match-traditional",onGameComplete:U}):f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-8 text-center",children:[f.jsxs("h2",{className:"text-3xl font-bold text-white mb-4",children:[oe.name,"'s Turn"]}),f.jsxs("p",{className:"text-gray-300 mb-6",children:["Player ",y+1," of ",p.length]}),f.jsx("button",{onClick:Q,className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-blue-700 transition-all",children:"Start Game"})]})]})})}function E4(){const{userData:i}=Yn(),{data:e}=Fd(i?.programId),{data:n}=Uo(i?.programId),[r,o]=P.useState(""),[c,u]=P.useState(null),[p,g]=P.useState([]),[y,b]=P.useState(!1),[x,E]=P.useState(0),[N,O]=P.useState(!1);P.useEffect(()=>{if(r){const W=e.find(re=>re.id===r);if(W){u(W);const re=n.filter(oe=>W.playerIds.includes(oe.id));g(re.slice(0,5))}}},[r,e,n]);const V=(W,re)=>{E(re),O(!0)},k=()=>{b(!1),E(0),O(!1)},Q=(()=>{const W=[];for(let re=1;re<=10;re++){const oe=(re-1)%5;p[oe]&&W.push({frame:re,player:p[oe]})}return W})();return r?N?f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-8",children:"Baker Match Complete!"}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:c?.name}),f.jsx("div",{className:"text-6xl font-bold text-white mt-4",children:x}),f.jsx("div",{className:"text-gray-300 mt-2",children:"Team Score"})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-white/10 mb-8",children:[f.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Baker Rotation"}),f.jsx("div",{className:"grid grid-cols-2 gap-3",children:Q.map(W=>f.jsxs("div",{className:"flex justify-between items-center text-gray-200 text-sm",children:[f.jsxs("span",{children:["Frame ",W.frame,":"]}),f.jsx("span",{className:"font-medium",children:W.player.name})]},W.frame))})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:k,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all",children:"New Baker Match"}),f.jsx(Ve,{to:"/dashboard",className:"flex-1 px-6 py-3 bg-white/10 text-white rounded-lg font-semibold hover:bg-white/20 transition-all border border-white/20 text-center",children:"Back to Dashboard"})]})]})]})}):f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsx(Ve,{to:"/dashboard",className:"text-white hover:text-gray-200 transition-colors",children:" Back"}),f.jsxs("h1",{className:"text-4xl font-bold text-white text-center flex-1",children:["Baker Match - ",c?.name]}),f.jsx("div",{className:"w-32"})]}),y?f.jsx(zd,{gameId:`baker-${r}-${Date.now()}`,playerId:c?.id||"",mode:"match-baker",onGameComplete:V}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-6 mb-6",children:[f.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Baker Format - Rotation"}),f.jsx("p",{className:"text-gray-300 mb-4",children:"In Baker format, players alternate frames. Each player bowls 2 frames."}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Q.map(W=>f.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10 text-center",children:[f.jsxs("div",{className:"text-sm text-gray-300",children:["Frame ",W.frame]}),f.jsx("div",{className:"text-white font-medium mt-1",children:W.player.name})]},W.frame))})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-8 text-center",children:[f.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Start?"}),f.jsx("p",{className:"text-gray-300 mb-6",children:"Your team will bowl together, alternating frames"}),f.jsx("button",{onClick:()=>b(!0),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-blue-700 transition-all",children:"Start Baker Match"})]})]})]})}):f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsx(Ve,{to:"/dashboard",className:"text-white hover:text-gray-200 transition-colors",children:" Back to Dashboard"}),f.jsx("h1",{className:"text-4xl font-bold text-white text-center flex-1",children:"Baker Match"}),f.jsx("div",{className:"w-32"})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 p-8",children:[f.jsx("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Select Team"}),e.length===0?f.jsxs("div",{className:"text-center text-gray-300 py-8",children:[f.jsx("p",{className:"mb-4",children:"No teams available."}),f.jsx("p",{className:"text-sm",children:"Ask your coach to create a team or create one yourself if you're a coach."})]}):f.jsx("div",{className:"space-y-3",children:e.map(W=>{const re=n.filter(ue=>W.playerIds.includes(ue.id)).length,oe=re>=5;return f.jsx("button",{onClick:()=>oe&&o(W.id),disabled:!oe,className:`w-full text-left p-4 rounded-lg transition-all border border-white/10 ${oe?"bg-white/5 hover:bg-white/10 cursor-pointer":"bg-white/5 opacity-50 cursor-not-allowed"}`,children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-lg font-semibold text-white",children:W.name}),f.jsxs("div",{className:`text-sm ${oe?"text-gray-300":"text-red-300"}`,children:[re," player",re!==1?"s":"",!oe&&" (need 5 for Baker)"]})]}),oe&&f.jsx("div",{className:"text-purple-300",children:"Select "})]})},W.id)})})]})]})})}const T4=new dN;function S4(){return f.jsx(mN,{client:T4,children:f.jsx(IA,{children:f.jsx(n3,{children:f.jsxs(aA,{children:[f.jsx(an,{path:"/login",element:f.jsx(i3,{})}),f.jsx(an,{path:"/signup",element:f.jsx(r3,{})}),f.jsx(an,{path:"/dashboard",element:f.jsx(oi,{children:f.jsx(u4,{})})}),f.jsx(an,{path:"/league",element:f.jsx(oi,{children:f.jsx(f4,{})})}),f.jsx(an,{path:"/practice/spares",element:f.jsx(oi,{children:f.jsx(b4,{})})}),f.jsx(an,{path:"/practice/full",element:f.jsx(oi,{children:f.jsx(x4,{})})}),f.jsx(an,{path:"/match/traditional",element:f.jsx(oi,{children:f.jsx(w4,{})})}),f.jsx(an,{path:"/match/baker",element:f.jsx(oi,{children:f.jsx(E4,{})})}),f.jsx(an,{path:"/stats",element:f.jsx(oi,{children:f.jsx(_4,{})})}),f.jsx(an,{path:"/coach/admin",element:f.jsx(oi,{allowedRoles:["coach"],children:f.jsx(p4,{})})}),f.jsx(an,{path:"/coach/roster",element:f.jsx(oi,{allowedRoles:["coach"],children:f.jsx(g4,{})})}),f.jsx(an,{path:"/coach/notes",element:f.jsx(oi,{allowedRoles:["coach"],children:f.jsx(v4,{})})}),f.jsx(an,{path:"/coach/team-stats",element:f.jsx(oi,{allowedRoles:["coach"],children:f.jsx(y4,{})})}),f.jsx(an,{path:"/",element:f.jsx(hp,{to:"/dashboard",replace:!0})})]})})})})}g1.createRoot(document.getElementById("root")).render(f.jsx(P.StrictMode,{children:f.jsx(S4,{})}));
